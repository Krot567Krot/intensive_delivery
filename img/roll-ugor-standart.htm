<!DOCTYPE html>
<html lang="ru">
    <head>
<link rel="stylesheet" type="text/css" href="/assets/css/css_8ce293f7463b49187e30a977743fa662.css">

        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
                        
                        
        <meta charset="utf-8">
        
        <title>Угорь темпура ролл заказать с доставкой на дом в Москве</title>
        <meta name="keywords" content="угорь темпура ролл"/>
        <meta name="description" content="&amp;#11088;&amp;#11088;&amp;#11088;&amp;#11088;&amp;#11088;Угорь темпура ролл заказать с доставкой на дом в Москве и МО. &amp;#9989;Угорь темпура ролл по цене 389 руб &amp;#8252 с доставкой рядом. Угорь темпура ролл &amp;#9989; в ресторане ПиццаСушиВок."/>
        <meta property="og:title" content="Угорь темпура ролл - Роллы по цене от 389 руб. - Заказ и доставка Пицца Суши Вок в Москве">
        <meta name="og:description" content="&amp;#11088;&amp;#11088;&amp;#11088;&amp;#11088;&amp;#11088;Угорь темпура ролл заказать с доставкой на дом в Москве и МО. &amp;#9989;Угорь темпура ролл по цене 389 руб &amp;#8252 с доставкой рядом. Угорь темпура ролл &amp;#9989; в ресторане ПиццаСушиВок."/>          
		<meta property="og:image" content="https://pizzasushiwok.ru/images/site_logo.png">
<meta property="og:url" content="https://pizzasushiwok.ru/rolls/ugor-tempura-roll/">
<meta property="og:type" name="og:type" content="website" />
<meta property="og:locale" name="og:locale" content="ru_RU" />
<meta property="og:site_name" name="og:site_name" content="PizzaSushiWok" />
<link rel="canonical" href="https://pizzasushiwok.ru/rolls/ugor-tempura-roll/" />

<meta name="yandex-verification" content="7b7cdd7f5cd5928d" /> 
<meta name="yandex-verification" content="1786e8a4b1763876" />
<meta name="yandex-verification" content="f9dc45e35cd31475" />
<meta name="google-site-verification" content="x_3ZL1bZOYqGDyl39rLfXVLdLaIII1QiNH1BiH6vIYo" />
	
	
	
		

	
	
	
	
	

	        
        
	<meta name="SKYPE_TOOLBAR" content ="SKYPE_TOOLBAR_PARSER_COMPATIBLE" />	
	
	<link rel="icon" href="/favicon.svg" type="image/svg+xml" />
	<link rel="shortcut icon" href="/favicon.svg" type="image/svg+xml" />



	
	
	
	
	
	

	


	

	

	




		








<script src="https://static.pizzasushiwok.ru/js/jquery.min.js"></script>
<script src="https://static.pizzasushiwok.ru/js/jquery-ui.min.js"></script>
<script src="https://static.pizzasushiwok.ru/js/jquery.formstyler.min.js"></script>
<script src="https://static.pizzasushiwok.ru/js/jquery.maskedinput.min.js"></script>
<script src="https://static.pizzasushiwok.ru/js/jquery.bxslider.min.js"></script>
<script src="https://static.pizzasushiwok.ru/js/jquery.easyzoom.min.js"></script>
<script src="https://static.pizzasushiwok.ru/js/jquery.zoom.min.js"></script>
<script src="https://static.pizzasushiwok.ru/js/jquery.lazyload.js"></script>

<script src="https://static.pizzasushiwok.ru/js/owl.carousel.min.js"></script>
<script type="text/javascript" src="https://static.pizzasushiwok.ru/site/libs/fancybox/jquery.fancybox.pack.js"></script>
<script src="https://static.pizzasushiwok.ru/js/md5.js"></script>
<script src="https://static.pizzasushiwok.ru/js/main.js?1633011957"></script>

<script src="https://static.pizzasushiwok.ru/js/knockoutjs/dist/knockout.js"></script>
<script src="https://static.pizzasushiwok.ru/js/knockout-mapping/build/output/knockout.mapping-latest.js"></script>
<script>
	ko.bindingHandlers.stopBinding = {
			init: function() {
					return { controlsDescendantBindings: true };
			}
	};
</script>

<script src="https://static.pizzasushiwok.ru/js/library.js"></script>
<script src="https://static.pizzasushiwok.ru/js/perfect-scrollbar/js/perfect-scrollbar.min.js"></script>

<script src="https://static.pizzasushiwok.ru/js/toastr/toastr.min.js"></script>
<script src="https://static.pizzasushiwok.ru/js/toastr_configuration.js"></script>

<script src="https://static.pizzasushiwok.ru/js/category/get_ingr_ko.js"></script>

<script src="https://static.pizzasushiwok.ru/js/category/on_resize_close_popup_box_ko.js"></script>


        <script src="https://static.pizzasushiwok.ru/js/vex.combined.js"></script>
        
        



    <script type="text/javascript" src="https://static.pizzasushiwok.ru/js/sweetalert2@7.js"></script>
    <script src="https://static.pizzasushiwok.ru/js/npm_promise-polyfill@7_dist_promise.min.js"></script>
    <script type="text/javascript" src="/js/p_js/"></script>
 <script>
     
    vex.defaultOptions.className = 'vex-theme-os';
    vex.dialog.buttons.YES.text = 'Да';
    vex.dialog.buttons.YES.className = 'vex-dialog-button-secondary';
    vex.dialog.buttons.NO.text = 'Нет';
    vex.dialog.buttons.NO.className = 'vex-dialog-button-primary';

    var page_focus = false;

    var server_cart = {};
    var user_discount;
                

    var email_gifts = {};
    var filials = {};

  
        server_cart.data                   =  {
    "total_cart_amount": 0,
    "total_cart_sum": 0,
    "chopsticks_max": 0,
    "chopsticks": 0,
    "items": []
};
    
    user_discount =  null | 0;

    // преобразование к массиву
    var items_new = (function(){

        var results = [];
        for (var key in server_cart.data.items) {
        
            if (!server_cart.data.items.hasOwnProperty(key)) 
                continue;
            results.push(server_cart.data.items[key]);
            
        }
        return results;
        
    })();
    server_cart.data.items = items_new;
    server_cart.minsum = 0;
    server_cart.min_discount_sum = 600;

        function alignGifts(parent,col) {

            $(parent).each(function(){

                    var highestBox = 0;

                    $(col).each(function(){

                            if($(this).height() > highestBox) {

                                    highestBox = $(this).height();

                            }

                    });
                    //console.log(highestBox);
                    $(col).each(function(){

                            $(col).css({height:highestBox});
                            //console.log('height '+$(this).height());
                            //console.log('margin '+Math.round((highestBox - $(this).height())/2));
                    });                                    
            }); 

        }
</script>

<script>

    fancybox_open = false;
    
    timestamp_now = new Date(1662226610000).getTime();

    var CartModel = {
        constructor: function () {

            var self = this;

            self.cart = ko.observable(ko.mapping.fromJS(server_cart.data));
            self.promocode = ko.observable("");
            self.smm_promocode = ko.observable("");
            self.smm_gift = ko.observable({});
            self.promocode_input = ko.observable("");
            self.card_3_pan = ko.observable("");
            self.card_3_pan_input = ko.observable('');
            self.gifts = ko.observableArray([]);
            self.m_gifts = ko.observableArray([]);
            self.gift_hidden = ko.observable({"PEPPER10":{"id":"963","id_menu":"6","sum_from":"1200","auto":"0","dop_nabor":"0","start":"2018-11-01 07:00:00","end":"2038-01-01 07:00:00","promocode":"PEPPER10","type":"0","typ":"6","utm_source":"","utm_med":"","utm_compain":"","id_cupon":"59","filials":"^1^2^5^6^7^8^9^14^18^19^22^23^24^25^26^27^28^29^30^31^32^33^34^35^37^38^39^40^41^42^43^44^45^46^48^49^50^51^52^","dept_ids":"","once_promo":"0","active":"1","pizza_size":"26\u0441\u043c"},"CUSTOMPROMO":{"id":"1117","id_menu":"818","sum_from":"600","auto":"0","dop_nabor":"0","start":"2019-04-15 07:00:00","end":"2038-01-01 07:00:00","promocode":"CUSTOMPROMO","type":"0","typ":"6","utm_source":"","utm_med":"","utm_compain":"","id_cupon":"657","filials":"^1^2^6^7^9^5^8^12^22^14^28^30^27^18^25^19^26^24^23^29^31^32^33^34^35^36^37^38^39^40^41^42^43^44^45^46^47^48^49^50^51^52^","dept_ids":"","once_promo":"0","active":"1","pizza_size":""}});
            self.gift_hidden_active = ko.observable({});
            self.sauces = ko.observableArray([]);
            self.sauces5 = ko.observableArray([]);
            self.min_gift_sum = 65535;
            self.to_gifts_sum = ko.observable(0);

            self.gift_in_cart = ko.observable(false);
            self.is_promo_ok = ko.observable(false);
            self.is_card_3_ok = ko.observable(false);
            
            self.is_japanese_in_the_cart_not_gift = ko.observable(false);
            self.is_japanese_in_the_cart_gift = ko.observable(false);
            
            self.user_discount = ko.observable(0)

            self.discount = ko.observable(0);            

            self.dop = ko.observableArray([]);
            self.dop_nabor = ko.observable(0);

            self.is_modal_cunstructor_visible = ko.observable(false);


            self.full_link = function (item, data, event) {

                var link_href = "";

                $.each(PM[item.id_menu()].cat.breadcrumbs, function (index, obj) {
                    link_href = link_href + "/" + obj.alias;
                });

                link_href = link_href + "/" + PM[item.id_menu()].alias;

                return link_href;
            };

            self.promo_keydown = function (val, e) {

                console.log(val);
                console.log(e);

                /*if (e.keyCode === 13) {
                 console.log(val);
                 }*/

            };


    
self.absolute_discount = ko.pureComputed({
    read: function () {

        var absolute_discount = 0;

        for (var i = 0; i < self.cart().items().length; i++) {
            if ((self.cart().items()[i].is_gift() == 1))
            {
                if (parseInt(PM[self.cart().items()[i].id_menu()].items[0].price) < 0 && absolute_discount > parseInt(PM[self.cart().items()[i].id_menu()].items[0].price)) {
                    absolute_discount = parseInt(PM[self.cart().items()[i].id_menu()].items[0].price);
                }
            }
        }

        return absolute_discount;
    }

});    
self.product_is_discount = ko.pureComputed({
    read: function () {

        var product_is_discount = 0;

        for (var i = 0; i < self.cart().items().length; i++) {
            if ((self.cart().items()[i].is_gift() == 1))
            {
                if (parseInt(self.cart().items()[i].newDiscount()) > product_is_discount) {
                    product_is_discount = parseInt(self.cart().items()[i].newDiscount());
                }
            }
        }

        return product_is_discount;
    }

});    
self.gift_no_discount = ko.pureComputed({
    read: function () {

        var gift_no_discount = true;

        for (var i = 0; i < self.cart().items().length; i++) {
            if ((self.cart().items()[i].is_gift() == 1)/* || self.is_card_3_ok()*/)
            {
                if (self.cart().items()[i].is_gift() == 1 && typeof (self.cart().items()[i].id_cupon()) !== "undefined" && ['1130'].indexOf(self.cart().items()[i].id_cupon()) != -1) {
                    gift_no_discount = false;
                }
            }
        }

        return gift_no_discount;
    }

});        
            
self.total_cart_sum = ko.pureComputed({
    read: function(){
    
        var total_sum = 0;
        var gift_flag = 0;
        var absolute_discount = self.absolute_discount();
        try {
            var certificate_summ = self.cart().certificate_summ();
        } catch (e) {
            var certificate_summ = 0;
        }        
        var product_is_discount = self.product_is_discount();
        var gift_no_discount = self.gift_no_discount();
        
        
        for (var i = 0; i < self.cart().items().length; i++) {
            total_sum = total_sum + Number(self.cart().items()[i].product_price() * self.cart().items()[i].product_amount() + self.cart().items()[i].ingrids_price() * self.cart().items()[i].product_amount());
		  	if((self.cart().items()[i].is_gift() == 1)/* || self.is_card_3_ok()*/) 
		  	{
		  		gift_flag = 1;
                        }
        }
        //console.log('total_sum'); console.log(total_sum);
        //console.log('absolute_discount'); console.log(absolute_discount);
        //console.log('gift_flag == 1 && self.absolute_discount() < 0'); console.log(gift_flag == 1 && absolute_discount < 0);
        //console.log('self.product_is_discount()'); console.log(self.product_is_discount());

        //console.log('gift_flag'); console.log(gift_flag);
        
                if(gift_flag == 1 && absolute_discount < 0) {
                    //console.log(true);
                    total_sum += Number(absolute_discount);
                    if(total_sum < 0) {
                        total_sum = 0;
                    }
                }
                else if(gift_flag == 1 && product_is_discount > 0 && total_sum > server_cart.min_discount_sum/* && self.card_3_pan().length === 0*/) {
                    total_sum = Math.round(total_sum * ((100 - product_is_discount) / 100));
                }
		else if(gift_flag != 1 && gift_no_discount && user_discount > 0 && total_sum > server_cart.min_discount_sum/* && self.card_3_pan().length === 0*/) // только если нет подарка, тогда скидка
		{
                    total_sum = Math.round(total_sum * ((100 - user_discount) / 100));
		}
                
                if(Number(certificate_summ) > 0) {
                    total_sum -= Number(certificate_summ);
                    if(total_sum < 0) {
                        total_sum = 0;
                    }
                }

        //console.log('total_sum2'); console.log(total_sum);
        
        return total_sum;
    }
    
});         
            
self.total_sum0 = ko.pureComputed({
    read:
        function(){
    
        var total_sum = 0;
        //var gift_flag = 0;
        
        for (var i = 0; i < self.cart().items().length; i++) {
            total_sum = total_sum + 
                        Number(self.cart().items()[i].product_price() * self.cart().items()[i].product_amount() + 
                        self.cart().items()[i].ingrids_price() * self.cart().items()[i].product_amount());
        }
        
        return total_sum;
    }
    });   
    self.total_cart_amount = ko.pureComputed({

    read: function(){
    
        var total_amount = 0;
        
        for (var i = 0; i < self.cart().items().length; i++) {
            total_amount = total_amount + Number(self.cart().items()[i].product_amount());
        }
        
        return total_amount;
    }
    
});    self.update_items = function(items){

    self.cart().items.removeAll();
    self.cart().items(ko.mapping.fromJS(items)());
    self.update_cart();

                $.ajax({
                    type: "POST",
                    url: '/items_sostav.php',
                    data: { mod_name: "items_sostav"},
                    dataType: "json",
                    success: function(data, textStatus){
                        var items = $('.cart-row');
                        for (var i = 0; i < items.length; i++) 
                        {
                            var id_menu = $(items[i]).attr('id_menu');
                            var desc = $(items[i]).find('.ingredients i');
                            for(key in data) {
                                if(data[key].id_menu == id_menu)
                                {
                                    desc.html(data[key].sostav_text);
                                }
                            }
                        }                    
                    }
                });
                
                $('a.sauce_choose').on('click', function(e) {

                    e.preventDefault();
                    
                    $('select.sauce').styler();

                    $(this).parents('[id_menu]').find('div.sauce_choose').slideToggle();                  
                });                
};    // удалить 
self.remove_from_cart = function (id_cart, data, event) {

    //console.log(id_cart);  

    var pars = {tasks: []};

    /*if (data.is_gift() == '1') {
        
        toastr.info('Вы удалили подарок!');
        
        if (self.promocode().length > 0) {
            self.promocode('');
            self.promocode_input('');
            model_cart.is_promo_ok(false);
            toastr.info('Промокод отменён');
        }

        if (data.id_menu() == self.smm_gift().id_menu) {
            self.smm_promocode('');
            self.smm_gift({});
            toastr.info('Промокод отменён');
        }

        pars.tasks.push({
            task: 'del_promocode'
        });

        $.ajax({
         
         type: "POST",
         url: '/save_c.php',
         data: pars,
         dataType : "json",
         success: function (data, textStatus) {
         
         //
         
         }
         });
    }*/
    
    if(data.is_gift() == '1' && self.promocode().length > 0) {
        swal({
            title: "",
            text: "Удалить подарок и аннулировать промокод?",
            type: "warning",
            showCancelButton: true,
            /*confirmButtonClass: "btn-danger",*/
            confirmButtonText: "Да",
            cancelButtonText: "Нет",
            reverseButtons: true,
            /*closeOnConfirm: false,
            closeOnCancel: false*/
            confirmButtonClass: "btn-danger",
            confirmButtonColor: '#EB5A1E',
            cancelButtonColor: '#FFFFFF',
            showCancelButton: true,
            showCloseButton: true
        }).then(function (result) {
            if(typeof(result.value)!=="undefined") {
                delPromocode();
                swal.close();
            }
            else if(typeof(result.dismiss)!=="undefined") {
                swal.close();
            }
            //console.log(result);
        });
        
        return false;
    }
    
    pars.tasks.push({

        task: "delete_product",
        id_cart: id_cart

    });

    $.ajax({

        type: "POST",
        url: '/save_c.php',
        data: pars,
        dataType: "json",
        success: function (data, textStatus) {

            //console.log(data);
            var items = (function () {

                var results = [];
                for (var key in data.items) {

                    if (!data.items.hasOwnProperty(key))
                        continue;
                    results.push(data.items[key]);

                }
                return results;

            })();            
            
            /*toastr.info('Вы удалили подарок!');*/
            
            var pars = {
                mod_name: "promocode"
            };  

            $.post("/",pars,function(data1,textStatus,jqXHR){
                //console.log(data);
                $('.promocode_wrap').replaceWith(data1);

                var pars2 = {
                    mod_name: "promocode",
                    action: "active"
                };

                $.post("/",pars2,function(data2,textStatus,jqXHR){
                    //console.log(data2);
                    $('.promocode_wrap_fix').replaceWith(data2);                                                                                     
                },'html');
            },'html');           

            model_cart.update_items(items);
        }
    });


    self.cart().items.remove(function (i) {
        if (i == data) {

            if (i.is_gift() == '1') {

                self.dop_nabor(0);
            }

            if (typeof vkEvent !== 'undefined')
            {

                var eventParams = {"products" : [{"id":""+data.id_menu()}],
                    //"total_price" : data.product_price(),
                    "business_value" : 100
                };
                vkEvent(eventParams,"remove_from_cart", 3613);
            }

            return true;
        }
    });

    // подсчет количества товаров
    var items = 0;
    for (var i = 0; i < self.cart().items().length; i++) {
        if (self.cart().items()[i].is_gift() == 0)
        {
            items = items + 1;
        }
    }
    ;

    // Удалить все подарки из корзины если нет товаров
    if (items == 0) {


        /*self.cart().items.remove(function (item) {
            if (item.is_gift() == '1') {
                self.remove_from_cart(item.id_cart(), item, null);
                model_cart.dop_nabor(0);
            }
        });

        if (self.promocode().length > 0) {
            self.promocode('');
            self.promocode_input('');
            model_cart.is_promo_ok(false);
            toastr.info('Промокод отменён');
        }*/


    }

    // Удалить все подарки из корзины если сумма меньше минимальной для подарков
    if (self.total_cart_sum() < self.min_gift_sum)
    {
        /*self.cart().items.remove(function (item) {
            if (item.is_gift() == '1') {
                self.remove_from_cart(item.id_cart(), item, null);
            }
        });

        self.promocode('');
        self.promocode_input('');
        self.is_promo_ok(false);
        self.dop_nabor(0);*/


        var gifts_sum = [];
        $.each(gifts, function (index, obj) { // проходимся по таблице gifts
            if (obj.promocode == "")
            {
                gifts_sum.push(obj.sum_from);
            }
        });

        var min_sum = 65535;
        for (var i = 0; i < gifts_sum.length; i++) {
            if (gifts_sum[i] < min_sum)
            {
                min_sum = gifts_sum[i];
            }

        }

        if (min_sum != 65535)
        {
            self.min_gift_sum = min_sum;
            self.to_gifts_sum(self.min_gift_sum - self.total_cart_sum());
            //console.log(self.to_gifts_sum());
        }


    }

    self.update_cart();
};
    self.remove_chopsticks = function(){

    //console.log(id_cart);
    
    var pars = {
    
        task: "remove_chopsticks"
    
    };
    
    $.ajax({
    
        type: "POST",
        url: '/save_c.php',
        data: pars,
        dataType: "json",
        success: function(data, textStatus){
        
            console.log(data);
            
        }
    });
    
    self.cart().chopsticks(0);
    self.update_cart();
};    self.clear_cart = function(){

    var pars = {
    
        task: "clear_cart"
    
    };
    
    $.ajax({
    
        type: "POST",
        url: '/save_c.php',
        data: pars,
        dataType: "json",
        success: function(data, textStatus){
        
            //console.log(data);            
            
        }
    });
    
    self.cart().items.removeAll();
    self.update_cart();
    
    var pars = {
        mod_name: "promocode"
    };  

    $.post("/",pars,function(data1,textStatus,jqXHR){
    //console.log(data);
    $('.promocode_wrap').replaceWith(data1);

    var pars2 = {
        mod_name: "promocode",
        action: "active"
    };

    $.post("/",pars2,function(data2,textStatus,jqXHR){
        //console.log(data2);
        $('.promocode_wrap_fix').replaceWith(data2);                                                                                     
    },'html');
},'html'); 
    
};    self.update_cart = function(){

    //console.log('upd');
    
    if (self.total_cart_amount() == 0) {
        $('.is-empty').css('display', 'block');
        $('.no-empty').css('display', 'none');
        $('.add_to_order_wrap').hide();
    }
    else {
        $('.no-empty').css('display', 'block');
        $('.is-empty').css('display', 'none');
        $('.add_to_order_wrap').show();
    }
    // запись на сервер состояния корзины

};    self.update_amount = function(id_cart, amount){

    var pars = {
    
        task: "update_amount",
        id_cart: id_cart,
        amount: amount
    
    };
    
    $.ajax({
    
        type: "POST",
        url: '/save_c.php',
        data: pars,
        dataType: "json",
        success: function(data, textStatus){
        
            var items = (function(){
            
                var results = [];
                for (var key in data.items) {
                
                    if (!data.items.hasOwnProperty(key)) 
                        continue;
                    results.push(data.items[key]);
                    
                }
                return results;
                
            })();
            
            var pars = {
                mod_name: "promocode"
            };  

            $.post("/",pars,function(data1,textStatus,jqXHR){
                //console.log(data);
                $('.promocode_wrap').replaceWith(data1);

                var pars2 = {
                    mod_name: "promocode",
                    action: "active"
                };

                $.post("/",pars2,function(data2,textStatus,jqXHR){
                    //console.log(data2);
                    $('.promocode_wrap_fix').replaceWith(data2);                                                                                 
                },'html');
            },'html');              
            
            model_cart.update_items(items);
        }
    });
    
    //self.update_cart();

};    self.amount_plus = function(id_cart, data, event){
                //console.log('product_amount = '+parseInt(data.product_amount()));
                //console.log('cart_sum = '+parseInt(model_cart.total_sum()));
                //console.log('cart_sum/600 = '+Math.floor(parseInt(model_cart.total_sum())/600));
		if(data.is_gift() == '1') return;
                               
                /*if(data.id_menu() == "842" && parseInt(data.product_amount())>=Math.floor(parseInt(model_cart.total_sum())/600)) {
                    toastr.info('Можно закать не более одной пиццы "Пепперони СИТИ" на каждые 600 рублей суммы заказа!');
                    return;
                }*/
    
                var cart = model_cart.cart().items(),
                amount = 0;
                
                if(cart.length > 0) {
                    for(var i = 0; i < cart.length; i++) {
                        if(parseInt(cart[i].id_menu()) === 842) {
                           amount += parseInt(cart[i].product_amount());   
                        }
                    }
                }
                amount += 1; 
                /*console.log('amount = '+amount);
                console.log('cart_sum = '+parseInt(model_cart.total_sum()));
                console.log('cart_sum/600 = '+Math.floor(parseInt(model_cart.total_sum())/600));
                console.log('result = '+(amount>Math.floor(parseInt(model_cart.total_sum())/600)));*/  
                
                if(data.id_menu() == "842" && amount>Math.floor(parseInt(model_cart.total_sum())/600)) {
                    //toastr.info('Можно закать не более одной пиццы "Пепперони СИТИ" на каждые 600 рублей суммы заказа!');
                    swal({
                        title:'',
                        type:'warning',
                        html: '<p>Можно закать не более одной пиццы "Пепперони СИТИ" на каждые 600 рублей суммы заказа!</p>',
                        confirmButtonClass: "btn-danger",
                        confirmButtonColor: '#8fc322',
                        confirmButtonText: "Понятно"
                    });
                    return;
                }

    //data.product_amount(Number(data.product_amount()) + 1);

	for(var i=0; i<self.cart().items().length; i++) {
		if(self.cart().items()[i] == data)
		{
			
			self.cart().items()[i].product_amount(Number(self.cart().items()[i].product_amount()) + 1);
		}
			
	};
               
                    //obj.product_amount(Number(obj.product_amount()) + 1);
                    self.update_amount(id_cart, data.product_amount());    



};    self.amount_minus = function(id_cart, data, event){
	
	var gift_sum_from = 0;

	if(data.is_gift() == '1') return;
    
    if (data.product_amount() == 1) {
        return;
    }
    else 
    {
        
                    for(var i=0; i<self.cart().items().length; i++) {

                            if(self.cart().items()[i] == data)
                            {
                                    self.cart().items()[i].product_amount(Number(self.cart().items()[i].product_amount()) - 1);
                            }

                            /*if(self.cart().items()[i].is_gift() == '1')
                            {
                        //console.log(self.cart().items()[i]);

                        $.each(gifts, function(index, obj){ // проходимся по таблице gifts и получаем

                            if(obj.id_menu == self.cart().items()[i].id_menu()  &&  obj.type == self.cart().items()[i].product_type())
                            {
                                    gift_sum_from = obj.sum_from;
                            }

                                    });
                            }*/

                    }; 
                                                   
                    //data.product_amount(Number(data.product_amount()) - 1);
                    self.update_amount(id_cart, data.product_amount());          


                // 
                /*if(self.total_cart_sum() < gift_sum_from) {
                    self.cart().items.remove(function(item){
                        if(item.is_gift() == '1') {
                            self.remove_from_cart(item.id_cart(), item, null);
                        }
                    });
                }*/
    }

};    self.put_into_cart = function(item){

    self.cart().items.push(ko.mapping.fromJS(item));
    self.update_cart();
};    

self.rigts_adding_gift = 1; 


self.addgift2cart = function(btn, data, event) {

	
	//console.log(data); 
	//return;

	if (self.rigts_adding_gift == 1)
	{
		self.rigts_adding_gift = 0; 

		//console.log(data);


		/*if (data.deactivate_sum !=0)
		{
			self.min_gift_sum = data.deactivate_sum;
		}
		else
		{
			self.min_gift_sum = data.sum_from;
		//}*/

		//console.log(self.min_gift_sum);

		var pars = {
			task: 'put_item',
			item: JSON.stringify({
				id_cart: 			new Date().getTime(),
				id_menu: 			data.id_menu,
				id_cupon: 			data.id_cupon,
				product_price: 		0,
				product_amount: 	1,
				product_weight: 	PM[data.id_menu].items[data.type].weight,
				product_type: 		data.type,
				ingrids_price: 		0,
				ingrids_amount: 	0,
				sauce: 				PM[data.id_menu].sauce,
				top_cat_alias: 		PM[data.id_menu].cat.breadcrumbs[0].alias,
				isAddIngrid:      	0,
				ingrids: 			[],
				is_gift:          	"1",
				dop_nabor: 			data.dop_nabor
			}) 
		};
		
		$.ajax({

			type: "POST",
			url: '/save_c.php',
			data: pars,
			dataType : "json",
			success: function (data, textStatus) {

				
				var items = (function(){
					var results = [];
					for(var key in data.items) {

						if(!data.items.hasOwnProperty(key)) continue;
						results.push(data.items[key]);

					}
					return results;
				})();

				model_cart.update_items(items);
				
				self.gift_in_cart(true);

                                var pars = {
                                    mod_name: "promocode"
                                };  
                            
                                $.post("/",pars,function(data1,textStatus,jqXHR){
                                    //console.log(data);
                                    $('.promocode_wrap').replaceWith(data1);

                                    var pars2 = {
                                        mod_name: "promocode",
                                        action: "active"
                                    };

                                    $.post("/",pars2,function(data2,textStatus,jqXHR){
                                        //console.log(data2);
                                        $('.promocode_wrap_fix').replaceWith(data2);                                                                                     
                                    },'html');
                                },'html');                                
				
				self.rigts_adding_gift = 1;

			}
		});

	}
	
};    self.change_sauce = function(data, event){
    
        /*console.log(data);
        console.log(event.target.value);*/
	     
        var pars = {

            task: "update_sauce",
            id_cart: data.id_cart(),
            sauce: event.target.value,
        };

        $.ajax({

            type: "POST",
            url: '/save_c.php',
            data: pars,
            dataType: "json",
            success: function(data, textStatus){

                //console.log(data);
                var items = (function(){

                    var results = [];
                    for (var key in data.items) {

                        if (!data.items.hasOwnProperty(key)) 
                            continue;
                        results.push(data.items[key]);

                    }
                    return results;

                })();

                model_cart.update_items(items);        
            }
        }); 

};

            if(self.product_is_discount() > 0) {
                self.discount(self.product_is_discount());
            }
            else {
                self.discount(self.user_discount());
            }
            
            //self.total_sum = ko.observable(Math.round(self.total_cart_sum() / ((100 - self.discount()) / 100)));
            self.total_sum = ko.observable(self.total_sum0());


            ko.computed(function () {

                //console.log(self.min_gift_sum);

                //console.log(self.gifts().length);
                //console.log(self.total_cart_sum());
                //console.log(self.total_sum());
                var out = {};
                for (var key in self.gift_hidden()) {
                   eval('out.'+key+' = false;'); 
                }
                self.gift_hidden_active(out);
                out = {};
                if(self.product_is_discount() > 0) {
                    self.discount(self.product_is_discount());
                }
                else {
                    self.discount(self.user_discount());
                }                
                //self.total_sum = ko.observable(Math.round(self.total_cart_sum() / ((100 - self.discount()) / 100)));
                self.total_sum = ko.observable(self.total_sum0());

                //console.log(self.total_sum());
                
                self.gift_in_cart(false);
                
                var WOKs = 0,
                    WOKs_max = 4;
              
                for (var i = 0; i < self.cart().items().length; i++) {

                    //console.log(self.cart().items()[i].id_menu());
                    if (+self.cart().items()[i].is_gift() == 1)
                    {

                        //console.log('yes');
                        if(self.gift_no_discount() && self.product_is_discount === 0) {
                            self.total_sum(self.total_cart_sum());
                        }                        
                        self.gift_in_cart(true);
                        if(typeof(self.gift_hidden().HIDDEN_4WOKS_IS_5) !== "undefined" && self.gift_hidden().HIDDEN_4WOKS_IS_5.id_menu == self.cart().items()[i].id_menu()) {
                            self.gift_hidden_active().HIDDEN_4WOKS_IS_5=true;
                        }
                        if(typeof(self.gift_hidden().PEPPER10) !== "undefined" && self.gift_hidden().PEPPER10.id_menu == self.cart().items()[i].id_menu()) {
                            self.gift_hidden_active().PEPPER10=true;
                        }
                        if(typeof(self.gift_hidden().MORNING) !== "undefined" && self.gift_hidden().MORNING.id_menu == self.cart().items()[i].id_menu()) {
                            self.gift_hidden_active().MORNING=true;
                        }
                    }
                    if (['wok'].indexOf(self.cart().items()[i].top_cat_alias()) != -1 && self.cart().items()[i].is_gift() != '1') {
                        WOKs += Number(self.cart().items()[i].product_amount());
                    }
                    /*if (+self.cart().items()[i].profit_daily() == 1)
                    {

                        //console.log('yes');
                        self.total_sum(self.total_cart_sum());
                        self.gift_in_cart(true);
                        
                    }*/                    
                    //console.log('no');
                };
                if(self.cart().items().length > 0) {
                    //console.log(WOKs);
                }
                //console.log(self.gift_hidden_active());    
                //console.log(self.total_sum());



                //if(self.gift_in_cart) //если нет подарка в корзине
                //{
                self.gifts.removeAll();	// очищаем подарки
                var g = [];
                var sum_from = 0;

                $.each(gifts, function (index, obj) { // проходимся по таблице gifts


                    //console.log(self.promocode());
                    //console.log(obj.promocode);
                    //console.log(obj.sum_from);
                    //console.log(self.total_sum());


                    if (self.promocode() && (obj.promocode.toLocaleLowerCase().trim() == self.promocode().toLocaleLowerCase().trim()))
                    {
                        /*if (Number(obj.sum_from) <= self.total_sum() && (Number(obj.sum_to) >= self.total_sum() || Number(obj.sum_to)===0))*/
                        {
                            g.push(obj);
                        }
                    }

                });

                if (g.length > 0) {
                    self.gifts(g);
                }


                //если нет подарков по такому условию, нужно проверить по той-же таблице при пустом промокоде
                var now = new Date(1662226610000),
                start = new Date(1662226610000),
                end = new Date(1662226610000);
                start.setHours(8);
                start.setMinutes(0);
                start.setSeconds(0);
                end.setHours(9);
                end.setMinutes(30);
                end.setSeconds(0);
                /*console.log([start,now,end,now.getTime() >= start.getTime() && now.getTime() <= end.getTime()]);*/
                if (g.length == 0)
                {
                    $.each(gifts, function (index, obj) { // проходимся по таблице gifts

                        if (obj.promocode == "")
                        {
                            if (Number(obj.sum_from) <= self.total_sum()/* && (Number(obj.sum_to) >= self.total_sum() || Number(obj.sum_to)===0)*/)
                            {
                                g.push(obj);
                            }
                            if(self.cart().items().length > 0 && WOKs >= WOKs_max && typeof(self.gift_hidden().HIDDEN_4WOKS_IS_5) !=="undefined" && !self.gift_in_cart() && !self.gift_hidden_active().HIDDEN_4WOKS_IS_5) {
                                g.push(self.gift_hidden().HIDDEN_4WOKS_IS_5);
                                self.gift_hidden_active().HIDDEN_4WOKS_IS_5=true;
                            }
                            if(self.cart().items().length > 0 && Number(self.discount()) >= 10 && typeof(self.gift_hidden().PEPPER10) !== "undefined" && Number(self.total_sum()) >= Number(self.gift_hidden().PEPPER10.sum_from) && !self.gift_in_cart() && !self.gift_hidden_active().PEPPER10) {
                                g.push(self.gift_hidden().PEPPER10);
                                self.gift_hidden_active().PEPPER10=true;
                            }
                            if(self.cart().items().length > 0 && now.getTime() >= start.getTime() && now.getTime() <= end.getTime() && typeof(self.gift_hidden().MORNING) !== "undefined" && Number(self.total_sum()) >= Number(self.gift_hidden().MORNING.sum_from) && !self.gift_in_cart() && !self.gift_hidden_active().MORNING) {
                                g.push(self.gift_hidden().MORNING);
                                self.gift_hidden_active().MORNING=true;
                            }
                            if (Number(obj.sum_from) < self.min_gift_sum)
                            {
                                self.min_gift_sum = Number(obj.sum_from);
                            }
                        }
                    });
                    if (g.length > 0) {
                        self.gifts(g);
                    }
                }
                //}
                //else
                //{

                //}

                if(self.cart().items().length > 0) {
                    //console.log(self.gift_hidden_active());
                }

                self.m_gifts.removeAll();	// очищаем подарки
                var eg = [];

                $.each(email_gifts, function (index, obj) { // проходимся по таблице gifts


                    //console.log(self.promocode());
                    //console.log(obj.promocode);
                    obj.start_time = new Date(obj.timestamp_start*1000).getTime();
                    obj.end_time = new Date(obj.timestamp_end*1000).getTime();
                    //console.log(obj);
                    //console.log(new Date().getTime());
                    //console.log(obj.start_time);
                    //console.log(obj.end_time);
                    //console.log(self.total_sum());


                    //if (self.promocode() && (obj.promocode.toLocaleLowerCase().trim() == self.promocode().toLocaleLowerCase().trim()))
                    //{
                    if (new Date().getTime() > obj.start_time && new Date().getTime() < obj.end_time) {
                        eg.push(obj);
                    }
                    //}

                });

                if (eg.length > 0) {
                    self.m_gifts(eg);
                }



                var ch = 0;
                var dop = 0;
                var gift_to_remove = 0;

                $.each(self.cart().items(), function (index, obj) {  // сопоставляем подукцию со списком массива chopsticks
                    $.each(chopsticks, function (i, o) {
                        if (obj.id_menu() == o.id_menu) {

                            ch = ch + (Number(o.max) * Number(obj.product_amount()));

                            if (obj.is_gift() == 0)
                            {
                                dop = dop + parseFloat(o.dop_nabor) * Number(obj.product_amount());
                            }


                        }
                    });

                    // 12345       
                    if (obj.is_gift() == 1)
                    {
                        //console.log(obj.dop_nabor()); 

                        if (obj.dop_nabor() > 0)
                        {
                            self.dop_nabor(Number(obj.dop_nabor()));
                        }
                        if(WOKs < WOKs_max && typeof(self.gift_hidden().HIDDEN_4WOKS_IS_5) !== "undefined" && typeof(obj.id_cupon)==="function" && obj.id_cupon() == self.gift_hidden().HIDDEN_4WOKS_IS_5.id_cupon && self.gift_in_cart()) {
                            gift_to_remove = obj.id_cart();
                        }                        
                        if(typeof(self.gift_hidden().PEPPER10) !== "undefined" && (Number(self.discount()) < 10
                            || Number(self.total_sum()) < Number(self.gift_hidden().PEPPER10.sum_from))
                            && typeof(obj.id_cupon)==="function" && obj.id_cupon() == self.gift_hidden().PEPPER10.id_cupon && self.gift_in_cart() ) {
                            gift_to_remove = obj.id_cart();
                        }                        
                        if(typeof(self.gift_hidden().MORNING) !== "undefined" && ( now.getTime() <= start.getTime() || now.getTime() >= end.getTime()
                            || Number(self.total_sum()) < Number(self.gift_hidden().MORNING.sum_from))
                            && typeof(obj.id_cupon)==="function" && obj.id_cupon() == self.gift_hidden().MORNING.id_cupon && self.gift_in_cart() ) {
                            gift_to_remove = obj.id_cart();
                        }
                    }


                });
                if(gift_to_remove > 0) {
                    self.cart().items.remove(function(item){
                        if(item.is_gift() == '1' && item.id_cart() == gift_to_remove) {
                            
                            var pars = {

                                task: "delete_product",
                                id_cart: item.id_cart()

                            };

                            $.ajax({

                                type: "POST",
                                url: '/save_c.php',
                                data: pars,
                                dataType: "json",
                                success: function(data, textStatus){

                                    //console.log(data);
                                    var items = (function(){

                                        var results = [];
                                        for (var key in data.items) {

                                            if (!data.items.hasOwnProperty(key)) 
                                                continue;
                                            results.push(data.items[key]);

                                        }
                                        return results;

                                    })();

                                    self.update_items(items);  
                                    self.gift_in_cart(false);
                                    var out = {};
                                    for (var key in self.gift_hidden()) {
                                       eval('out.'+key+' = false;'); 
                                    }
                                    self.gift_hidden_active(out);
                                    out = {};
                                    self.promocode('');
                                    self.promocode_input('');
                                    self.cart().wok_action(data.wok_action);   
                                    return true;  
                                }
                            });                   
                        }
                    });
                }

                self.cart().chopsticks_max(ch);

                if (ch != 0 && self.cart().chopsticks_max() < self.cart().chopsticks()) {
                    self.cart().chopsticks(self.cart().chopsticks_max());
                    if (self.chopsticks_save) {
                        self.chopsticks_save(null, null);
                    }
                }

                if (dop > 0) {

                    // Math.round(dop);
                    //if(dop==0) {dop = 1;}                

                    dop = Math.floor(dop) + 1;

                    /*if (self.dop_nabor() > 0)
                    {
                        dop = dop + 1;      // склеиваем доп наборы с доп набором подарка, затем убираем  строку доп набора подарка из корзины
                        self.dop_nabor(0);
                    }*/
                }

                self.dop(dop);

                self.is_japanese_in_the_cart_not_gift((function () {

                    for (var i = 0; i < self.cart().items().length; i++) {
                        if (['sushi', 'assorti', 'rolls', 'paki', 'lanch-sety'].indexOf(self.cart().items()[i].top_cat_alias()) != -1 && self.cart().items()[i].is_gift() != '1') {
                            return true;
                        }
                    }
                    return false;

                })());


                // Есть ли в корзине хоть 1 японская тов.позиция (подарок)
                self.is_japanese_in_the_cart_gift((function () {

                    for (var i = 0; i < self.cart().items().length; i++) {
                        if (['sushi', 'assorti', 'rolls', 'paki', 'lanch-sety'].indexOf(self.cart().items()[i].top_cat_alias()) != -1 && self.cart().items()[i].is_gift() == '1') {
                            return true;
                        }
                    }
                    return false;

                })());


                self.to_gifts_sum((function () {

                    var val = 0;

                    if (self.min_gift_sum != 65535)
                    {
                        if (self.total_sum() < self.min_gift_sum)
                        {
                            val = self.min_gift_sum - self.total_sum();
                        }
                    }

                    return val;

                })());
                
                alignGifts('.presents-slider','.present-box .text');

            });


    
self.show_modal_constructor = function(model_cart_item, data, event){

	self.hide_modal_constructor();

	var modal = document.getElementsByClassName('modal-window-constructor')[0];

	var scrollTop = window.pageYOffset 	|| document.documentElement.scrollTop || document.body.scrollTop;

	var browser_metrics = getBrowserWindowMetrics();

	var top = (function(){

		if(browser_metrics.width <= 768)
			return +scrollTop + 82;

		else {

			if(scrollTop > 100)
				return +scrollTop + 82; //getBrowserWindowMetrics().height*0.15;

			else
				return +scrollTop + 82 + (103 - scrollTop);

		}

	})();

	// 6] Позиционировать окно по Y
	$(modal).css('top', top);

	// 7] Загрузить компонент (конструктор) и данные в него
	self.load_component({
		class_target: 			'.modal-window-constructor .constructor-wrapper',
		class_inside_target: 	'.constructor',
		viewmode:             	'cartconstructor',
		params:       {
			show_controls: 1,
			model_cart_item: model_cart_item,
			id_cart: data.id_cart()
		}
	});

	setTimeout(function(){

		var model_component = kocomponents.items[model_cart_item.id_menu()];

		if(model_component.item().cat.breadcrumbs()[0].alias() == 'pizza') {
			(function(){

				var type_number = model_cart_item.product_type();

					var type = PM[model_cart_item.id_menu()].items[type_number].type;

					var type_from_variants = (function(){
						for(var i=0; i<model_component.item().dough.variants().length; i++) {
							if(model_component.item().dough.variants()[i].original_name() == type)
								return model_component.item().dough.variants()[i];
						}
					})();
					if(!type_from_variants)
						type_from_variants = model_component.item().dough.variants()[0];

					model_component.choose_dough(type_from_variants, null);

					var size = PM[model_cart_item.id_menu()].items[type_number].size;

					var size_from_variants = (function(){
						for(var i=0; i<model_component.item().sizes.variants().length; i++) {
							if(model_component.item().sizes.variants()[i].size() == size && model_component.item().sizes.variants()[i].type() == type)
								return model_component.item().sizes.variants()[i];
						}
					})();
					if(!size_from_variants)
						size_from_variants = model_component.item().sizes.variants()[0];

					model_component.choose_size(size_from_variants, null);

			})();
		}

		if(model_component.item().cat.breadcrumbs()[0].alias() == 'wok') {
			(function(){

				var sauce = data.sauce();

				var sauce_from_variants = (function(){
					for(var i=0; i<model_component.item().sauces.variants().length; i++) {
						if(model_component.item().sauces.variants()[i].id_menu() == sauce)
							return model_component.item().sauces.variants()[i];
					}
				})();
				if(!sauce_from_variants)
					sauce_from_variants = model_component.item().sauces.variants()[0];

				model_component.choose_sauce(sauce_from_variants, null);

			})();
		}

		if(model_component.item().cat.breadcrumbs()[0].alias() == 'pizza' || model_component.item().cat.breadcrumbs()[0].alias() == 'wok' || model_component.item().isAddIngrid() == '6') {
			(function(){

				if(!data.ingrids) return;

				var type_number = model_cart_item.product_type();

				for(var i=0; i<data.ingrids().length; i++) {
					for(var j=0; j<model_component.item().items()[type_number].ingrids().length; j++) {

						if(model_component.item().items()[type_number].ingrids()[j].id_menu() == data.ingrids()[i].id_menu()) {
							model_component.item().items()[type_number].ingrids()[j].amount(data.ingrids()[i].amount());
							model_component.item().items()[type_number].ingrids()[j].price(data.ingrids()[i].price());
						}

					}
				}

			})();
		}

		self.is_modal_cunstructor_visible(true);

		setTimeout(function(){
			$('select').styler();
		}, 50);

	}, 10);

};
    
self.hide_modal_constructor = function(model_component, data, event){

	(function(){

		if(!model_component) return;

		var model_cart_item = (function(){

			var id = model_component.params.viewmode_params.id_cart();

			for(var i=0; i<model_cart.cart().items().length; i++) {
				if(model_cart.cart().items()[i].id_cart() == id)
					return model_cart.cart().items()[i];
			}

		})();

		if(!model_cart_item) return;

		if(model_component.item().cat.breadcrumbs()[0].alias() == 'pizza' || model_component.item().cat.breadcrumbs()[0].alias() == 'wok' || model_component.item().isAddIngrid() == '6') {
			model_cart_item.ingrids_price((function(){

				var ingrids = model_component.item().choosen_type().type().ingrids();
				var result = 0;
				for(var j=0; j<ingrids.length; j++) {
					if(ingrids[j].amount() > 0)
						result = +result + (ingrids[j].amount()*ingrids[j].price());
				}
				return result;

			})());
		}

		if(model_component.item().cat.breadcrumbs()[0].alias() == 'pizza' || model_component.item().cat.breadcrumbs()[0].alias() == 'wok' || model_component.item().isAddIngrid() == '6') {
			model_cart_item.ingrids_amount((function(){

				var ingrids = model_component.item().choosen_type().type().ingrids();
				var result = 0;
				for(var j=0; j<ingrids.length; j++) {
					if(ingrids[j].amount() > 0)
						result = +result + ingrids[j].amount();
				}
				return result;

			})());
		}

		if(model_component.item().cat.breadcrumbs()[0].alias() == 'pizza' || model_component.item().cat.breadcrumbs()[0].alias() == 'wok' || model_component.item().isAddIngrid() == '6') {

			var type_number = model_component.item().choosen_type().num();

			for(var j=0; j<model_component.item().items()[type_number].ingrids().length; j++) {

				if(model_component.item().items()[type_number].ingrids()[j].amount() == 0) {

					model_cart_item.ingrids.remove(function(item){
						for(var i=0; i<model_cart_item.ingrids().length; i++) {
							if(model_component.item().items()[type_number].ingrids()[j].id_menu() == model_cart_item.ingrids()[i].id_menu())
								return true;
						}
					});

				}

				if(model_component.item().items()[type_number].ingrids()[j].amount() > 0) {

					var ingr = (function(){
						for(var i=0; i<model_cart_item.ingrids().length; i++) {
							if(model_component.item().items()[type_number].ingrids()[j].id_menu() == model_cart_item.ingrids()[i].id_menu())
								return model_cart_item.ingrids()[i];
						}
					})();

					if(ingr) {
						ingr.amount(model_component.item().items()[type_number].ingrids()[j].amount());
						ingr.price(model_component.item().items()[type_number].ingrids()[j].price());
					}

					else (function(){

						var ingrid_origin = model_component.item().items()[type_number].ingrids()[j];
						model_cart_item.ingrids.push(ingrid_origin);

					})();

				}

			}

		}

		if(model_component.item().cat.breadcrumbs()[0].alias() == 'wok') {
			model_cart_item.sauce(model_component.item().sauces.choosen().id_menu());
		}

		model_cart_item.product_type(model_component.item().choosen_type().num());

		model_component.item().amount(model_cart_item.product_amount());

		model_component.update_cart_item(model_cart_item.id_cart(), 'auto', null, null);

	})();

	(function(){

		self.is_modal_cunstructor_visible(false);

		self.save_and_unload_component({
			class_target: 			'.modal-window-constructor .stopbinding .constructor-wrapper',
			class_inside_target: 	'.constructor',
			viewmode:             	'cartconstructor',
			params:       {
				show_controls: 1
			}
		});

	})();

};    
self.switch_modal_constructor = function(item){

	if(!self.is_modal_cunstructor_visible())
		self.show_modal_constructor();

	else
		self.hide_modal_constructor();

};    
self.load_component = function(config){

	attach_component_item(config);

};    
self.save_and_unload_component = function(config){

	var element = $(config.class_target);
	var inner = $(config.class_target + ' ' + config.class_inside_target);

	ko.cleanNode(element[0]);

	inner.html('');

};    
self.goto_order = function(){

	if(parseInt(self.total_cart_sum()) < parseInt(server_cart.minsum) && self.smm_promocode().length===0) {
		//toastr.info('Минимальная сумма заказа должна составить '+server_cart.minsum+' руб.');
                swal({
                    title:'',
                    type:'warning',
                    text: 'Минимальная сумма заказа должна составить '+server_cart.minsum+' руб.',
                    /*confirmButtonClass: "btn-danger",*/
                    confirmButtonText: "Понятно"
                });                
		return;
	}
	else if(parseInt(self.total_cart_sum()) < parseInt(self.smm_gift().sum_from) && self.smm_promocode().length > 0) {
		//toastr.info('Минимальная сумма заказа должна составить '+self.smm_gift().sum_from+' руб.');
                swal({
                    title:'',
                    type:'warning',
                    text: 'Минимальная сумма заказа должна составить '+self.smm_gift().sum_from+' руб.',
                    /*confirmButtonClass: "btn-danger",*/
                    confirmButtonText: "Понятно"
                });
		return;
	}
	else if(self.absolute_discount() && self.cart().items().length === 1) {
		//toastr.info('Пожалуйста наберите еще товары в корзину.');
                swal({
                    title:'',
                    type:'warning',
                    text: 'Пожалуйста наберите еще товары в корзину.',
                    /*confirmButtonClass: "btn-danger",*/
                    confirmButtonText: "Понятно"
                });
		return;
	}
	else 
	{	
        /*window.location = "/order/";*/
		//console.log(model_cart.gift_in_cart()); return;
                
                var cart = self.cart().items(),
                    amount = 0;
                
                if(cart.length > 0) {
                    for(var i = 0; i < cart.length; i++) {
                        if(parseInt(cart[i].id_menu()) === 842) {
                           amount += parseInt(cart[i].product_amount());   
                        }
                    }
                }
                /*console.log('amount = '+amount);
                console.log('cart_sum = '+parseInt(model_cart.total_sum()));
                console.log('cart_sum/600 = '+Math.floor(parseInt(model_cart.total_sum())/600));
                console.log('result = '+(amount>Math.floor(parseInt(model_cart.total_sum())/600)));  */
                
                if(amount>Math.floor(parseInt(model_cart.total_sum())/600)) {
                    //toastr.info('Можно закать не более одной пиццы "Пепперони СИТИ" на каждые 600 рублей суммы заказа!');
                    swal({
                        title:'',
                        type:'warning',
                        html: '<p>Можно закать не более одной пиццы "Пепперони СИТИ" на каждые 600 рублей суммы заказа!</p>',
                        /*confirmButtonClass: "btn-danger",*/
                        confirmButtonText: "Понятно"
                    });
                
                    return ;
                }

		if(model_cart.gift_in_cart() || model_cart.is_card_3_ok())
		{
			window.location = "/order/";	
		}
		else
		{
                    //console.log({gifts:model_cart.gifts().length,m_gifts:model_cart.m_gifts().length});
                    //
                        if(model_cart.promocode().length > 0) {
                            swal({
                                          title: "",
                                          text: "Аннулировать промокод?",
                                          type: "warning",
                                          showCancelButton: true,
                                          /*confirmButtonClass: "btn-danger",*/
                                          confirmButtonText: "Да",
                                          cancelButtonText: "Нет",
                                          reverseButtons: true,
                                          /*closeOnConfirm: false,
                                          closeOnCancel: false*/
                                            confirmButtonClass: "btn-danger",
                                            confirmButtonColor: '#EB5A1E',
                                            cancelButtonColor: '#FFFFFF',
                                            showCancelButton: true,
                                            showCloseButton: true
                                        }).then(function (result) {
                                                if(typeof(result.value)!=="undefined") {
                                                    delPromocode();
                                                    window.location = "/order/";
                                                }
                                                else if(typeof(result.dismiss)!=="undefined") {
                                                    swal.close();
                                                }
                                                //console.log(result);
                                            });                            
                        }
			else if(model_cart.promocode().length === 0 && (model_cart.gifts().length > 0 || model_cart.m_gifts().length > 0))
			{
                            
                            var pars = {
                                mod_name: "cart",
                                task: "gift_reject",
                                gift_reject: 0
                            }; 
	            /*,
                                        function(isConfirm) {
                                          if (isConfirm) {
                                            pars.gift_reject = 1;
                                            $.post("/",pars,function(data,textStatus,jqXHR){
                                                //alert(data.cart.gift_reject);
                                                window.location = "/order/";
                                            },'json');                                           
                                          } else {
                                            $.post("/",pars,function(data,textStatus,jqXHR){
                                                //alert(data.cart.gift_reject);
                                                swal.close();
                                            },'json');
                                          }
                                        }*/
                
                            swal({
                                          title: "",
                                          text: "Продолжить без подарка?",
                                          type: "warning",
                                          showCancelButton: true,
                                          /*confirmButtonClass: "btn-danger",*/
                                          confirmButtonText: "Да, без подарка",
                                          cancelButtonText: "Хочу подарок",
                                          reverseButtons: true,
                                          /*closeOnConfirm: false,
                                          closeOnCancel: false*/
                                            confirmButtonClass: "btn-danger",
                                            confirmButtonColor: '#EB5A1E',
                                            cancelButtonColor: '#FFFFFF',
                                            showCancelButton: true,
                                            showCloseButton: true
                                        }).then(function (result) {
                                                if(typeof(result.value)!=="undefined") {
                                                    pars.gift_reject = 1;
                                                    $.post("/index.php",pars,function(data,textStatus,jqXHR){
                                                        //alert(data.cart.gift_reject);
                                                        window.location = "/order/";
                                                    },'json'); 
                                                }
                                                else if(typeof(result.dismiss)!=="undefined") {
                                                    $.post("/index.php",pars,function(data,textStatus,jqXHR){
                                                        //alert(data.cart.gift_reject);
                                                        swal.close();
                                                    },'json');
                                                }
                                                //console.log(result);
                                            });

                            /*
                            vex.dialog.confirm({
                                unsafeMessage: '<span style="color:red;">ВЫ НЕ ВЫБРАЛИ ПОДАРОК!!!</span><br>Продолжить без подарка?',
                                callback: function (value) {
                                    if (value) {
                                        window.location = "/order/";	
                                    } else {
                                        return;
                                    }
                                }
                            });				
                                        */
			}
			else
			{
				
				$.ajax({
					type: "POST",
					url: '/save_c.php',
					data: {
						task: 'update_chopsticks',
						chopsticks: $("#cart_chopsticks_num").val()  //model_cart.cart().chopsticks()
					},
					dataType : "json",
					success: function (data, textStatus) {

						console.log($("#cart_chopsticks_num").val());
						window.location = "/order/";  

					}
				});

				//console.log($("#cart_chopsticks_num").val());

				//window.location = "/order/";	
			}

        }

	}

};    self.add2cart_sushiset = function(){

	
	var sushiset = PM[337];

	// Попробовать найти в корзине набор для суши
	var sushiset_old = (function(){

		for(var i=0; i<model_cart.cart().items().length; i++) {
			if(model_cart.cart().items()[i].id_menu() == "337")
				return model_cart.cart().items()[i];
		}

	})();
        //console.log(typeof(sushiset_old));
	var sushiset_prepeared = {
		id_cart: 		typeof(sushiset_old)=== "undefined" ? new Date().getTime() : sushiset_old.id_cart(),
		id_menu: 		sushiset.id_menu,
		product_price: 		sushiset.items[0].price,
		product_amount: 	typeof(sushiset_old)=== "undefined" ? 1 : +sushiset_old.product_amount() + 1,
		product_weight: 	sushiset.items[0].price.weight,
		product_type: 		0,
		ingrids_price: 		0,
		ingrids_amount: 	0,
		sauce: 			'',
		top_cat_alias: 		'',
		isAddIngrid:            0,
		ingrids: 		[],
		is_gift:                "0",
                comments:               typeof(sushiset_old)!== "undefined" && typeof(sushiset_old.comments)!== "undefined" ? sushiset_old.comments : "",
	};
        //console.log(sushiset_prepeared);
	// 4] Добавить sushiset_prepeared в корзину
	// - А если sushiset_old найден, то просто обновить старую позицию
	$.ajax({
		type: "POST",
		url: '/save_c.php',
		data: {
			task: typeof(sushiset_old)=== "undefined" ? 'put_item' : 'update_item',
			item: JSON.stringify(sushiset_prepeared)
		},
		dataType : "json",
		success: function (data, textStatus) {
			var items = (function(){
				var results = [];
				for(var key in data.items) {

					if(!data.items.hasOwnProperty(key)) continue;
					results.push(data.items[key]);

				}
				return results;
			})();
			model_cart.update_items(items);
		}
	});


};    
self.chopsticks_plus = function(data, event){

	var new_chopsticks_amount = +model_cart.cart().chopsticks() + 1;
	if(new_chopsticks_amount <= model_cart.cart().chopsticks_max()) {
		model_cart.cart().chopsticks(new_chopsticks_amount);
		self.chopsticks_save();
	}
	else {
		toastr.info('Нельзя добавить больше '+model_cart.cart().chopsticks_max()+' палочек!');
	}

};    
self.chopsticks_minus = function(data, event){

	var new_chopsticks_amount = +model_cart.cart().chopsticks() - 1;
	if(new_chopsticks_amount >= 1) {
		model_cart.cart().chopsticks(new_chopsticks_amount);
		self.chopsticks_save();
	}


};
    
self.chopsticks_save = function(data, event){

	$.ajax({
		type: "POST",
		url: '/save_c.php',
		data: {
			task: 'update_chopsticks',
			chopsticks: model_cart.cart().chopsticks()
		},
		dataType : "json",
		success: function (data, textStatus) {

		}
	});

};    
self.try2apply_promocode = function(data, event){

	if(self.promocode_input().toLocaleLowerCase().trim() == '') {
		toastr.info('Пожалуйста введите промокод');
		return;
	}

	self.promocode(self.promocode_input());

	var is_promo_good = false;
	var is_promo_sum_ok = false;
	var sum_without_discount = self.total_cart_sum();
	var sum_from = 0;
	var autocode = 0;
	var is_smm_promo_ok = false;

	var gift = {

		id_menu : 0,
		type : 0,
		dop_nabor : 0,
		autocode : 0

	};
	var num_gifts = 0;
        var pars = {tasks:[]};
        
	//console.log(gifts.length);

	$.each(gifts, function(index, obj){ // проходимся по таблице gifts

		if(obj.promocode.toLocaleLowerCase().trim() == self.promocode().toLocaleLowerCase().trim()) {
			is_promo_good = true;
			sum_from = obj.sum_from;

			num_gifts = num_gifts+1;
			//console.log("количество подарков");console.log(num_gifts);

			gift.id_menu   = obj.id_menu;
			gift.type 	   = obj.type;
			gift.dop_nabor = obj.dop_nabor;
			gift.autocode  = obj.auto;

			
			/*if (obj.deactivate_sum !=0)
			{
				self.min_gift_sum = obj.deactivate_sum;
			}
			else
			{
				self.min_gift_sum = sum_from;
			//}*/
			

			self.to_gifts_sum(self.min_gift_sum-self.total_cart_sum());

			//console.log(self.min_gift_sum);
			//console.log(self.to_gifts_sum());


					// записать в корзину значение промокода
					pars.tasks.push({
						task: 'save_promocode',
						promocode: self.promocode().toLocaleLowerCase().trim(),
						id_cupon:  obj.id_cupon
					});

					/*$.ajax({
						type: "POST",
						url: '/save_c.php',
						data: pars,
						dataType : "json",
						success: function (data, textStatus) {
							

						},
						error: function(a,b){
							console.log(a);
							console.log(b);
                		} 
					});*/	

			if(self.total_cart_sum() >= obj.sum_from) is_promo_sum_ok = true;
			
		}

	});
        
        if(!is_promo_good) {
            // записать в корзину значение промокода
            pars.tasks = [{
                    task: 'smm_promocode',
                    promocode: self.promocode().toLocaleLowerCase().trim(),
            }];      
            
            var result = null;
            
            $.ajax({ 

                    type: "POST",
                    url: '/save_c.php',
                    data: pars,
                    dataType : "json",
                    async : false,
                    cache : false,
                    success: function (data, textStatus) {
                            result = data;
                            //console.log(data);

                    }
            });            
            //console.log(result);
            if(typeof (result.smm_promocode)!=="undefined" && typeof (result.smm_gift)!=="undefined" && self.smm_promocode().length == 0) {
                pars.tasks = [{
                        task: 'get_cart',
                        /*item: JSON.stringify({
                                id_cart: 		new Date().getTime(),
                                id_menu: 		result.smm_gift.id_menu,
                                product_price: 		0,
                                product_amount: 	1,
                                product_weight: 	PM[result.smm_gift.id_menu].items[result.smm_gift.type].weight,
                                product_type: 		result.smm_gift.type,
                                ingrids_price: 		0,
                                ingrids_amount: 	0,
                                sauce: 			PM[result.smm_gift.id_menu].sauce,
                                top_cat_alias: 		PM[result.smm_gift.id_menu].cat.breadcrumbs[0].alias,
                                isAddIngrid:      	0,
                                ingrids: 		[],
                                is_gift:          	"1",
                                dop_nabor: 		result.smm_gift.dop_nabor
                        })*/
                }];
			$.ajax({ 

				type: "POST",
				url: '/save_c.php',
				data: pars,
				dataType : "json",
				success: function (data, textStatus) {

					
					var items = (function(){
						var results = [];
						for(var key in data.items) {

							if(!data.items.hasOwnProperty(key)) continue;
							results.push(data.items[key]);

						}
						return results;
					})();

					model_cart.update_items(items);
					
					self.gift_in_cart(true);
					$(".presents-info").css('display','none');

				}
			});    
                    self.smm_promocode(result.smm_promocode);
                    self.smm_gift(result.smm_gift);
                    return false;
            }
            else if(typeof (result.smm_message)!=="undefined") {
                toastr.info(result.smm_message);
                return false;
            }
        }

	if(is_promo_good && is_promo_sum_ok) {

		for(var i=0; i<self.cart().items().length; i++) {
			if(self.cart().items()[i].is_gift() == '1') {
				self.remove_from_cart(self.cart().items()[i].id_cart(), self.cart().items()[i], null);
			}
		}

		toastr.info('Промокод принят');
		model_cart.is_promo_ok(true);

		


		if(num_gifts == 1) // только в случае если подарок 1 
		{
                    
                        pars.tasks.push({
					task: 'put_item',
					item: JSON.stringify({
						id_cart: 			new Date().getTime(),
						id_menu: 			gift.id_menu,
						product_price: 		0,
						product_amount: 	1,
						product_weight: 	PM[gift.id_menu].items[gift.type].weight,
						product_type: 		gift.type,
						ingrids_price: 		0,
						ingrids_amount: 	0,
						sauce: 				PM[gift.id_menu].sauce,
						top_cat_alias: 		PM[gift.id_menu].cat.breadcrumbs[0].alias,
						isAddIngrid:      	0,
						ingrids: 			[],
						is_gift:          	"1",
						dop_nabor: 			gift.dop_nabor
					})
				});    
                        
			$.ajax({ 

				type: "POST",
				url: '/save_c.php',
				data: pars,
				dataType : "json",
				success: function (data, textStatus) {

					
					var items = (function(){
						var results = [];
						for(var key in data.items) {

							if(!data.items.hasOwnProperty(key)) continue;
							results.push(data.items[key]);

						}
						return results;
					})();

					model_cart.update_items(items);
					
					self.gift_in_cart(true);
					$(".presents-info").css('display','none');

				}
			});			
		}






	}
	else if(is_promo_good && !is_promo_sum_ok) {

		if((sum_from - self.total_cart_sum()) > 0) toastr.info('Промокод действует от суммы заказа '+sum_from+' руб.');

		self.promocode('');
		self.promocode_input('');
		model_cart.is_promo_ok(false);
		//toastr.info('Промокод отменён');

	    self.cart().items.remove(function(item){
	        if(item.is_gift() == '1') {
	            self.remove_from_cart(item.id_cart(), item, null);
	        }
	    });


		/*var pars = {
			task: 'del_promocode'
		};
		
		$.ajax({

			type: "POST",
			url: '/save_c.php',
			data: pars,
			dataType : "json",
			success: function (data, textStatus) {

				//

			}
		});*/


	}
	else {
		toastr.info('Промокод не найден');
		model_cart.is_promo_ok(false);
	}

};    
self.try2cancel_promocode = function(data, event){

	self.promocode('');
	self.promocode_input('');
	model_cart.is_promo_ok(false);
	toastr.info('Промокод отменён');

    self.cart().items.remove(function(item){
        if(item.is_gift() == '1') {
            self.remove_from_cart(item.id_cart(), item, null);
        }
    });


		var pars = {
			task: 'del_promocode'
		};
		
		$.ajax({

			type: "POST",
			url: '/save_c.php',
			data: pars,
			dataType : "json",
			success: function (data, textStatus) {

                            var items = (function(){

                                var results = [];
                                for (var key in data.items) {

                                    if (!data.items.hasOwnProperty(key)) 
                                        continue;
                                    results.push(data.items[key]);

                                }
                                return results;

                            })();

                            model_cart.update_items(items);

			}
		});


};    
self.try2apply_card_3 = function(data, event){

	if(self.card_3_pan_input().toLocaleLowerCase().trim() == '') {
                    swal({
                        title: "",
                        html: 'Пожалуйста введите номер карты Тройка',
                        type: "warning",
                        timer: 5000,
                    });                   
		return;
	}

	self.card_3_pan(self.card_3_pan_input());

        var pars = {tasks:[]};
        
	//console.log(gifts.length);
        
            pars.tasks.push({
                task: 'add_card_3',
                pan: self.card_3_pan_input().toLocaleLowerCase().trim().replace(/ /g,'')
            });    
            
            $overlay = $('<div></div>').attr('id','block-overlay').css({position:'fixed',
                                                                        width:'100%',
                                                                        height:'100%',
                                                                        top:'0',
                                                                        bottom:'0',
                                                                        left:'0',
                                                                        right:'0',
                                                                        zIndex:'1010',
                                                                        backgroundColor:'rgba(0,0,0,0.5)'});
            $( "body" ).prepend( $overlay );                 
            
            $.ajax({ 

                    type: "POST",
                    url: '/save_c.php',
                    data: pars,
                    dataType : "json",
                    success: function (data, textStatus) {
                        //console.log(data);
                        $('#block-overlay').remove();
                        
                        var items = (function(){
                            var results = [];
                            for(var key in data.items) {

                                if(!data.items.hasOwnProperty(key)) continue;
                                results.push(data.items[key]);

                            }
                            return results;
                        })();
                    
                        if(data.card_3_result) {
                            swal({
                                title: "",
                                html: data.card_3_message,
                                type: "success",
                                timer: 5000,
                            });      
                            model_cart.is_card_3_ok(true); 
                            
                            var pars = {
                                mod_name: "promocode"
                            };  

                            $.post("/",pars,function(data1,textStatus,jqXHR){
                                //console.log(data);
                                $('.promocode_wrap').replaceWith(data1);

                                var pars2 = {
                                    mod_name: "promocode",
                                    action: "active"
                                };

                                $.post("/",pars2,function(data2,textStatus,jqXHR){
                                    //console.log(data2);
                                    $('.promocode_wrap_fix').replaceWith(data2);                                                                                      
                                },'html');
                            },'html'); 
                            
                            if(typeof(data.gifts) !== "undefined" && data.gifts.length > 0) { 
                                model_cart.gifts.removeAll();	// очищаем подарки
                                var g = []; 
                                $.each(data.gifts, function(index, obj){
                                    g.push(obj); //console.log(obj);
                                }); //console.log(g);
                                if(g.length>0) {
                                    gifts = data.gifts;
                                    model_cart.gifts(g);
                                    if($(".presents-slider").length > 0 && $(".present-box .text").length > 0) {
                                        alignGifts('.presents-slider','.present-box .text');
                                    }
                                }
                            }                            
                                          
                        }
                        else {
                            swal({
                                title: "",
                                html: data.card_3_message,
                                type: "error",
                                timer: 5000,
                            });                             
                        }

                            model_cart.update_items(items);  
                    }
            });            

};    
self.try2cancel_card_3 = function(data, event){

        var pars = {tasks:[]};

        
            pars.tasks.push({
                task: 'del_card_3'
            });
            
            $overlay = $('<div></div>').attr('id','block-overlay').css({position:'fixed',width:'100%',height:'100%',top:'0',bottom:'0',left:'0',right:'0',zIndex:'1010',backgroundColor:'rgba(0,0,0,0.5)'});
            $( "body" ).prepend( $overlay );               
		
		$.ajax({

			type: "POST",
			url: '/save_c.php',
			data: pars,
			dataType : "json",
			success: function (data, textStatus) {
                            
                            $('#block-overlay').remove();

                            var items = (function(){
                                var results = [];
                                for(var key in data.items) {

                                    if(!data.items.hasOwnProperty(key)) continue;
                                    results.push(data.items[key]);

                                }
                                return results;
                            })();

                            self.card_3_pan('');
                            self.card_3_pan_input('');
                            model_cart.is_card_3_ok(false);                            
                            model_cart.update_items(items);    
                            
                            if($(".presents-slider").length > 0 && $(".present-box .text").length > 0) {
                                alignGifts('.presents-slider','.present-box .text');
                            }
                            swal({
                                title: "",
                                html: 'Карта &laquo;Город Тройка&raquo; успешно отменена',
                                type: "success",
                                timer: 5000,
                            }); 
			}
		});


};    

            ko.computed(function () {
                if (!ko.computedContext.isInitial())
                    return;

                //self.promocode(""); //устанавлиавем пустой промокод
            });

            return self;
        }


    };



    var model_cart = Object.create(CartModel).constructor();



    $(document).ready(function () {

        if ($('.cart-row.title-row')[0])
            ko.applyBindings(model_cart, $('.cart-row.title-row')[0]);

        if (document.getElementsByClassName('cart-body').length != 0)
            ko.applyBindings(model_cart, document.getElementsByClassName('cart-body')[0]);

        if (document.getElementsByClassName('modal-window-constructor').length != 0)
            ko.applyBindings(model_cart, document.getElementsByClassName('modal-window-constructor')[0].parentNode);

        $('.promo').each(function () {
            ko.applyBindings(model_cart, $(this)[0]);
        });
        $('.total_cart_sum').each(function () {
            ko.applyBindings(model_cart, $(this)[0]);
        });
        $('.total_cart_amount').each(function () {
            ko.applyBindings(model_cart, $(this)[0]);
        });

        $('.to_gift').each(function () {
            ko.applyBindings(model_cart, $(this)[0]);
        });

        if ($('.total-row.holder.no-empty  .r-side')[0])
            ko.applyBindings(model_cart, $('.total-row.holder.no-empty .r-side')[0]);

    });


    
var focusTimerId = 0;
var focusTimerOut = 500;

/*addEvent(window, 'focus', function(){
    
    if(focusTimerId > 0) {
        return true;
    }    
    focusTimerId = setTimeout( function () {
        if(fancybox_open == false)
        {

            var pars = {
                task: "get_cart"
            };

            $.ajax({

                type: "POST",
                url: '/save_c.php',
                data: pars,
                dataType: "json",
                success: function(data, textStatus){

                //console.log(data);
                    // преобразование к массиву
                    var items = (function(){

                        var results = [];
                        for (var key in data.items) {

                            if (!data.items.hasOwnProperty(key)) 
                                continue;
                            results.push(data.items[key]);

                        }
                        return results;

                    })();

                    model_cart.update_items(items);
                    alignGifts('.presents-slider','.present-box .text');
                }
            });
        }
        focusTimerId = 0;
    },
    focusTimerOut
    );


});*/


addEvent(window, 'blur', function(){
    
        focusTimerId = 0;

});
/**/

    /*
     addEvent(window, ['resize'], function(){
     
     var modal = document.getElementsByClassName('modal-window-constructor')[0];
     model_cart.hide_modal_constructor();
     
     });
     */

</script><script src="/js/model_ingr.js?1630074530"></script>
<script>

(function(){

var component_name = "item";

window.model_item_prototype = { constructor: function(params, componentInfo) {

	var self = this;
	self.params = ko.mapping.fromJS(params);

	self.component_name = component_name;
	self.component_uid = self.this_component_id;
	self.item = ko.observable('');
	self.is_ingr_panel_expanded = ko.observable(false);
	self.viewmode = ko.observable(self.params.viewmode());
	self.choosen_toppings = ko.observableArray([]);
	self.profit_daily_event = ko.observable(false);




	ko.computed(function(){

		if(!ko.computedContext.isInitial()) return;
		if(typeof window[component_name+'_data'] == 'undefined') { window[component_name+'_data'] = {}; }

		if(typeof window[component_name+'_data'].counter == 'undefined')
			window[component_name+'_data'].counter = 1;
		else
			window[component_name+'_data'].counter = +window[component_name+'_data'].counter + 1;

		self.this_component_id = window[component_name+'_data'].counter;

		if(!window.kocomponents) window.kocomponents = {};
		if(!window.kocomponents.items) window.kocomponents.items = {};
		window.kocomponents.items[params.id_menu] = self;

	});

	
self.choose_dough = function(data, event) {

	self.item().dough.choosen(data);
        if(event !== null && $(event.target).parents('.profit_daily').length>0) {
            self.profit_daily_event(true);
        }
        else {
            self.profit_daily_event(false);
        }
	var new_size = (function(){

		for(var i=0; i<self.item().sizes.variants().length; i++) {
			if(self.item().sizes.variants()[i].type() == data.original_name() && self.item().sizes.variants()[i].size() == self.item().sizes.choosen().size())
				return self.item().sizes.variants()[i];
		}

		for(var i=0; i<self.item().sizes.variants().length; i++) {
			if(self.item().sizes.variants()[i].type() == data.original_name())
				return self.item().sizes.variants()[i];
		}

	})();

	self.item().sizes.choosen(new_size);

	// 3] Обновить картинку (для viewmode == 'main')

	
	(function(){
            if(self.viewmode() == 'main')
                if(event !== null && $(event.target).parents('.profit_daily').length>0) {
                    $('.profit_daily .item[id_menu='+self.item().id_menu()+'] #img-'+self.item().id_menu()).attr('src', '/images/menu_new/'+self.item().id_menu()+(self.item().dough.choosen().original_name() == 'thin' ? 't' : '')+'-300.jpg');
                }
                else if(event !== null) {
                    $(event.target).parents('.item[id_menu='+self.item().id_menu()+']').children('.image').children().first().children().first().attr('src', '/images/menu_new/'+self.item().id_menu()+(self.item().dough.choosen().original_name() == 'thin' ? 't' : '')+'-300.jpg');
                }                                
	})();
	

	// 4] Обновить картинку (для viewmode == 'item')
	(function(){
		if(self.viewmode() == 'item') {

			if(self.item().dough.choosen().original_name() == 'standart') {
				$('.photo-'+self.item().id_menu()+'-t').removeClass('active');
				$('.photo-'+self.item().id_menu()).addClass('active');
			}

			if(self.item().dough.choosen().original_name() == 'thin') {
				$('.photo-'+self.item().id_menu()).removeClass('active');
				$('.photo-'+self.item().id_menu()+'-t').addClass('active');
			}

		}
	})();

	self.sync_type();
};	
self.plus = function(data, event){
	self.item().amount(self.item().amount() + 1);
};	
self.minus = function(data, event){
	if(self.item().amount() == 1) return;
	self.item().amount(self.item().amount() - 1);
};	
self.sync_type = function() {

	for(var i=0; i<self.item().items().length; i++) {
		if(self.item().items()[i].size() == self.item().sizes.choosen().size() && self.item().items()[i].type() == self.item().dough.choosen().original_name()) {
			self.item().choosen_type().type(self.item().items()[i]);
			self.item().choosen_type().num(i);
			break;
		}
	}

};	
self.choose_size = function(data, event) {
        if(event !== null && $(event.target).parents('.profit_daily').length>0) {
            self.profit_daily_event(true);
        }
        else {
            self.profit_daily_event(false);
        }
	self.item().sizes.choosen(data);
        //console.log(self.item().sizes.choosen());
        //console.log(self.item().choosen_type());
        //console.log(self.item());
	(function(){
            if(self.item().id_menu() == 936) {
                $('#img-'+self.item().id_menu()).attr('src', '/images/menu_new/'+self.item().id_menu()+(typeof(self.item().sizes.choosen().img_suffix())!=="undefined" ? self.item().sizes.choosen().img_suffix() : '')+'-300.jpg');
            }                               
	})();   
	// 4] Обновить картинку (для viewmode == 'item')
	(function(){
		if(self.viewmode() == 'item' && self.item().id_menu() == 936) {
                        
                        /*$('.photo-'+self.item().id_menu()+' a img').attr('src', '/images/menu_new/'+self.item().id_menu()+(typeof(self.item().sizes.choosen().img_suffix())!=="undefined" ? self.item().sizes.choosen().img_suffix() : '')+'-1300.jpg');*/
                        $('.photo').each(function () {
                            if($(this).hasClass('photo-'+self.item().id_menu()+self.item().sizes.choosen().img_suffix())) {
                                $(this).addClass('active');
                            }
                            else {
                                $(this).removeClass('active');
                            }
                        });

		}
	})();        
	self.sync_type();
};		
self.switch_ingr_choose_panel = function(data, event) {
	self.is_ingr_panel_expanded(!self.is_ingr_panel_expanded());
        if($(event.target).parents('.profit_daily').length>0) {
            if(self.is_ingr_panel_expanded()) {
                $('.profit_daily .item-popup').css({'top':'auto','bottom':'0px'});
            }
            else {
                $('.profit_daily .item-popup').css({'top':'25px','bottom':'auto'});
            }
        }
};	
self.ingr_plus = function(data, event) {
	var amount = data.amount();
	if(self.item().cat.breadcrumbs()[0].alias() == "pizza") {
		if(amount >= 3) {
			toastr.info('Нельзя выбрать для пиццы более 3 доп.ингредиентов 1-го вида');
			return;
		}
		if(self.numof_choosen_ingrids() >= 6) {
			toastr.info('Нельзя выбрать для пиццы более 6 доп.ингредиентов');
			return;
		}
	}
	if(self.item().cat.breadcrumbs()[0].alias() == "wok") {
		if(amount >= 3) {
			toastr.info('Нельзя выбрать для WOK более 3 доп.ингредиентов 1-го вида');
			return;
		}
		if(self.numof_choosen_ingrids() >= 3) {
			toastr.info('Нельзя выбрать для WOK более 3 доп.ингредиентов');
			return;
		}            
	}
	if(self.item().isAddIngrid() == '6') {
		/*if(amount >= 1) {
			toastr.info('Нельзя выбрать более 1 доп.ингредиентов каждого вида');
			return;
		}*/
		if(self.numof_choosen_ingrids() >= 1) {
			toastr.info('Нельзя выбрать более 1 доп.ингредиента');
			return;
		}            
	}
	data.amount(+amount + 1);
};	
self.ingr_minus = function(data, event) {
	var amount = data.amount();
	if(amount == 0) return;
	data.amount(+amount - 1);
};	
self.numof_choosen_ingrids = function() {
	return (function(){
		var count = 0;
		if(!self.item().choosen_type().type().ingrids || !self.item().choosen_type().type().ingrids()) return count;
		for(var i=0; i<self.item().choosen_type().type().ingrids().length; i++) {
			if(self.item().choosen_type().type().ingrids()[i].amount() > 0)
				count = count + self.item().choosen_type().type().ingrids()[i].amount();
		}
		return count;
	})();
};	
self.clear_toppings = function(data, event) {
	for(var i=0; i<self.item().choosen_type().type().ingrids().length; i++) {
		self.item().choosen_type().type().ingrids()[i].amount(0);
	}
};	
self.clear_clicked_toppings = function(data, event) {

	// 1] Убрать
	data.amount(0);

};	
self.choose_sauce = function(data, event) {	// s1.3. Выбрать соус

	// 1] Сделать кликнутое тесто выбранным
	self.item().sauces.choosen(data);

	// 2] ...

};	
self.buy1click = function(link, data, event) {

	var block = $('#callback');
	var link = $(link);

	block.hide();

	$('#product_message').html('');
	if(link.hasClass('one-click')) {

		var div 				= document.createElement('div');
		//div.className 		= "order-row";
		div.id 					= "product_message";
		div.style.textAlign 	= "center";

		var img = document.createElement('img');
		img.src 				= '/images/menu_new/'+self.item().id_menu()+(self.item().dough ? (self.item().dough.choosen().original_name() == 'thin' ? 't' : '') : '')+'-300.jpg';
		img.width 				= 150;
		img.style.margin 		= '0px auto 10px';
		div.appendChild(img);

		var name = document.createElement('div');
		name.style.fontWeight 	= 700;
		name.style.color 		= 'black';
		name.innerHTML 			= self.item().name_menu();
		div.appendChild(name);

		var line = document.createElement('div');
		line.innerHTML = '<hr><br>';
		div.appendChild(line);

		document.getElementById('product_message').appendChild(div);

		$('#product_id_menu').val(self.item().id_menu());
	}

	$("#callback_email").css("display","none");

	var startTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
	startTop = startTop + 80;

	if(!block.is(':visible')) {
			block.css('top',startTop);
			block.show();
	}

};	
self.add2cart = function(btn, data, event) {
    
                var cart = model_cart.cart().items(),
                    amount = 0;
                
                if(cart.length > 0) {
                    for(var i = 0; i < cart.length; i++) {
                        if(parseInt(cart[i].id_menu()) === 842) {
                           amount += parseInt(cart[i].product_amount());   
                        }
                    }
                }
                amount += 1; 
                /*console.log('amount = '+amount);
                console.log('cart_sum = '+parseInt(model_cart.total_sum()));
                console.log('cart_sum/600 = '+Math.floor(parseInt(model_cart.total_sum())/600));
                console.log('result = '+(amount>Math.floor(parseInt(model_cart.total_sum())/600))); */ 
                
                if(self.item().id_menu() == "842" && amount>Math.floor(parseInt(model_cart.total_sum())/600)) {
                    //toastr.info('Можно закать не более одной пиццы "Пепперони СИТИ" на каждые 600 рублей суммы заказа!');
                    swal({
                        title:'',
                        type:'warning',
                        html: '<p>Можно закать не более одной пиццы "Пепперони СИТИ" на каждые 600 рублей суммы заказа!</p>',
                        confirmButtonClass: "btn-danger",
                        confirmButtonColor: '#8fc322',
                        confirmButtonText: "Понятно"
                    });
                
                return ;
                }    

	var item = (function(){
		for(var i=0; i<model_cart.cart().items().length; i++) {

			// 1] Если точно такой же элемент найден, вернуть его
			if(
				model_cart.cart().items()[i].id_menu() 				== self.item().id_menu() &&
				model_cart.cart().items()[i].is_gift() 				!= "1" &&
				model_cart.cart().items()[i].product_type() 	== self.item().choosen_type().num() &&
				model_cart.cart().items()[i].sauce() 					== (self.item().sauces ? self.item().sauces.choosen().id_menu() : '') &&
				model_cart.cart().items()[i].top_cat_alias() 	== self.item().cat.breadcrumbs()[0].alias() &&
				model_cart.cart().items()[i].isAddIngrid() 		== self.item().isAddIngrid()
			) {

				var ingrids_cart = (function(){

					var result = [];
					if(model_cart.cart().items()[i].ingrids) {
						for(var j=0; j<model_cart.cart().items()[i].ingrids().length; j++) {
							if(model_cart.cart().items()[i].ingrids()[j].amount() > 0)
								result.push(ko.mapping.toJS(model_cart.cart().items()[i].ingrids()[j]));
						}
					}
					return result;

				})();

				var ingrids_item = (function(){

					var result = [];
					if(self.item().items()[self.item().choosen_type().num()].ingrids) {
						$.each(self.item().items()[self.item().choosen_type().num()].ingrids(), function(index, obj){
						if (obj.amount() > 0) {
							result.push(ko.mapping.toJS(obj));
						}
						});
					}
					return result;

				})();

				// 1.3] Если ingrids_cart и ingrids_item равны, вернуть i-й эл-т корзины
				if(JSON.stringify(ingrids_cart) == JSON.stringify(ingrids_item))
					return model_cart.cart().items()[i];

			}

		}
	})();

	if(window.red_balls_queue && window.red_balls_queue.length > 0 && !item) {
		return;
	}         
        
        /*console.log({
            timestamp_now:new Date(timestamp_now),
            timestamp_start:new Date(self.item().menu_time.timestamp_start()),
            timestamp_end:new Date(self.item().menu_time.timestamp_end())
        });*/  
        
        if((timestamp_now < self.item().menu_time.timestamp_start() || timestamp_now > self.item().menu_time.timestamp_end()) && 
            self.item().menu_time.timestamp_start() !== self.item().menu_time.timestamp_end()) {

                swal(
                    {
                        title:'Внимание',
                        html: '<strong>'+self.item().name_menu() + '</strong><br />доступен с <strong>'+self.item().menu_time.start()+'</strong> до <strong>'+self.item().menu_time.end()+'</strong> часов,<br />кроме выходных и праздников',
                        type: 'warning',
                        timer: 5000,
                        showCloseButton: true
                    }
                );                    
        }


	var add2cart = function(){

		var ingrids = [];

		if(self.item().items()[self.item().choosen_type().num()].ingrids)
        $.each(self.item().items()[self.item().choosen_type().num()].ingrids(), function(index, obj){
            if (obj.amount() > 0) {

            	//delete obj.name_menu;
				ingrids.push(obj);
            }
        });
        var id_cat = self.item().cat.id_cat();
        var eventParams = {"products" : [{"id":""+self.item().id_menu()}],
            "category_ids":id_cat,
            //"total_price" : self.item().items()[self.item().choosen_type().num()].price_new()>0 ? self.item().items()[self.item().choosen_type().num()].price_new() : self.item().items()[self.item().choosen_type().num()].price(),
            "business_value" : 100
        };

		var pars = {
			task: 'put_item',
			item: JSON.stringify({
				id_cart: 			new Date().getTime(),
				id_menu: 			self.item().id_menu(),
				product_price: 		self.item().items()[self.item().choosen_type().num()].price_new()>0 ? self.item().items()[self.item().choosen_type().num()].price_new() : self.item().items()[self.item().choosen_type().num()].price(),
				product_amount: 	self.item().amount(),
				product_weight: 	self.item().total_weight(),
				product_type: 		self.item().choosen_type().num(), // кулебяка с капустой
				ingrids_price: 		self.item().cost_ingr(),
				ingrids_amount: 	self.numof_choosen_ingrids(),
				sauce: 				self.item().sauces ? self.item().sauces.choosen().id_menu() : '',
				top_cat_alias: 		self.item().cat.breadcrumbs()[0].alias(),
				isAddIngrid:      	self.item().isAddIngrid(),
				ingrids: 			ko.mapping.toJS(ingrids),
				is_gift:          	0,
				dop_nabor: 			0
			})
		};
		
		$.ajax({
			type: "POST",
			url: '/save_c.php',
			data: pars,
			dataType : "json",
			success: function (data, textStatus) {
				var items = (function(){
					var results = [];
					for(var key in data.items) {

						if(!data.items.hasOwnProperty(key)) continue;
						results.push(data.items[key]);

						if(window.red_balls_queue) {
						$(window.red_balls_queue[0]).remove();
						window.red_balls_queue.shift();
						}

					}
					return results;
				})();
				if (typeof vkEvent !== 'undefined')
                	vkEvent(eventParams,"add_to_cart", 3613);
                                    var pars = {
                                        mod_name: "promocode"
                                    };
//                if (typeof fbq !== 'undefined')
//                    fbq('track', 'AddToCart',{content_type: 'product',content_ids: [self.item().id_menu()]});

                                    $.post("/",pars,function(data1,textStatus,jqXHR){
                                    //console.log(data);
                                    $('.promocode_wrap').replaceWith(data1);

                                    var pars2 = {
                                        mod_name: "promocode",
                                        action: "active"
                                    };

                                    $.post("/",pars2,function(data2,textStatus,jqXHR){
                                        //console.log(data2);
                                        $('.promocode_wrap_fix').replaceWith(data2);                                                                                     
                                    },'html');
                                },'html');
				model_cart.update_items(items);
			},
			error: function(){

				if(window.red_balls_queue) {
				$(window.red_balls_queue[0]).remove();
				window.red_balls_queue.shift();
				}

			}
		});

	};

/*
$( ".user-menu-wrap ul" ).effect( 
 "bounce",
   { times: 6,
     distance: 10,
    },
     "slow" );

	var id_menu = self.item().id_menu();
	var id_cat = self.item().cat.id_cat();
	var amount = self.item().amount();

				// Если item == undefined, применить add2cart
				if(!item) add2cart();

				// Если же нет, применить update_cart_item
				else {

					// Увеличить amount позиции item на amount
					var newamount = +item.product_amount() + amount;

					// Применить update_cart_item
					self.update_cart_item(item.id_cart(), newamount, null, null);

				}
			toastr.info('Товар добавлен в корзину');
*/



	// 3. Организовать анимацию заклания в корзину
	var id_menu = self.item().id_menu();
	var id_cat = self.item().cat.id_cat();
	var amount = self.item().amount();

	var flyCart = $('<span class="flycart">+'+amount+'</span>');

	var flyCoordinatesX = event.pageX,
		flyCoordinatesY = event.pageY,
		cartCoordinatesX = $('.to_cart').offset().left,
		cartCoordinatesy = $('.to_cart').offset().top;

	if (cartCoordinatesX == 0) {
		cartCoordinatesX = $(window).width() - 40;
	}

	flyCart.css({
		'left': flyCoordinatesX - 12,
		'top': flyCoordinatesY - 12,
		'z-index': 1000
	});

	$('body').append(flyCart);

	if(!window.red_balls_queue) window.red_balls_queue = [];
	window.red_balls_queue.push(flyCart);

	flyCart.animate({
		'left': cartCoordinatesX,
		'top': cartCoordinatesy
			},
			1000,
			function () {

//				setTimeout(function () {
//					$(window.red_balls_queue[0]).remove();
//					window.red_balls_queue.shift();
//				}, 100);

				// Если item == undefined, применить add2cart
				if(!item) add2cart();

				// Если же нет, применить update_cart_item
				else {

					// Увеличить amount позиции item на amount
					var newamount = +item.product_amount() + amount;

					// Применить update_cart_item
					self.update_cart_item(item.id_cart(), newamount, null, null);

				}

			},
			null
	);




};
	
self.update_cart_item = function(id_cart, newamount, data, event) {

	var update_cart_item = function(){

		var ingrids = [];

				if(self.item().items()[self.item().choosen_type().num()].ingrids)
					$.each(self.item().items()[self.item().choosen_type().num()].ingrids(), function(index, obj){
							if (obj.amount() > 0) {

								//delete obj.name_menu;
					ingrids.push(obj);
							}
					});
        var id_cat = self.item().cat.id_cat();
        var eventParams = {"products" : [{"id":""+self.item().id_menu()}],
            "category_ids":id_cat,
            //"total_price" : self.item().items()[self.item().choosen_type().num()].price_new()>0 ? self.item().items()[self.item().choosen_type().num()].price_new() : self.item().items()[self.item().choosen_type().num()].price(),
            "business_value" : 100
        };
		var pars = {
			task: 'update_item',
			item: JSON.stringify({
				id_cart: 					id_cart,
				id_menu: 					self.item().id_menu(),
				product_price: 		self.item().items()[self.item().choosen_type().num()].price_new()>0 ? self.item().items()[self.item().choosen_type().num()].price_new() : self.item().items()[self.item().choosen_type().num()].price(),
				product_amount: 	newamount == 'auto' ? self.item().amount() : newamount,
				product_weight: 	self.item().total_weight(),
				product_type: 		self.item().choosen_type().num(), 
				ingrids_price: 		self.item().cost_ingr(),
				ingrids_amount: 	self.numof_choosen_ingrids(),
				sauce: 						self.item().sauces ? self.item().sauces.choosen().id_menu() : '',
				top_cat_alias: 		self.item().cat.breadcrumbs()[0].alias(),
				isAddIngrid:      self.item().isAddIngrid(),
				ingrids: 					ko.mapping.toJS(ingrids),
				is_gift:          "0",
                                comments:               "",
			})
		};
		$.ajax({
			type: "POST",
			url: '/save_c.php',
			data: pars,
			dataType : "json",
			success: function (data, textStatus) {
				var items = (function(){
					var results = [];
					for(var key in data.items) {

						if(!data.items.hasOwnProperty(key)) continue;
						results.push(data.items[key]);

						if(window.red_balls_queue) {
						$(window.red_balls_queue[0]).remove();
						window.red_balls_queue.shift();
						}

					}
					return results;
				})();
                if (typeof vkEvent !== 'undefined')
                    vkEvent(eventParams,"add_to_cart", 3613);
//                if (typeof fbq !== 'undefined')
//                    fbq('track', 'AddToCart',{content_type: 'product',content_ids: [self.item().id_menu()]});
                                    var pars = {
                                        mod_name: "promocode"
                                    };
                                    $.post("/",pars,function(data1,textStatus,jqXHR){
                                    //console.log(data);
                                    $('.promocode_wrap').replaceWith(data1);

                                    var pars2 = {
                                        mod_name: "promocode",
                                        action: "active"
                                    };

                                    $.post("/",pars2,function(data2,textStatus,jqXHR){
                                        //console.log(data2);
                                        $('.promocode_wrap_fix').replaceWith(data2);                                                                                     
                                    },'html');
                                },'html');                                
				model_cart.update_items(items);
			},
			error: function(){

				if(window.red_balls_queue) {
				$(window.red_balls_queue[0]).remove();
				window.red_balls_queue.shift();
				}

			}
		});

	};
	update_cart_item();

};



	ko.computed(function(){

		if(!ko.computedContext.isInitial()) return;
		self.item(ko.mapping.fromJS(PM[self.params.id_menu()]));

		if(self.item().cat.breadcrumbs()[0].alias() == 'pizza' || self.item().cat.breadcrumbs()[0].alias() == 'ekonom' || self.item().id_menu() == 936) {

			var dough_variants = (function(){

				var results = [];
				for(var j=0; j<self.item().items().length; j++) {
					if(results.indexOf(self.item().items()[j].type()) == -1)
						results.push(self.item().items()[j].type());
				}
				return results;

			})();

			(function(){

				self.item().dough = ko.mapping.fromJS({
					variants_list: dough_variants,
					variants: []
				});

				(function(){

					for(var j=0; j<dough_variants.length; j++) {
						self.item().dough.variants.push(ko.mapping.fromJS({
							original_name: 	dough_variants[j],
							name: 			(dough_variants[j] == 'standart') ? 'Стандартное' : 'Тонкое'
						}));
					}

				})();

				(function(){

					var type = (function(){

						var result = "";
						for(var i=0; i<self.item().dough.variants().length; i++) {
							if(self.item().dough.variants()[i].original_name() == self.item().type())  return self.item().dough.variants()[i];
						}
						return result;

					})();

					if(type)
					{
						self.item().dough.choosen = ko.observable(type);
					}
					else
					{
						self.item().dough.choosen = ko.observable(self.item().dough.variants()[0]);
					}
						

				})();

				/*
				(function(){
					$('#img-'+self.item().id_menu()).attr('src', '/images/menu_new/'+self.item().id_menu()+(self.item().dough.choosen().original_name() == 'thin' ? 't' : '')+'-300.jpg');
				})();
				*/

			})();

		}


		(function(){

			self.item().choosen_type = ko.observable({
				type: ko.observable(self.item().items()[0]),
				num: ko.observable(0)
			});

		})();


		if(self.item().cat.breadcrumbs()[0].alias() == 'pizza' || self.item().cat.breadcrumbs()[0].alias() == 'ekonom' || self.item().id_menu() == 936) {

			(function(){

				self.item().sizes = ko.mapping.fromJS({
					variants: [],
					choosen: ""
				});

				(function(){

					for(var i=0; i<self.item().items().length; i++) {

						self.item().sizes.variants.push(ko.mapping.fromJS({
							size:     	self.item().id_menu() == 936 ?  self.item().items()[i].size() : Number(self.item().items()[i].size()),
							weight:         self.item().items()[i].weight ? self.item().items()[i].weight() : 100,
							price:     	Number(self.item().items()[i].price()),
							price_new:     	Number(self.item().items()[i].price_new()),
							type:      	self.item().items()[i].type(),
							visible:      	Number(self.item().items()[i].price()) !== 0,
                                                        img_suffix:     self.item().items()[i].img_suffix()
						}));

					}

				})();

				(function(){

					/*var size = (function(){

						var result = "";
						for(var i=0; i<self.item().sizes.variants().length; i++) {
							if(self.item().sizes.variants()[i].size() == self.item().size() && self.item().sizes.variants()[i].type() == self.item().type())
								return self.item().sizes.variants()[i];
						}
						return result;

					})();

					if(size)
						self.item().sizes.choosen = ko.observable(size);
					else*/



						//console.log({'sizes.variants()':self.item().sizes.variants()}); 

						//console.log(""); 

					
						if(self.item().sizes.variants().length <= 3) 
						{
                                                    /*ko.observable(self.item().sizes.variants()[self.item().sizes.variants().length - 1])*/
							self.item().sizes.choosen = ko.observable(self.item().sizes.variants()[0]);
						}
						else
						{
                                                    // Размер пиццы по умолчанию для Категории Пиццы
							self.item().sizes.choosen = ko.observable(self.item().sizes.variants()[0]);
						}

					
					//console.log({'sizes.choosen()':self.item().sizes.choosen()}); 
						for(var i=0; i<self.item().items().length; i++) {//console.log({'items()[i]':self.item().items()[i]});
							if(self.item().items()[i].size() == self.item().sizes.choosen().size() && self.item().items()[i].type() == self.item().dough.choosen().original_name()) {
								self.item().choosen_type().type(self.item().items()[i]);
								self.item().choosen_type().num(i);
                                                                if(self.item().id_menu() == 936) {
                                                                    $('#img-'+self.item().id_menu()).attr('src', '/images/menu_new/'+self.item().id_menu()+(typeof(self.item().items()[i].img_suffix())!=="undefined" ? self.item().items()[i].img_suffix() : '')+'-300.jpg');
                                                                }
								break;
							}
						}
					/**/
                                        //console.log({'sizes.choosen_type()':self.item().choosen_type()}); 

				})();

			})();

		}

		if(self.item().cat.breadcrumbs()[0].alias() == 'wok' 
                   || self.item().cat.breadcrumbs()[0].alias() == 'paki' 
                   || self.item().cat.breadcrumbs()[0].alias() == 'snakes' 
                   || self.item().cat.breadcrumbs()[0].alias() == 'lanch-sety' 
                   || parseInt(self.item().isSouseType()) > 0) {
                   
                        if(parseInt(self.item().isSouseType()) === 5) {
                            var sauces_list = sauces5;
                        }
                        else {
                            var sauces_list = sauces;
                        }

			(function(){

				self.item().sauces = ko.mapping.fromJS({
					variants: [],
					choosen: ""
				});

				(function(){

					for(var key in sauces_list) {
						if(!sauces_list.hasOwnProperty(key)) continue;
						self.item().sauces.variants.push(ko.mapping.fromJS(sauces_list[key]));
					}

				})();

				(function(){

					var sauce = (function(){

						var result = "";
						for(var i=0; i<self.item().sauces.variants().length; i++) {
							if(self.item().sauces.variants()[i].id_menu() == self.item().sauce())
								return self.item().sauces.variants()[i];
						}
						return result;

					})();

					if(sauce)
						self.item().sauces.choosen = ko.observable(sauce);

					else
						self.item().sauces.choosen = ko.observable(self.item().sauces.variants()[0]);

				})();

			})();

		}


		if(self.item().cat.breadcrumbs()[0].alias() == 'pizza' || self.item().cat.breadcrumbs()[0].alias() == 'wok') {

			(function(){
				for(var i=0; i<self.item().items().length; i++) {

					var ingrids = pS[self.item().cat.breadcrumbs()[0].alias()][i];

					(function(){

						var ingrids_new = [];

						for(var key in ingrids) {

							if(!ingrids.hasOwnProperty(key)) continue;

							ingrids_new.push(ingrids[key]);

						}

						ingrids = ingrids_new;

					})();

					self.item().items()[i]['ingrids'] = ko.mapping.fromJS(ingrids);

				}
			})();

		}
		else if(parseInt(self.item().isAddIngrid()) === 6) {

			(function(){
				for(var i=0; i<self.item().items().length; i++) {

					var ingrids = pS[parseInt(self.item().isAddIngrid())][i];

					(function(){

						var ingrids_new = [];

						for(var key in ingrids) {

							if(!ingrids.hasOwnProperty(key)) continue;

							ingrids_new.push(ingrids[key]);

						}

						ingrids = ingrids_new;

					})();

					self.item().items()[i]['ingrids'] = ko.mapping.fromJS(ingrids);

				}
			})();

		}

		if(self.viewmode() == 'main') { 
			$(document).ready(function(){

				var owls = $(".slider.supermobile.owl-carousel.owl-theme");
				var count = +owls.length + 50;

				for(var i=0; i<owls.length; i++) {
					$(owls[i]).css('zIndex', count);
					count = +count - 1;
				}

			});
		}

		if(self.viewmode() == 'main') { 
			$(document).ready(function(){

				var owlitems = $(".owl-wrapper-outer .owl-wrapper .owl-item");

				for(var i=0; i<owlitems.length; i++) {
					$(owlitems[i]).addClass('hidden');
				}

			});
		}

		self.item()['total_weight'] = ko.observable(0);

	});

	ko.computed(function(){

		self.indexes = {};

		(function(){
			if(!self.item().choosen_type || !self.item().choosen_type() || !self.item().choosen_type().type || !self.item().choosen_type().type() || !self.item().choosen_type().type().ingrids) return;
			var result = 0;
			for(var j=0; j<self.item().choosen_type().type().ingrids().length; j++) {
				if(self.item().choosen_type().type().ingrids()[j].amount() > 0)
					result = +result + self.item().choosen_type().type().ingrids()[j].amount();
			}
			self.item().ingrid_amount(result);
		})();

		(function(){
			if(!self.item().choosen_type || !self.item().choosen_type() || !self.item().choosen_type().type || !self.item().choosen_type().type() || !self.item().choosen_type().type().ingrids) {
				self.item().total_sum((+self.item().choosen_type().type().price_new()>0 ? self.item().choosen_type().type().price_new() : self.item().choosen_type().type().price()) * self.item().amount());
				self.item().total_sum_old(self.item().choosen_type().type().price() * self.item().amount());
				return;
			} else {

				var cost_item = (+self.item().choosen_type().type().price_new() ? self.item().choosen_type().type().price_new() : self.item().choosen_type().type().price());
                                var cost_item_old = self.item().choosen_type().type().price();
				var cost_toppings = (function(){
					var result = 0;
					for(var j=0; j<self.item().choosen_type().type().ingrids().length; j++) {
						if(self.item().choosen_type().type().ingrids()[j].amount() > 0)
							result = +result + (self.item().choosen_type().type().ingrids()[j].amount()*self.item().choosen_type().type().ingrids()[j].price());
					}
					return result;
				})();
				var total_sum = (+cost_item + +cost_toppings)*self.item().amount();
				var total_sum_old = (+cost_item_old + +cost_toppings)*self.item().amount();
				self.item().cost_ingr(cost_toppings);
				self.item().total_sum(total_sum);
				self.item().total_sum_old(total_sum_old);

			}
		})();

		(function(){
			if(!self.item().choosen_type || !self.item().choosen_type() || !self.item().choosen_type().type || !self.item().choosen_type().type() || !self.item().choosen_type().type() || !self.item().choosen_type().type().ingrids) return;
			for(var j=0; j<self.item().items().length; j++) {
				for(var k=0; k<self.item().items()[j].ingrids().length; k++) {
					self.item().items()[j].ingrids()[k].amount(self.item().choosen_type().type().ingrids()[k].amount());
				}
			}
		})();

		(function(){
			if(!self.item().choosen_type && !self.item().choosen_type()) return;
			self.item().total_weight(+self.item().choosen_type().type().weight() * self.item().amount());
		})();

		(function(){

			if(!self.item().choosen_type || !self.item().choosen_type() || !self.item().choosen_type().type || !self.item().choosen_type().type() || !self.item().choosen_type().type().ingrids) return;// Если type пуст, завершить
			
			self.choosen_toppings.removeAll();// Очистить choosen_toppings
			
			for(var j=0; j<self.item().choosen_type().type().ingrids().length; j++) {// Наполнить choosen_toppings
				if(self.item().choosen_type().type().ingrids()[j].amount() > 0)
					self.choosen_toppings.push(self.item().choosen_type().type().ingrids()[j]);
			}

		})();
                
                if(self.item().total_sum() == self.item().total_sum_old()) {
                    self.item().profit_daily(0);
                    //self.item().vygoda_r(0);
                                            if(self.viewmode() !== 'item' && !self.profit_daily_event()) {
                            $('.item[id_menu='+self.item().id_menu()+']:not(.profit_daily_off .item[id_menu='+self.item().id_menu()+'])').each(function () {
                                $(this).css({'borderColor':'transparent'});
                                $(this).children().filter('.stars').hide('fast');
                            });        
                        }
                                    }
                else {
                    if(self.item().no_profit_daily() === "0") {
                        self.item().profit_daily(1);
                    }                    
                    self.item().vygoda_r(+self.item().total_sum_old() - +self.item().total_sum());
                                            if(self.viewmode() !== 'item' && !self.profit_daily_event()) {
                            $('.item[id_menu='+self.item().id_menu()+']:not(.profit_daily_off .item[id_menu='+self.item().id_menu()+'])').each(function () {
                                if(self.item().no_profit_daily() === "0") {
                                    $(this).css({'borderColor':'red'});
                                }
                                $(this).children().filter('.stars').show('fast');
                            });          
                        }                    
                                    }

	}).extend({rateLimit: 10, method: "notifyWhenChangesStop"});


	if(typeof params.model !== 'undefined')
		params.model(self);

	return self;


}, template: hereDoc(function () {/*
	<div data-bind="if: params.viewmode() == 'item', visible: params.viewmode() == 'item'">

<div style="display: none;" class="holder toppings-choose tabs-wrap" data-bind="if: (item().id_type() == '10' && item().isAddIngrid() != '0') || (item().id_type() == '40' && item().isAddIngrid() != '0') || item().isAddIngrid() == '6', visible: (item().id_type() == '10' && item().isAddIngrid() != '0') || (item().id_type() == '40' && item().isAddIngrid() != '0') || item().isAddIngrid() == '6'">

	<span>
		<span>Ингредиенты</span>
		<em class="more"><span class="plus" data-bind="click: switch_ingr_choose_panel"></span></em>
	</span>

	<div style="display: none;" data-bind="visible: is_ingr_panel_expanded" class="item-popup additional-toppings-choose-panel">

		<!-- ko foreach: item().choosen_type().type().ingrids -->

			<div class="row">

				<div class="product">
					 <span class="name" data-bind="text: name_menu"></span>
				</div>

				<div class="price">
					 <strong><span id="i-291-0" class="ex_price" data-bind="text: price"></span> <span class="rubl">руб</span></strong>
					 <div class="add-product">
							<a href="#" data-bind="click: $component.ingr_minus, css: {'hide-element': amount() == 0}" class="minus ex_minus" style="display: inline;">
								<span class="minus-ico"></span>
							</a>
							<span class="amount ex_amount" style="display: inline;" data-bind="text: amount, css: {'hide-element': amount() == 0}"></span>
							<a href="#" data-bind="click: $component.ingr_plus" class="plus ex_plus">
								<span class="plus-ico"></span>
							</a>
					 </div>
				</div>

			</div>

		<!-- /ko -->

		<a href="#" class="btn-close" data-bind="click: switch_ingr_choose_panel"></a>

		<div class="close-btn-wrapper">
			<a class="close-btn" href="#" data-bind="click: switch_ingr_choose_panel">Применить и закрыть</a>
		</div>

	</div>

	<div class="no-additional-ingrs" data-bind="visible: !choosen_toppings().length">
		<span>Доп.ингредиенты не выбраны...</span>
	</div>

	<div data-bind="visible: choosen_toppings().length, foreach: choosen_toppings" style="">

		<div class="choosen_topping">
			<span data-bind="text: '+'+amount()">+1</span>
			<span data-bind="text: name_menu"></span>
			<em class="remove-additional" data-bind="click: $component.clear_clicked_toppings"></em>
		</div>

	</div>

</div>

<div style="display: none;" class="holder choose-sauce-wrapper tabs-wrap" data-bind="if: (item().id_type() == '40' && item().isAddIngrid() != '0'), visible: (item().id_type() == '40' && item().isAddIngrid() != '0')">

	<span>Соус</span>

	<ul data-bind="foreach: item().sauces.variants">
		<li data-bind="css: {active: $component.item().sauces.choosen() == $data}, click: $component.choose_sauce">
			<a href="#" data-bind="text: name_menu"></a>
		</li>
	</ul>

</div>
 
<div style="display: none;" class="holder choose-sauce-wrapper tabs-wrap" data-bind="if: (parseInt(PM[item().id_menu()].isSouseType) > 0), visible: (parseInt(PM[item().id_menu()].isSouseType) > 0)">

	<span>Соус</span>

	<ul data-bind="foreach: item().sauces.variants">
		<li data-bind="css: {active: $component.item().sauces.choosen() == $data}, click: $component.choose_sauce">
			<a href="#" data-bind="text: name_menu"></a>
		</li>
	</ul>

</div>



<div style="display: none;" class="tabs-wrap holder dough-choose" data-bind="if: (item().id_type() == '10'), visible: (item().id_type() == '10')">
	<span>
	<span>Тесто</span>
	</span>
	<ul data-bind="foreach: item().dough.variants">
		<li data-bind="css: {active: $component.item().dough.choosen() == $data}, click: $component.choose_dough">
			<a href="#" data-bind="text: name"></a>
		</li>
	</ul>
</div>

<div style="display: none;" class="size-wrap holder" data-bind="if: (item().id_type() == '10'), visible: (item().id_type() == '10')">
	<span>Размер</span>
	<ul data-bind="foreach: item().sizes.variants">
		<li style="display: none" data-bind="visible: visible() && $component.item().dough.choosen().original_name() == type(), click: $component.choose_size">
			<a href="#" data-bind="css: {active: $component.item().sizes.choosen() == $data}">
				<span data-bind="text: 'Ø'+size()+' см'"></span>
				<span data-bind="text: weight()+' г'"></span>
				<strong>
					<span data-bind="text: price_new()>0 ? price_new() : price(), style: {'color':price_new()>0 ? 'red' : 'black'}"></span>
					<span data-bind="style: {'color':price_new()>0 ? 'red' : 'black'}" class="rub">P</span>
				</strong>
			</a>
		</li>
	</ul>
</div>

<div style="display: none;" class="size-wrap holder" data-bind="if: (item().id_menu() == 936), visible: (item().id_menu() == 936)">
	<span>Размер</span>
	<ul data-bind="foreach: item().sizes.variants">
		<li style="display: none" data-bind="visible: visible() && $component.item().dough.choosen().original_name() == type(),style: {width:'auto'}, click: $component.choose_size">
			<a href="#" data-bind="css: {active: $component.item().sizes.choosen() == $data}">
				<span data-bind="text: size(),style: {whiteSpace:'nowrap'}"></span>
				<span data-bind="text: weight()+' г'"></span>
				<strong>
					<span data-bind="text: price_new()>0 ? price_new() : price(), style: {'color':price_new()>0 ? 'red' : 'black'}"></span>
					<span data-bind="style: {'color':price_new()>0 ? 'red' : 'black'}" class="rub">P</span>
				</strong>
			</a>
		</li>
	</ul>
</div>

<div class="my-price-box">
<div data-bind="if: item().profit_daily() > 0" style="margin-top:10px">
    <div class="profitlbl" style="left:-135px;right: auto;" data-bind="html: '-&nbsp;'+item().vygoda_r()+'&nbsp;<span class=\'rub\'>руб</span>&nbsp;<big>&bullet;</big>'"></div>                
        </div>
	<div class="holder">

		<span class="price total-price">
			<span data-bind="text: item().total_sum,style: { color: item().total_sum() != item().total_sum_old() ? 'red' : 'black' }"></span>
			<span data-bind="style: { color: item().total_sum() != item().total_sum_old() ? 'red' : 'black' }" class="rubl">руб</span>
                        <span style="font:13px/16px Arial,Helvetica,sans-serif;color:black;font-weight:bolder;text-decoration:line-through;position:relative;top:-34px;left:-50px;display:none;" data-bind="visible: item().total_sum() != item().total_sum_old()">
                            <span data-bind="text: item().total_sum_old"></span>
                            <span class="rubl">руб</span>
                        </span>
			<span class="add-weight">
				<span data-bind="text: item().total_weight() + (item().cat.breadcrumbs()[0].alias() != 'drinks' ? ' г' : ' л.')"></span>
			</span>
		</span>

		<div class="less-more">
			<a class="minus" href="#" data-bind="click: minus"><span class="minus-ico"></span></a>
			<input type="text" class="amount" data-bind="textInput: item().amount" readonly="readonly" />
			<a class="plus" href="#" data-bind="click: plus"><span class="plus-ico"></span></a>
		</div>

		<a style="clear:both; margin-top:10px;" class="btn noselect" data-bind="click: add2cart.bind($data, $(this))">В корзину</a>

	</div>


	
</div>

</div>
	<div data-bind="if: params.viewmode() == 'main', visible: params.viewmode() == 'main'">

<div style="display: none; height: 20px;" data-bind="if: ((item().id_type() == '10' || item().id_type() == '40' || item().isAddIngrid() == '6') && params.viewmode_params.show_controls() != 0 && item().isAddIngrid() != '0'), visible: ((item().id_type() == '10' || item().id_type() == '40' || item().isAddIngrid() == '6') && params.viewmode_params.show_controls() != 0 && item().isAddIngrid() != '0')">

	<div class="ingredients">
		<em >Ингредиенты:</em>
		<em class="additional-items" style="background-color:#8fc322;">+
			<span data-bind="text: item().ingrid_amount"></span>
			<em class="remove-additional" data-bind="click: clear_toppings">remove</em>
		</em>
		<em style="margin-right:5px;" class="price">
			 <strong><span data-bind="text: item().cost_ingr"></span> <span class="rubl">руб</span></strong>
		</em>
		<em class="more" data-bind="click: switch_ingr_choose_panel"><span class="plus"></span></em>

		<div style="display: none;" data-bind="visible: is_ingr_panel_expanded" class="item-popup additional-toppings-choose-panel">

			<div data-bind="foreach: item().items()[item().choosen_type().num()].ingrids">
				<div class="row">
					<div class="product">
						 <span class="name" data-bind="text: name_menu"></span>
					</div>
					<div class="price">
						 <strong><span class="ex_price" data-bind="text: price"></span> <span class="rubl">руб</span></strong>
						 <div class="add-product">
								<a href="#" data-bind="click: $component.ingr_minus, css: {'hide-element': amount() == 0}" class="minus ex_minus" style="display: inline;">
									<span class="minus-ico"></span>
								</a>
								<span class="amount ex_amount" style="display: inline;" data-bind="text: amount, css: {'hide-element': amount() == 0}"></span>
								<a href="#" data-bind="click: $component.ingr_plus" class="plus ex_plus">
									<span class="plus-ico"></span>
								</a>
						 </div>
					</div>
				</div>
			</div>
			<div class="close-btn-wrapper">
				<a class="close-btn" href="#" data-bind="click: switch_ingr_choose_panel">Применить и закрыть</a>
			</div>
			<a href="#" class="btn-close" data-bind="click: switch_ingr_choose_panel"></a>
		</div>

	</div>

</div>

<div style="display: none;" class="tabs" data-bind="if: (item().id_type() == '10' && params.viewmode_params.show_controls() != 0), visible: (item().id_type() == '10' && params.viewmode_params.show_controls() != 0)">
		<!-- ko foreach: item().dough.variants -->
		<a href="#" data-bind="text: name, css: {active: $component.item().dough.choosen() == $data}, click: $component.choose_dough"></a>
	<!-- /ko -->
</div>


<div class="size-choose-block" style="display: none;" data-bind="if: (item().id_type() == '10' && params.viewmode_params.show_controls() != 0), visible: (item().id_type() == '10' && params.viewmode_params.show_controls() != 0)">

	<!-- ko foreach: item().sizes.variants -->
	<div style="display: none" class="size" data-bind="visible: visible() && type() == $component.item().choosen_type().type().type(), css: {active: $component.item().sizes.choosen() == $data}, click: $component.choose_size">
		<div class="size-radio">
			<span class="radio" data-bind="css: {checked: $component.item().sizes.choosen() == $data}">
				<input type="radio" name="size">
			</span>
		</div>
		<div>
			<span class="text" data-bind="text: size() + 'см'"></span>
		</div>
 			</div>
	<!-- /ko -->

</div>
<div class="size-choose-block" style="display: none;" data-bind="if: (item().id_menu() == 936 && params.viewmode_params.show_controls() != 0), visible: (item().id_menu() == 936 && params.viewmode_params.show_controls() != 0)">

	<!-- ko foreach: item().sizes.variants -->
	<div style="display: none" class="size" data-bind="visible: visible() && type() == $component.item().choosen_type().type().type(), css: {active: $component.item().sizes.choosen() == $data}, click: $component.choose_size">
		<div class="size-radio">
			<span class="radio" data-bind="css: {checked: $component.item().sizes.choosen() == $data}">
				<input type="radio" name="size">
			</span>
		</div>
		<div>
			<span class="text" data-bind="text: size()"></span>
		</div>
 			</div>
	<!-- /ko -->

</div>
<div class="sauce-choose-block select-row" style="display: none;" data-bind="if: (item().sauces && item().isAddIngrid() != '0' && item().id_type() == '40' && params.viewmode_params.show_controls() != 0), visible: (item().sauces && item().isAddIngrid() != '0' && item().id_type() == '40' && params.viewmode_params.show_controls() != 0)">

	<span class="label">Соус:</span>
	<select class="sauce" style="width:180px;" data-bind="options: item().sauces.variants,
		optionsText: function(item){ return item.name_menu(); },
		value: item().sauces.choosen,
		event: {change: function(){ console.log('change'); }">
	</select>
</div>

<div class="sauce-choose-block select-row" style="display: none;" data-bind="if: (parseInt(item().isSouseType()) > 0 && params.viewmode_params.show_controls() != 0), visible: (parseInt(item().isSouseType()) > 0 && params.viewmode_params.show_controls() != 0)">

	<div>

		<span class="label">Соус:</span>
		<select class="sauce" style="width:180px;" data-bind="options: item().sauces.variants,
			optionsText: function(item){ return item.name_menu(); },
			value: item().sauces.choosen,
			event: {change: function(){ console.log('change'); }">
		</select>

	</div>

</div>


	<div class="item-parts-count" style="display: none;" data-bind="if: (item().items_amount && (item().id_type() == '50' || item().id_type() == '30') && params.viewmode_params.show_controls() != 0), visible: (item().items_amount && (item().id_type() == '50' || item().id_type() == '30') && params.viewmode_params.show_controls() != 0)">
	<span data-bind="text: item().items_amount() + ' шт.'"></span>
</div>
<div data-bind="if: item().profit_daily() > 0" style="margin-top:10px">
    <div class="profitlbl" data-bind="html: '-&nbsp;'+item().vygoda_r()+'&nbsp;<span class=\'rub\'>руб</span>&nbsp;<big>&bullet;</big>'"></div>                
        </div>
<div data-bind="if: (item().id_type() == '50') && item().isProfit() == 1 && parseInt(item().vygoda_r())>0" style="margin-top:10px">
    <div class="profitlbl2">Выгода <span data-bind="text: item().vygoda_r()"></span>&nbsp;<span class="rubl">руб</span></div>
</div>
<div data-bind="if: item().special_notes().length > 0" style="margin-top:10px">
    <div data-bind="html: item().special_notes()"></div>
</div>
<div class="price-box">
	<div class="holder">
		<span class="price total-price">
			<span data-bind="text: item().total_sum(), style: { color: item().total_sum() != item().total_sum_old() ? 'red' : 'black' }"></span>
			<span data-bind="style: { color: item().total_sum() != item().total_sum_old() ? 'red' : 'black' }" class="rubl">руб</span>
			<span class="add-weight">
                            <span data-bind="text: item().total_weight() + (item().cat.breadcrumbs()[0].alias() != 'drinks' ? ' г' : ' л.')"></span>
			</span>
                        <span style="font:13px/16px Arial,Helvetica,sans-serif;color:black;font-weight:bolder;text-decoration:line-through;position:relative;top:-20px;left:-15px;display:none;" data-bind="visible: item().total_sum() != item().total_sum_old()">
                            <span data-bind="text: item().total_sum_old()"></span>
                            <span class="rubl">руб</span>
                        </span>
		</span>
		<div class="less-more-holder">
			<div class="less-more">
				<a class="minus" href="#" data-bind="click: minus"><span class="minus-ico"></span></a>
				<input type="text" class="amount" readonly="readonly" data-bind="value: item().amount" />
				<a class="plus" href="#" data-bind="click: plus"><span class="plus-ico"></span></a>
			</div>
		</div>
	</div>
            <a class="btn noselect choose_gift" data-bind="click: add2cart.bind($data, $element)">+ в корзину</a>
	</div>

<div class="modal-shield4items"></div>

</div>	<div data-bind="if: params.viewmode() == 'main_mobile', visible: params.viewmode() == 'main_mobile'"  style="float:right;width:20%;" >

	<div class="price-box" style="margin:0;padding:0;">

			<table>
				<tr>
					<td align="center">

						<a class="pointer" data-bind="click: add2cart.bind($data, $element)" style="height:30px;float:none;padding: 5px 0px 0px 0px;"><img src="https://static.pizzasushiwok.ru/images/cart_plus.svg" style="height:30px;"></a>
						<br>
					</td>
				</tr>
				<tr>
					<td align="center" style="font-family: 'Roboto Slab','Times New Roman',serif;font-size:1.1rem;">
						<span data-bind="text: item().total_sum"></span><span class="rubl">руб</span>
					</td>
				</tr>	

				<!-- ko foreach: item().sizes.variants -->
				<tr style="display: none;" data-bind="visible: type() == $component.item().choosen_type().type().type(), css: {active: $component.item().sizes.choosen() == $data}, click: $component.choose_size">
					<td style="padding: 5px 0px;">
						<input type="radio" class="radio" id="radio" /><label for="radio"  data-bind="text: size() + 'см'">40см</label>
					</td>
				</tr>			
				<!-- /ko -->

			</table> 

	</div>

</div>



<div data-bind="if: params.viewmode() == 'main_mobile', visible: params.viewmode() == 'main_mobile'"  style="float:left;margin-left:32%; margin-top:5px; width:47%" >
	<div id_menu="" data-bind="attr: {id_menu: item().id_menu}">
		<span class="ingredients" style="font:0.8rem/0.85rem Arial,Helvetica,sans-serif;"><i></i></span>
	</div>
</div>

<div class="size_back" data-bind="if: params.viewmode() == 'main_mobile', visible: params.viewmode() == 'main_mobile'"  style="position: absolute;margin-top:7rem; padding:5px;text-align:center;border: #EBCAB1 1px solid;margin-left:5px;" >
		<table >
			<tr>
				<td>
					<input type="checkbox" class="checkbox" id="checkbox" /><label for="checkbox"></label>
				</td>
			</tr>			
		</table>
</div>




	

	<div class="modal-shield4items"></div>



</div>



	<div class="add_prod_item" data-bind="if: params.viewmode() == 'add_prod_item', visible: params.viewmode() == 'add_prod_item'">
	<div class="item_name" style="height: 50px;">
		<a href="#" data-bind="attr: {href: '/' + item().cat.breadcrumbs()[0].alias() + '/' + item().alias()}">
			<span data-bind="text: item().name_menu"  style='border-bottom: #e0ded8 solid 1px; font: 700 15px/24px "Roboto Slab","Times New Roman",serif !important;'></span>
		</a>
	</div> 

	<div style="padding-bottom: 0;" class="total">
		<strong class="total-price">
			<span data-bind="text: item().total_sum"></span>
			<span class="rubl">руб</span>
			<span class="add-weight">
				<span data-bind="text: item().total_weight"></span>
				<span style="display: none" data-bind="visible: (item().cat.breadcrumbs()[0].alias() != 'drinks')"> г</span>
				<span style="display: none" data-bind="visible: (item().cat.breadcrumbs()[0].alias() == 'drinks')"> л.</span>
			</span>
		</strong>
	</div>

	<div style="text-align: center;" class="less-more">
		<a style="display: inline-block; float: none; vertical-align: middle;" class="minus" href="#" data-bind="click: minus"><span class="minus-ico"></span></a><!--
		--><input style="display: inline-block; float: none; vertical-align: middle;" type="text" class="amount" data-bind="textInput: item().amount" readonly="readonly"><!--
		--><a style="display: inline-block; float: none; vertical-align: middle;" class="plus" href="#" data-bind="click: plus"><span class="plus-ico"></span></a>
	</div>

	<div class="btn-wrapper">
		<a href="#" class="btn" data-bind="click: add2cart.bind($data, $element)">В корзину</a>
	</div>
</div>	<div class="cartconstructor" data-bind="if: params.viewmode() == 'cartconstructor', visible: params.viewmode() == 'cartconstructor'">


	<a href="#" class="btn-close" data-bind="click: model_cart.hide_modal_constructor.bind($data, $component)"></a>


	<div>
		<h2>
			<a data-bind="attr: {href: '/' + item().cat.breadcrumbs()[0].alias() + '/' + item().alias()}">
				<span data-bind="text: item().name_menu"></span>
			</a>
		</h2>
	</div>


	<div class="sauce-choose-block select-row" style="display: none;" data-bind="if: (item().sauces && item().isAddIngrid() != '0' && item().cat.breadcrumbs()[0].alias() == 'wok' && params.viewmode_params.show_controls() != 0 && item().isAddIngrid() != '0'), visible: (item().cat.breadcrumbs()[0].alias() == 'wok' && params.viewmode_params.show_controls() != 0 && item().isAddIngrid() != '0')">

		<span class="label">Соус:</span>
		<select class="sauce" style="width:180px;" data-bind="options: item().sauces.variants,
			optionsText: function(item){ return item.name_menu(); },
			value: item().sauces.choosen,
			event: {change: function(){ console.log('change'); }">
		</select>

	</div>


	<div style="display: none;" class="tabs" data-bind="if: (item().cat.breadcrumbs()[0].alias() == 'pizza' && params.viewmode_params.show_controls() != 0), visible: (item().cat.breadcrumbs()[0].alias() == 'pizza' && params.viewmode_params.show_controls() != 0)">
				<!-- ko foreach: item().dough.variants -->
			<a href="#" data-bind="text: name, css: {active: $component.item().dough.choosen() == $data}, click: $component.choose_dough"></a>
		<!-- /ko -->
	</div>


	<div class="size-choose-block" style="display: none;" data-bind="if: (item().cat.breadcrumbs()[0].alias() == 'pizza' && params.viewmode_params.show_controls() != 0), visible: (item().cat.breadcrumbs()[0].alias() == 'pizza' && params.viewmode_params.show_controls() != 0)">

		<!-- ko foreach: item().sizes.variants -->
		<div style="display: none" class="size" data-bind="visible: visible() && type() == $component.item().choosen_type().type().type(), css: {active: $component.item().sizes.choosen() == $data}, click: $component.choose_size">
			<div class="size-radio">
				<span class="radio" data-bind="css: {checked: $component.item().sizes.choosen() == $data}">
					<input type="radio" name="size">
				</span>
			</div>
			<div>
				<span class="text" data-bind="text: size() + 'см'"></span>
			</div>
	 				</div>
		<!-- /ko -->

	</div>


	<div class="item-popup additional-toppings-choose-panel">

		<div data-bind="foreach: item().items()[item().choosen_type().num()].ingrids">
			<div class="row">
				<div class="product">
					 <span class="name" data-bind="text: name_menu"></span>
				</div>
				<div class="price">
					 <strong><span id="i-291-0" class="ex_price" data-bind="text: price"></span> <span class="rubl">руб</span></strong>
					 <div class="add-product">
							<a href="#" data-bind="click: $component.ingr_minus, css: {'hide-element': amount() == 0}" class="minus ex_minus" style="display: inline;">
								<span class="minus-ico"></span>
							</a>
							<span class="amount ex_amount" style="display: inline;" data-bind="text: amount, css: {'hide-element': amount() == 0}"></span>
							<a href="#" data-bind="click: $component.ingr_plus" class="plus ex_plus">
								<span class="plus-ico"></span>
							</a>
					 </div>
				</div>
			</div>
		</div>

	</div>


	<div class="row" style="overflow: visible">
		<div class="price-box item" style="display: inline; float: left; width: 40%; position: relative;">

			<span class="price total-price">
				<span data-bind="text: item().total_sum">410</span>
				<span class="rubl">руб</span>
				<span class="add-weight">
					<span data-bind="text: item().total_weight() + (item().cat.breadcrumbs()[0].alias() != 'drinks' ? 'гр.' : 'л.')">500гр.</span>
				</span>
			</span>

		</div>
		<div style="display: inline; float: left; width: 60%;">
			<div class="close-btn-wrapper">
				<a class="close-btn" href="#" data-bind="click: model_cart.hide_modal_constructor.bind($data, $component)">Применить и закрыть</a>
			</div>
		</div>
	</div>



</div>	<div class="add_prod_item" data-bind="if: params.viewmode() == 'gift', visible: params.viewmode() == 'gift'">

	<h2>
		<a href="#" data-bind="attr: {href: '/' + item().cat.breadcrumbs()[0].alias() + '/' + item().alias()}">
			<span data-bind="text: item().name_menu"></span>
		</a>
	</h2>

	<div style="padding-bottom: 0;" class="total">

		<strong class="total-price">

			<span data-bind="text: item().total_sum"></span>
			<span class="rubl">руб.</span>

			<span class="add-weight">
				<span data-bind="text: item().total_weight"></span>
				<span style="display: none" data-bind="visible: (item().cat.breadcrumbs()[0].alias() != 'drinks')">гр.</span>
				<span style="display: none" data-bind="visible: (item().cat.breadcrumbs()[0].alias() == 'drinks')">л.</span>
			</span>

		</strong>

	</div>

	<div class="btn-wrapper">
		<a href="#" class="btn" data-bind="click: add2cart.bind($data, $element)">В корзину</a>
	</div>

</div>	
*/})};

ko.components.register(component_name, {
	viewModel: model_item_prototype.constructor,
	template: model_item_prototype.template
});


})();


function attach_component_item(config){
    $(document).ready(function(){
    

        if (config.lazyload) {
        
            window.item_lists = {
                first: {},
                second: {},
                second_is_ready: {}
            };

            (function(){
            
                var items = $(config.class_target);

                for (var i = 0; i < items.length; i++) 
                {
                
                    var id_menu = $(items[i]).attr('id_menu');
                    var content = $(items[i]).find(config.class_inside_target);

                    (function(){
                    

                        if (!item_lists.first[PM[id_menu].cat.breadcrumbs[0].alias]) {
                            item_lists.first[PM[id_menu].cat.breadcrumbs[0].alias] = [];
                        }
                        
                        if (item_lists.first[PM[id_menu].cat.breadcrumbs[0].alias].length < 5) 
                        {
                            item_lists.first[PM[id_menu].cat.breadcrumbs[0].alias].push({
                                id_menu: id_menu,
                                wrapper: items[i],
                                content: content,
                                category: PM[id_menu].cat.breadcrumbs[0].alias
                            });

                            return;
                        }
                        

                        if (!item_lists.second[PM[id_menu].cat.breadcrumbs[0].alias]) 
                        {
                            item_lists.second[PM[id_menu].cat.breadcrumbs[0].alias] = [];
                            item_lists.second_is_ready[PM[id_menu].cat.breadcrumbs[0].alias] = false;
                        }
                        
                        if (item_lists.first[PM[id_menu].cat.breadcrumbs[0].alias] && item_lists.first[PM[id_menu].cat.breadcrumbs[0].alias].length == 5) 
                        {
                            item_lists.second[PM[id_menu].cat.breadcrumbs[0].alias].push({
                                id_menu: id_menu,
                                wrapper: items[i],
                                content: content,
                                category: PM[id_menu].cat.breadcrumbs[0].alias
                            });                            
                        }

                        
                    })();
                    
                }
                
            })();
            

            (function(){
            
                var viewmode = config.viewmode ? config.viewmode : 'main'; 
                var viewmode_params = config.params ? config.params : {}; 
                for (var category_name in item_lists.first) {
                
                    if (!item_lists.first.hasOwnProperty(category_name)) 
                        continue;
                    for (var j = 0; j < item_lists.first[category_name].length; j++) {
                    
                        var params = {
                            name: 'item',
                            params: {
                                id_menu: item_lists.first[category_name][j]['id_menu'],
                                viewmode: viewmode,
                                viewmode_params: viewmode_params
                            }
                        };
                        
                        var html = "<div data-bind='component: " + JSON.stringify(params) + "'>" + "</div>";
                        $(item_lists.first[category_name][j]['content']).append(html);
                        ko.applyBindings({}, item_lists.first[category_name][j]['wrapper']);

                        $(item_lists.first[category_name][j]['wrapper']).trigger('attach_component_item');                                   
                        
                    }
                }                  
            })();
            

            (function(){
            

                var owls = $('.slider.owl-carousel');
                

                var handler = function(event, data){
                
                    var viewmode = config.viewmode ? config.viewmode : 'main'; 
                    var viewmode_params = config.params ? config.params : {}; 
                    for (var category_name in item_lists.second) {
                    
                        if (!item_lists.second.hasOwnProperty(category_name)) 
                            break;
                        if (data.alias != category_name) 
                            continue;
                        if (!item_lists.second_is_ready[category_name]) {
                            for (var j = 0; j < item_lists.second[category_name].length; j++) {
                            
                                var params = {
                                    name: 'item',
                                    params: {
                                        id_menu: item_lists.second[category_name][j]['id_menu'],
                                        viewmode: viewmode,
                                        viewmode_params: viewmode_params
                                    }
                                };
                                
                                var html = "<div data-bind='component: " + JSON.stringify(params) + "'>" + "</div>";
                                $(item_lists.second[category_name][j]['content']).append(html);
                                ko.applyBindings({}, item_lists.second[category_name][j]['wrapper']);

                                $(item_lists.second[category_name][j]['wrapper']).trigger('attach_component_item');            
                                
                            }
                        }
                        item_lists.second_is_ready[category_name] = true;
                        
                    }
					
                    $('select').styler();
                    
                };
                

                for (var i = 0; i < owls.length; i++) {

                    var next = $(owls[i]).find('.owl-next');
                    if (!next || !next[0]) 
                        break;
                    next = next[0];
                    

                    var alias = $(owls[i]).attr('alias');
                    

                    addEvent(next, ['click'], handler, {
                        alias: alias
                    });
                    
                }
                
            })();
            
        }
        

        else {
        

            window.item_lists = (function(){
            
                var results = {};
                
                var items = $(config.class_target);
                
                for (var i = 0; i < items.length; i++) {
                
                    var id_menu = (config.params.model_cart_item && config.params.model_cart_item.id_menu && config.params.model_cart_item.id_menu()) ? config.params.model_cart_item.id_menu() : $(items[i]).attr('id_menu');

                    
                    var content = $(items[i]).find(config.class_inside_target);

                    
                    results[id_menu] = {
                        wrapper: items[i],
                        content: content,
                        category: PM[id_menu].cat.breadcrumbs[0].alias
                    };
                    
                }
                
                return results;
                
            })();
            

            (function(){
            
                var viewmode = config.viewmode ? config.viewmode : 'main'; 
                var viewmode_params = config.params ? config.params : {}; 
                for (var item_key in item_lists) {
                
                    if (!item_lists.hasOwnProperty(item_key)) 
                        continue;
                    
                    var params = {
                        name: 'item',
                        params: {
                            id_menu: item_key,
                            viewmode: viewmode,
                            viewmode_params: viewmode_params,
                            model_cart_item: (config.params.model_cart_item) ? config.params.model_cart_item : {}
                        }
                    };
                    
                    var html = "<div data-bind='component: " + JSON.stringify(params) + "'>" + "</div>";
                    var content = item_lists[item_key]['content'];
                    $(content).append(html);
                    ko.applyBindings({}, item_lists[item_key]['wrapper']);
                                                    
                    $(item_lists[item_key]['wrapper']).trigger('attach_component_item');    
                    
                }          
                
            })();
            
        }



        (function(){
            $.ajax({
                type: "POST",
                url: '/items_sostav.php',
                data: { mod_name: "items_sostav"},
                dataType: "json",
                success: function(data, textStatus){
                    var items = $(config.class_target);
                    for (var i = 0; i < items.length; i++) 
                    {
                        var id_menu = $(items[i]).attr('id_menu');
                        var desc = $(items[i]).find('.ingredients i');
                        for(key in data) {
                            if(data[key].id_menu == id_menu)
                            {
                                desc.html(data[key].sostav_text);
                            }
                        }
                        if(typeof (desc) !== "undefined" && typeof (desc.html()) !== "undefined") {
                            $(items[i]).attr('data-decription',desc.html().trim());
                        }
                    }                    
                }
            });
            
            $('.slider.owl-carousel .owl-wrapper-outer').one('mouseover', function (e) {
                e.preventDefault();
                var alias = $(this).parent().attr('alias');
                var $owl_next = $(this).parent().find('.owl-buttons .owl-next');
                //console.log('window.item_lists.second_is_ready[' + alias + '] = ' + window.item_lists.second_is_ready[alias]);
                if(typeof(window.item_lists.second_is_ready)!=="undefined" && window.item_lists.second_is_ready[alias]){
                    //console.log(alias + ' ready');
                }
                else {
                    //console.log(alias + ' not ready');
                    //console.log($owl_next);
                    $owl_next.trigger('click');
                }
                    
            });
            
        })();
/**/
        
    });
}
</script>

<script>
    
now = new Date(2022, 8, 03, 20, 36, 49, 0);

page_load = new Date();

function currentTime() {
    
    var current_time = new Date(Date.now() - page_load.getTime() + now.getTime());
    
    return current_time;
    
}

function correctTime(timestamp) {
    
    var correct_time = new Date(timestamp - page_load.getTime() + now.getTime() + 6000);
    
    return correct_time;
    
}

</script>

<script>
// Функция для эмуляции клика
function eventFire(el, etype){
  if (el.fireEvent) {
    el.fireEvent('on' + etype);
  } else {
    var evObj = document.createEvent('Events');
    evObj.initEvent(etype, false, false);
    el.dispatchEvent(evObj);
  }
}
</script>

<script>
	$(document).ready(function(){

		var elements = $('.slider.supermobile');

		for(var i=0; i<elements.length; i++) {
			addEvent(elements[i], ['touchstart', 'mousedown'], function(event, params){

				// 1] Получить ссылку на DOM-элемент кнопки NEXT
				var next = $(params.target).find('.owl-controls .owl-next');
				if(!next[0]) return;
				next = next[0];

				// 2] Эмулировать клик по next
				eventFire(next, 'click');

			}, {target: elements[i]});
		}

                $('#login_form').on('submit', function (e){
                    
                    e.preventDefault();
                    
                    $.ajax({
                        type: 'POST',
                        dataType: 'json',
                        data: $(this).serialize(),
                        cache: false,
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.info('Нет связи с сервером:'+textStatus);
                        },
                        success: function (data, textStatus, jqXHR) {
                            //console.log(data);                           
                            toastr.info(data.message);
                            if(data.result) {
                                setTimeout(function (){
                                    if(/unset=user/.test(window.location.search)) {
                                        window.location.href="/";
                                    }
                                    else {
                                        window.location.reload();
                                    }                                    
                                },1000);
                            }
                            else {
                                toastr.info(data.message);
                            }
                        }
                    });
                    
                });
                
                                 
                                    
	});
</script>



<meta name="msvalidate.01" content="B9E29841C1E54768303D3F8A6BBC724B" />


<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5KRB8P');</script>
<!-- End Google Tag Manager -->

<!--
 
-->





<!-- VK pixel -->
    <script id="vk.moskva">
        vkEvent = function (eventParams,vkProductEvent,vkPriceListId) {

            vkTargetId = "VK-RTRG-355704-ap1Z4";

            if (typeof VK === 'undefined') {
                !function () {
                    var t = document.createElement("script");
                    t.type = "text/javascript",
                        t.async = !0,
                        t.src = "https://vk.com/js/api/openapi.js?160",
                        t.onload = function () {
                            VK.Retargeting.Init(vkTargetId), VK.Retargeting.Hit();
                            if (vkProductEvent) {
                                VK.Retargeting.ProductEvent(vkPriceListId, vkProductEvent, eventParams);
                            }
                        },
                        document.head.appendChild(t)
                }();
            }
            else{
                if (vkProductEvent) {
                    VK.Retargeting.ProductEvent(vkPriceListId, vkProductEvent, eventParams);
                }}
        };
    </script><noscript><img src="https://vk.com/rtrg?p=VK-RTRG-355704-ap1Z4" style="position:fixed; left:-999px;" alt=""/></noscript>
<!-- end VK pixel -->
    </head>
    <body>

        	    



	<div class="open-menu-wrapper">

			<div style="display: none" class="open-menu-popup" data-bind="visible: m.s1.modal.login">

				<div class="callback-popup popup-box login-panel">

					<a href="#" class="btn-close" data-bind="click: f.s1.pupup_switch.bind($data, 'login')"></a>

                                        <form id="mobile-menu-login-form" action="/" method="post" data-bind="visible: !m.s1.login.password_restore()">
						<fieldset>

							<input type="hidden" name="confirmed_email" id="confirmed_email2">
							<input type="hidden" name="verified_email" id="verified_email2">

							<div class="title-popup-wrapper">
								<strong class="title-popup">Войти в свой аккаунт</strong>
							</div>

							<div>
								<label>
									<span data-bind="if: m.s1.login.via_phone">Телефон</span><span data-bind="if: !m.s1.login.via_phone()">Электронная почта / Логин</span>
								</label>
                                <span data-bind="if: m.s1.login.via_phone"><input type="text" class="tel-input" name="user_login" data-bind="textInput: m.s1.login.phone"></span>
                                <span data-bind="if: !m.s1.login.via_phone()"><input type="text" name="user_login" data-bind="textInput: m.s1.login.email_login"></span>
							</div>

							<div>
								<label>
									<span>Пароль</span>
								</label>
								<input type="password" name="password" data-bind="textInput: m.s1.login.password">
							</div>

							<div class="holder">
								<input type="submit" value="Войти" data-binc="click: f.s1.login" />
								<a href="#" class="forgot-password" data-bind="click: f.s1.switch_login_restore">Забыли пароль?</a>
								<a href="/registration/" class="forgot-password">Регистрация</a>
							</div>

							<div class="holder">
								<span class="alt-enter">Войти через социальные сети</span>
								<ul class="social-enter">
									<li>

									</li>
								</ul>
								<a href="#" data-bind="click: f.s1.switch_login_way" class="forgot-password" style="margin: 0;">Другой способ</a>
							</div>

						</fieldset>
					</form>


					<div>


						<form action="#" style="display: none" data-bind="visible: m.s1.login.password_restore() && !m.s1.login.password_restore_msg()">

							<input type="hidden" name="mod_name" value="registration">
							<input type="hidden" name="tpl" value="restore_password">
							<fieldset>

								<div class="title-popup-wrapper">
									<strong class="title-popup">Восстановить пароль</strong>
								</div>


								<div data-bind="visible: m.s1.login.via_phone">
									<label>
										<span>Телефон</span>
									</label>
									<input type="text" class="tel-input" name="user_phone" data-bind="textInput: m.s1.login.phone">
								</div>

								<div>
									<p>
										<span>Укажите номер телефона, который был введен вами во время регистрации.</span>
									</p>
								</div>

								<div class="holder">
									<div class="myrow">
										<div class="back_button span40">
											<span class="back_button" data-bind="click: f.s1.switch_login_restore">Назад</span>
										</div>
										<div class="span60">
											<input type="submit" value="Восстановить" data-bind="click: f.s1.restore_password" />
										</div>
									</div>
								</div>

							</fieldset>
						</form>

						<div style="display: none" class="password_restore_msg" data-bind="visible: m.s1.login.password_restore_msg, html: m.s1.login.password_restore_msg_html">

						</div>

					</div>

				</div>

			</div>

			<div style="display: none" class="open-menu-popup" data-bind="visible: m.s1.modal.callback">

				<div class="callback-popup popup-box">

					<a href="#" class="btn-close" data-bind="click: f.s1.pupup_switch.bind($data, 'callback')"></a>

					<form data-bind="visible: m.s1.callback.form_visible">
						<fieldset>

							<div>
								<label><span>Ваше имя</span></label>
								<input type="text" name="name" data-bind="textInput: m.s1.callback.name, event: {keypress: f.s1.callback}">
							</div>

							<div>
								<label><span>Телефон</span></label>
								<input type="text" class="tel-input" name="phone" data-bind="textInput: m.s1.callback.phone, event: {keypress: f.s1.callback}">
							</div>

							<div>
								<p><span>Наш оператор свяжется с Вами для уточнения деталей заказа.</span></p>
							</div>

							<div class="holder">
								<input type="button" data-bind="click: f.s1.callback" value="Перезвоните мне"/>
							</div>

						</fieldset>
					</form>


					<div style="display: none" data-bind="visible: m.s1.callback.success_visible, html: m.s1.callback.form_html">

					</div>

				</div>

			</div>


		<nav id="mobile-menu" data-bind="visible: m.s1.expanded, css: {active: m.s1.expanded, expanded: m.s1.expanded}">

			<div id="mobile-menu-itself" data-bind="visible: !m.s1.cityexpanded()">
												<div style="display: none" data-bind="visible: !m.s1.is_loggedin()" class="mobile-menu-auth">
					<span onclick="model_openmenu.f.s1.switch(); $('.login-popup').css('display', 'block'); return false;">Вход</span><span><a href="/registration">Регистрация</a></span>
				</div>
				
				<div style="display: none" data-bind="visible: m.s1.is_loggedin" class="mobile-menu-user_info">

					<span data-bind="text: m.s1.username"></span>

					
				</div>


				<div class="mobile-menu-itself">
										<ul>
						<li class="highlight menu-selector" data-bind="click: function(){ window.scrollTo(0,0); popup_menu(); }">  <!-- data-bind="click: f.s1.switch_menucat_choose_mode" -->
							<a href="#" title="Меню">Меню</a>
						</li>
						<li data-bind="click: function(){ window.location = '/promotions/'; }">
							<a href="/promotions/" title="Акции">Акции</a>
						</li>
						<li class="highlight" data-bind="click: function(){ window.location = '/restaurants/'; }">
							<a href="/restaurants/" title="Рестораны">Рестораны</a>
						</li>						<li data-bind="click: function(){ window.location = '/room/' }, visible: m.s1.is_loggedin">
							<a href="/room/" data-bind="attr: {href: '/room/'}" title="Личный кабинет">Личный кабинет</a>
						</li>
												<li data-bind="click: function(){ window.location = '/page/about/'; }">
							<a href="/page/about/" title="О компании">О компании</a>
						</li>
												<li   onclick="model_openmenu.f.s1.switch(); callback($(this), $('#callback'), event);return false;">
							<a href="#" title="Обратный звонок" >Обратный звонок</a>
						</li>
						<li data-bind="click: function(){ window.location = 'tel:+74951343333'; }">
							<a href="tel:+74951343333" id="call_to_skp" title="Заказ по телефону" onclick="yaCounter39791110.reachGoal ('klik-po-telefonu'); return true;">Заказ по телефону</a>
						</li>
						<li>
							<a href="https://fr.pizzasushiwok.ru/" title="Cотрудничество">Cотрудничество</a>
						</li>
						<li data-bind="click: f.s1.switch_city_choose_mode" class="menu-selector">
							<a href="#" data-bind="text: m.s1.indexes.cities[m.s1.cities.choosen_id()].name_filial">г. Москва</a>
						</li>
						<li data-bind="click: function(){ window.location = '/?unset=user'; }, visible: m.s1.is_loggedin">
							<a href="/?unset=user">Выйти</a>
						</li>
					</ul>
									</div>
<div class="mobile-top-sub-menu">
    <p>Действующие промокоды тут</p>
    <div class="ul">
        <div class="li">
            <noindex><a rel="nofollow" href="https://vk.com/pizzasushiwokru" target="_blank" class="vk" onclick="yaCounter39791110.reachGoal('click_vk');"><span>vk</span></a></noindex>
        </div>
         
        <div class="li">
            <noindex><a rel="nofollow" href="https://ok.ru/group/61749467742289" target="_blank" class="ok" onclick="yaCounter39791110.reachGoal('click_ok');"><span>ok</span></a></noindex>
        </div>
        <div class="li">
            <noindex><a rel="nofollow" href="https://t.me/+-wGoh2-Hufc1ZDNi" target="_blank" class="telegram" onclick="yaCounter39791110.reachGoal('click_telegram');"><span>telegram</span></a></noindex>
        </div> 
    </div>    
</div>
				<div class="mobile-menu-phones">
                                                                                <div>
                                            <a href="tel:+74951343333" onclick="yaCounter39791110.reachGoal ('klik-po-telefonu'); return true;">
                                        +7 (495) 134-33-33                                            </a>
                                        </div>
                                                                                                                        
					
				</div>
				
			</div>

			<form method="POST" action="/" id="mobile-menu-city-choose" class="user-city-choose" style="display: none" data-bind="visible: m.s1.cityexpanded" tabindex="-1">

				<input type="hidden" name="id_filial" data-bind="textInput: m.s1.cities.choosen_id">
				<div class="choose-city popup-box" id="mobile-menu-city-choose-panel">

					<div class="back-button-container">
						<div class="back-row">
							<a data-bind="click: f.s1.switch_city_choose_mode"><span>Назад</span></a>
						</div>
					</div>

					<ul >
												    
						    <li><a data-filial="1" data-url="https://pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" class="active" data-active="1">Москва</a></li>

						    												    
						    <li><a data-filial="44" data-url="https://scherbinka.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Москва (Щербинка)</a></li>

						    												    
						    <li><a data-filial="43" data-url="https://troick.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Москва (Троицк)</a></li>

						    												    
						    <li><a data-filial="45" data-url="https://moskovskij.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Москва (Московский)</a></li>

						    												    
						    <li><a data-filial="22" data-url="https://balashiha.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Балашиха</a></li>

						    												    
						    <li><a data-filial="18" data-url="https://vidnoe.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Видное (Ленинский г.о.)</a></li>

						    												    
						    <li><a data-filial="12" data-url="https://voronezh.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Воронеж</a></li>

						    												    
						    <li><a data-filial="49" data-url="https://dedovsk.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Дедовск</a></li>

						    												    
						    <li><a data-filial="29" data-url="https://dzerjinskiy.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Дзержинский</a></li>

						    												    
						    <li><a data-filial="51" data-url="https://dmitrov.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Дмитровский ГО</a></li>

						    												    
						    <li><a data-filial="31" data-url="https://dolgoprudny.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Долгопрудный</a></li>

						    												    
						    <li><a data-filial="19" data-url="https://domodedovo.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Домодедово</a></li>

						    												    
						    <li><a data-filial="7" data-url="https://gukovskij.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Жуковский</a></li>

						    												    
						    <li><a data-filial="32" data-url="https://zvenigorod.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Звенигород</a></li>

						    												    
						    <li><a data-filial="6" data-url="https://zelenograd.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Зеленоград</a></li>

						    												    
						    <li><a data-filial="39" data-url="https://ivanteevka.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Ивантеевка</a></li>

						    												    
						    <li><a data-filial="48" data-url="https://istra.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Истра ГО</a></li>

						    												    
						    <li><a data-filial="25" data-url="https://korolev.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Королев</a></li>

						    												    
						    <li><a data-filial="40" data-url="https://kotelniki.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Котельники</a></li>

						    												    
						    <li><a data-filial="26" data-url="https://krasnogorsk.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Красногорск</a></li>

						    												    
						    <li><a data-filial="52" data-url="https://lobnya.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Лобня</a></li>

						    												    
						    <li><a data-filial="33" data-url="https://lytkarino.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Лыткарино</a></li>

						    												    
						    <li><a data-filial="9" data-url="https://lubercy.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Люберцы (Люберецкий р-н)</a></li>

						    												    
						    <li><a data-filial="8" data-url="https://mytishi.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Мытищи</a></li>

						    												    
						    <li><a data-filial="46" data-url="https://naro-fominsk.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Наро-Фоминский ГО</a></li>

						    												    
						    <li><a data-filial="34" data-url="https://noginsk.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Ногинск</a></li>

						    												    
						    <li><a data-filial="14" data-url="https://odintsovo.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Одинцово</a></li>

						    												    
						    <li><a data-filial="5" data-url="https://podolsk.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Подольск</a></li>

						    												    
						    <li><a data-filial="41" data-url="https://pushkino.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Пушкино</a></li>

						    												    
						    <li><a data-filial="30" data-url="https://ramenskoe.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Раменское</a></li>

						    												    
						    <li><a data-filial="27" data-url="https://reutov.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Реутов</a></li>

						    												    
						    <li><a data-filial="50" data-url="https://solnechnogorsk.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Солнечногорский ГО</a></li>

						    												    
						    <li><a data-filial="47" data-url="https://tula.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Тула</a></li>

						    												    
						    <li><a data-filial="38" data-url="https://fryazino.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Фрязино</a></li>

						    												    
						    <li><a data-filial="28" data-url="https://himki.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Химки</a></li>

						    												    
						    <li><a data-filial="37" data-url="https://schelkovo.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Щелково</a></li>

						    												    
						    <li><a data-filial="35" data-url="https://elektrostal.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Электросталь</a></li>

						    						
						
					</ul>

				</div>

			</form>



		</nav>

	<div id="popup_menu" style="display: none" class="choose-city choose-menu-cat callback-popup popup-box">

		<ul>
			<li>
					<a data-bind="event: {click: function(){ f.s1.show_load_screen_50(); window.location = '/ekonom/'; }, touchstart: function(){ f.s1.show_load_screen_50(); setTimeout(function(){ window.location = '/ekonom/'; }, 100); }}, attr: {href: '/ekonom/'}"  style="color:red;" onclick="yaCounter39791110.reachGoal('click_econom');">SALE!</a>
			</li>                    
			  
		
						<li>
					<a data-bind="event: {click: function(){ f.s1.show_load_screen_50(); window.location = '/pizza/'; }, touchstart: function(){ f.s1.show_load_screen_50(); setTimeout(function(){ window.location = '/pizza/'; }, 100); }}, attr: {href: '/pizza/'}" >Пиццы</a>
			</li>
			
		
						<li>
					<a data-bind="event: {click: function(){ f.s1.show_load_screen_50(); window.location = '/assorti/'; }, touchstart: function(){ f.s1.show_load_screen_50(); setTimeout(function(){ window.location = '/assorti/'; }, 100); }}, attr: {href: '/assorti/'}" >Ассорти</a>
			</li>
			
		
						<li>
					<a data-bind="event: {click: function(){ f.s1.show_load_screen_50(); window.location = '/rolls/'; }, touchstart: function(){ f.s1.show_load_screen_50(); setTimeout(function(){ window.location = '/rolls/'; }, 100); }}, attr: {href: '/rolls/'}" >Роллы</a>
			</li>
			
		
						<li>
					<a data-bind="event: {click: function(){ f.s1.show_load_screen_50(); window.location = '/wok/'; }, touchstart: function(){ f.s1.show_load_screen_50(); setTimeout(function(){ window.location = '/wok/'; }, 100); }}, attr: {href: '/wok/'}" >Wok</a>
			</li>
			
		
						<li>
					<a data-bind="event: {click: function(){ f.s1.show_load_screen_50(); window.location = '/sushi/'; }, touchstart: function(){ f.s1.show_load_screen_50(); setTimeout(function(){ window.location = '/sushi/'; }, 100); }}, attr: {href: '/sushi/'}" >Суши</a>
			</li>
			
		
						<li>
					<a data-bind="event: {click: function(){ f.s1.show_load_screen_50(); window.location = '/sendvichi/'; }, touchstart: function(){ f.s1.show_load_screen_50(); setTimeout(function(){ window.location = '/sendvichi/'; }, 100); }}, attr: {href: '/sendvichi/'}" >Сэндвичи</a>
			</li>
			
		
						<li>
					<a data-bind="event: {click: function(){ f.s1.show_load_screen_50(); window.location = '/snakes/'; }, touchstart: function(){ f.s1.show_load_screen_50(); setTimeout(function(){ window.location = '/snakes/'; }, 100); }}, attr: {href: '/snakes/'}" >Закуски</a>
			</li>
			
		
						<li>
					<a data-bind="event: {click: function(){ f.s1.show_load_screen_50(); window.location = '/supy/'; }, touchstart: function(){ f.s1.show_load_screen_50(); setTimeout(function(){ window.location = '/supy/'; }, 100); }}, attr: {href: '/supy/'}" >Супы</a>
			</li>
			
		
						<li>
					<a data-bind="event: {click: function(){ f.s1.show_load_screen_50(); window.location = '/salad/'; }, touchstart: function(){ f.s1.show_load_screen_50(); setTimeout(function(){ window.location = '/salad/'; }, 100); }}, attr: {href: '/salad/'}" >Салаты</a>
			</li>
			
		
						<li>
					<a data-bind="event: {click: function(){ f.s1.show_load_screen_50(); window.location = '/sousy/'; }, touchstart: function(){ f.s1.show_load_screen_50(); setTimeout(function(){ window.location = '/sousy/'; }, 100); }}, attr: {href: '/sousy/'}" >Соусы</a>
			</li>
			
		
						<li>
					<a data-bind="event: {click: function(){ f.s1.show_load_screen_50(); window.location = '/drinks/'; }, touchstart: function(){ f.s1.show_load_screen_50(); setTimeout(function(){ window.location = '/drinks/'; }, 100); }}, attr: {href: '/drinks/'}" >Напитки</a>
			</li>
			
		
						<li>
					<a data-bind="event: {click: function(){ f.s1.show_load_screen_50(); window.location = '/desserts/'; }, touchstart: function(){ f.s1.show_load_screen_50(); setTimeout(function(){ window.location = '/desserts/'; }, 100); }}, attr: {href: '/desserts/'}" >Десерты</a>
			</li>
			
		
						<li>
					<a data-bind="event: {click: function(){ f.s1.show_load_screen_50(); window.location = '/paki/'; }, touchstart: function(){ f.s1.show_load_screen_50(); setTimeout(function(){ window.location = '/paki/'; }, 100); }}, attr: {href: '/paki/'}" >Наборы</a>
			</li>
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
					<li>
					<a data-bind="event: {click: function(){ f.s1.show_load_screen_50(); window.location = '/vegan/'; }, touchstart: function(){ f.s1.show_load_screen_50(); setTimeout(function(){ window.location = '/vegan/'; }, 100); }}, attr: {href: '/vegan/'}" class="new">VEG</a>
			</li>
		</ul>
		<a href="#" id="close_popup_menu" class="btn-close" onclick="$('#popup_menu,#close_popup_menu').css('display','none');return false;">close</a>

	</div>

	</div>

<script>

    $(document).ready(function (){
        
                $('#mobile-menu-login-form').on('submit', function (e){
                    
                    e.preventDefault();
                    
                    $.ajax({
                        type: 'POST',
                        dataType: 'json',
                        data: $(this).serialize(),
                        cache: false,
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Нет связи с сервером:'+textStatus,'Ошибка');
                        },
                        success: function (data, textStatus, jqXHR) {
                            console.log(data);                           
                            if(data.result) {
                                toastr.success(data.message,'Сообщение');
                                setTimeout(function (){
                                    if(/unset=user/.test(window.location.search)) {
                                        window.location.href="/";
                                    }
                                    else {
                                        window.location.reload();
                                    }                                    
                                },1000);
                            }
                            else {
                                toastr.error(data.message,'Ошибка');
                            }
                        }
                    });
                    
                });        
                $('#mobile-menu-city-choose-panel ul li a').on('click', function(e) {
                    e.preventDefault(); //console.log(e.target);
                    var self = $(this);
                    if(self.data('active')=="1") {
                        return false;
                    }
                    var pars = {
                        mod_name: 'validate_cart',
                        action: 'global',
                        id_filial: self.attr('data-filial'),
                        url: self.attr('data-url')
                    };
                    $.post("/index.php",pars,function(data,textStatus,jqXHR){
                        //console.log(data); console.log(self.data());
                        if(data.result && typeof(self.data('promocode_try'))!=="undefined" && self.data('promocode_try').length > 0) {
                            var pars2 = {
                                task: 'all_promocode_along',
                                promocode: self.data('promocode_try'),
                                filial: self.attr('data-url')
                            };
                            $.post("/save_c.php",pars2,function(data,textStatus,jqXHR){
                                //console.log(data);
                                window.location.href = self.attr('data-url');                                                                                      
                            },'json');   
                        }
                        else if(data.result) {
                            window.location.href = self.attr('data-url');
                        }
                        else {
                            if(typeof(data.html)!=="undefined") {
                                try {
                                    eval(data.html);
                                }
                                catch (exception) {
                                    console.log(exception);
                                }                
                            }                                                        
                        }
                    },'json');
                });                
        
    });

    var OpenmenuFunctionsProto = { constructor: function(self) { var f = this; f.s1 = {};

			f.s1.switch_login_restore_off = function(){
				self.m.s1.login.password_restore(false);
			};

			f.s1.switch_login_way_phone = function(){
				self.m.s1.login.via_phone(true);
			};

			f.s1.expand = function(data, event) {

				if(!self.m.s1.expanded()) {

                                        $('.popupouter').slideUp('slow');
                                

          self.m.s1.expanded(!self.m.s1.expanded());
			var app = document.querySelector('div.popupouter');
			/*if (app && !app.classList.contains('hidepop'))
			{
				$('#mobile-menu').css('top',app.offsetHeight);
			}
			else*/
			{
				$('#mobile-menu').css('top',0);
			}
          $('.page').animate({'right' : '-200px'}, 50, 'linear');
					$('.page').addClass('mobile-menu-opened');
					$(document.body).delay(200).queue(function (next) {
						$(this).css('overflow-x', 'hidden');
						//$(this).css('position', 'fixed');
						next();
					});
					self.f.s1.switch_login_restore_off();
					self.f.s1.switch_login_way_phone();
					self.m.s1.cityexpanded(false);
					document.getElementById('mobile-menu').scrollTop = 0;
					$('.header').addClass('fix');
					$('.page').addClass('fix');

				}

			};

			// 1.4] Раскрыть левое мобильное меню
			f.s1.hide = function(data, event) {

				if(self.m.s1.expanded()) {
                                    if(!$('header').hasClass('fix')) {
                                        $('.popupouter').slideDown('slow');
                                    }
            

          self.m.s1.expanded(!self.m.s1.expanded());
			var app = document.querySelector('div.popupouter');
			/*if (app && !app.classList.contains('hidepop'))
			{
				$('#mobile-menu').css('top',app.offsetHeight);
			}
			else*/
			{
				$('#mobile-menu').css('top',0);
			}
          $('.page').animate({'right': 0}, 50, 'linear');
					$('.page').removeClass('mobile-menu-opened');
					$(document.body).delay(200).queue(function (next) {
						$(this).css('overflow-x', 'auto');
						//$(this).css('position', 'static');
						next();
					});
					self.f.s1.switch_login_restore_off();
					self.f.s1.switch_login_way_phone();
					self.m.s1.cityexpanded(false);
					document.getElementById('mobile-menu').scrollTop = 0;
					$('#popup_menu,#close_popup_menu').css('display','none');
					$('.header').removeClass('fix');
					$('.page').removeClass('fix');

				}

			};

      f.s1.switch = function(data, event) {

        if(self.m.s1.expanded()) {
            self.f.s1.hide();
        } 	
        else {
            self.f.s1.expand();
        } 											

				self.f.s1.switch_login_restore_off();
				self.f.s1.switch_login_way_phone();
				self.m.s1.cityexpanded(false);
				window.scrollTo(0,0);
				document.getElementById('mobile-menu').scrollTop = 0;

      };

      f.s1.pupup_switch = function(modalname, data, event) {
				if(!self.m.s1.modal[modalname]) return;
				self.m.s1.modal[modalname](!self.m.s1.modal[modalname]());
				window.scrollTo(0,0);
				self.f.s1.hide();
				self.m.s1.login.password_restore_msg(false);
			};

			f.s1.callback = function(data, event){

				if(event.type == 'keypress' && event.keyCode != '13') return true;
				if(self.m.s1.callback.phone().length != 15) return;
					var pars = {
						mod_name: "call_me",
						task: "put_request",
						name: self.m.s1.callback.name(),
						phone: self.m.s1.callback.phone(),
						product_arr: null
					};

					$.ajax({
						type: "POST",
						url: '/index.php',
						data: pars,
						dataType : "json",
						success: function (data, textStatus) {
							self.m.s1.callback.form_visible(false);
							self.m.s1.callback.form_html(data.message);
							self.m.s1.callback.success_visible(true);
						}
					});

			};
			f.s1.switch_login_way = function(){
				self.m.s1.login.via_phone(!self.m.s1.login.via_phone());
			};
			f.s1.switch_login_restore = function(){
				self.m.s1.login.password_restore(!self.m.s1.login.password_restore());
			};
			f.s1.restore_password = function(){
				var pars = {
					mod_name: "registration",
					tpl: 			"restore_password",
					phone: 		self.m.s1.login.phone()
				};
				$.ajax({
					type: "POST",
					url: '/index.php',
					data: pars,
					dataType : "json",
					success: function (data, textStatus) {
						self.m.s1.login.password_restore(false);
					},
					error: function(jqXHR, textStatus, errorThrown){
						console.log(errorThrown);
					}
				});

			};

			f.s1.switch_city_choose_mode = function(){
				self.m.s1.cityexpanded(!self.m.s1.cityexpanded());
				if(self.m.s1.cityexpanded()) {
					var element = document.getElementById('mobile-menu-city-choose');
					element.focus();
				}

			};

			f.s1.choose_city = function(data, event){
				self.m.s1.cityexpanded(false);
				self.f.s1.hide();
				self.m.s1.cities.choosen_id(data.id_filial)
				document.getElementById('mobile-menu-city-choose').submit();
				self.f.s1.show_load_screen_50();
			};

			/*
			f.s1.login = function(data, event){
				if(event.type == 'keypress' && event.keyCode != '13') return true;
				document.getElementById('mobile-menu-login-form').submit();
			};
			*/

			f.s1.show_load_screen_50 = function(){

				setTimeout(function(){
					$('.preloader-box').css('display', 'block');
				}, 50);

			};

			f.s1.hide_load_screen_50 = function(){
				setTimeout(function(){
					$('.preloader-box').css('display', 'none');
				}, 50);
			};



    return f; }};

    var OpenmenuModelProto = { constructor: function(OpenmenuFunctionsProto) {

      var self = this;
      self.m = {};
      self.f = Object.create(OpenmenuFunctionsProto).constructor(self);

      self.m.s1 = {};

        self.m.s1.expanded = ko.observable(false);
        self.m.s1.cityexpanded = ko.observable(false);

				self.m.s1.modal = {};

					self.m.s1.modal.login = ko.observable(false);
					self.m.s1.modal.callback = ko.observable(false);

				self.m.s1.callback = {};

					self.m.s1.callback.name = ko.observable('');
					self.m.s1.callback.phone = ko.observable('');
					self.m.s1.callback.form_visible = ko.observable(true);
					self.m.s1.callback.form_html	 = ko.observable("" +
							"<p>" +
							"<span>Спасибо!</span>" +
							"<br>" +
							"<span>Пожалуйста ожидайте звонок оператора.</span>" +
							"</p>");
					self.m.s1.callback.success_visible = ko.observable(false);

				self.m.s1.login = {};

					self.m.s1.login.phone = ko.observable('');
					self.m.s1.login.email_login = ko.observable('');
					self.m.s1.login.password = ko.observable('');
					self.m.s1.login.via_phone = ko.observable(true);
					self.m.s1.login.password_restore = ko.observable(false);
					self.m.s1.login.password_restore_msg = ko.observable(false);
					self.m.s1.login.password_restore_msg_html = ko.observable('Восстановление пароля');

				self.m.s1.username = ko.observable("");
				self.m.s1.is_loggedin = ko.computed(function(){

					if(self.m.s1.username()) return true;
					return false;

				});

				self.m.s1.cities = {};

					self.m.s1.cities.list = ko.observableArray([{"Id":"1","active":"1","city":"\u041c\u043e\u0441\u043a\u0432\u0430","value":"moscow","in_oracle_bd":"1","parent":"0","in_regions":"1","undeground":"1","id_filial":"1","vk_group":"pizzasushiwokru","vk_widget":"","name_filial":"\u041c\u043e\u0441\u043a\u0432\u0430","name_filial_r":"\u041c\u043e\u0441\u043a\u0432\u0435 \u0438 \u041c\u041e","value_filial":"moscow","order_filial":"1","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.684810042195465","lon":"37.74244842554687","zoom":"8","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"45190713","active_filial":"1","site_filial":"^1^2^3^15","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":"<h2>\u041d\u0430\u0448\u0438 \u0440\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b<\/h2>\r\n\t\t<div class=\"details\" style=\"max-width: 60%;\">\r\n\t\t\t\t<div itemscope itemtype=\"http:\/\/schema.org\/Organization\">\r\n\t\t\t\t\t\t<p><span itemprop=\"name\">\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438: \u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb<\/span><\/p>\r\n\t\t\t\t\t\t<p itemprop=\"address\" itemscope itemtype=\"http:\/\/schema.org\/PostalAddress\"><span itemprop=\"streetAddress\">111672, \u0433. \u041c\u043e\u0441\u043a\u0432\u0430, \u0443\u043b. \u041d\u043e\u0432\u043e\u043a\u043e\u0441\u0438\u043d\u0441\u043a\u0430\u044f, \u0434. 20, \u043a\u043e\u0440\u043f. 2., \u044d\u0442\u0430\u0436 1, \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u0435 I\u0431, \u043a\u043e\u043c\u043d\u0430\u0442\u0430 2, \u043e\u0444\u0438\u0441 2\u0431<\/span><\/p>\r\n\t\t\t\t\t\t<p>\u041e\u0413\u0420\u041d: 1147746474226<\/p>\r\n\t\t\t\t\t\t<p>\u0418\u041d\u041d: 7720812834<\/p>\r\n\t\t\t\t\t\t<p>\u041a\u041f\u041f: 772001001<\/p>\r\n\t\t\t\t\t\t~~*<p>E-mail: ~~mailto address=\"info@pizzasushiwok.ru\" text=\"<span itemprop=\\\"email\\\">info@pizzasushiwok.ru<\/span>\" encode=\"javascript\"~<\/p>*~\r\n\t\t\t\t\t\t<p>\u0422\u0435\u043b\u0435\u0444\u043e\u043d\/\u0444\u0430\u043a\u0441: <a href=\"tel:+74952876500\"><span itemprop=\"telephone\">+7 (495) 287-65-00<\/span><\/a><\/p>\r\n\t\t    <\/div>\r\n    <\/div>","orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"41","active":"1","city":"\u041c\u043e\u0441\u043a\u0432\u0430 (\u0429\u0435\u0440\u0431\u0438\u043d\u043a\u0430)","value":"scherbinka","in_oracle_bd":"41","parent":"1","in_regions":"304","undeground":"0","id_filial":"44","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u041c\u043e\u0441\u043a\u0432\u0430 (\u0429\u0435\u0440\u0431\u0438\u043d\u043a\u0430)","name_filial_r":"\u0429\u0435\u0440\u0431\u0438\u043d\u043a\u0435","value_filial":"scherbinka","order_filial":"3","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.50867523522724","lon":"37.56999455227273","zoom":"11","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"0","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"40","active":"1","city":"\u041c\u043e\u0441\u043a\u0432\u0430 (\u0422\u0440\u043e\u0438\u0446\u043a)","value":"troick","in_oracle_bd":"40","parent":"1","in_regions":"1614","undeground":"0","id_filial":"43","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u041c\u043e\u0441\u043a\u0432\u0430 (\u0422\u0440\u043e\u0438\u0446\u043a)","name_filial_r":"\u0422\u0440\u043e\u0438\u0446\u043a\u0435","value_filial":"troick","order_filial":"4","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.49503307117589","lon":"37.23773270000002","zoom":"10","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"0","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"42","active":"1","city":"\u041c\u043e\u0441\u043a\u0432\u0430 (\u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u0438\u0439)","value":"moskovskij","in_oracle_bd":"42","parent":"1","in_regions":"1616","undeground":"0","id_filial":"45","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u041c\u043e\u0441\u043a\u0432\u0430 (\u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u0438\u0439)","name_filial_r":"\u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u043c","value_filial":"moskovskij","order_filial":"5","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.49503307117589","lon":"37.23773270000002","zoom":"10","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"0","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"15","active":"1","city":"\u0411\u0430\u043b\u0430\u0448\u0438\u0445\u0430","value":"balashiha","in_oracle_bd":"15","parent":"1","in_regions":"15","undeground":"0","id_filial":"22","vk_group":"pizzasushiwokru","vk_widget":"170459559","name_filial":"\u0411\u0430\u043b\u0430\u0448\u0438\u0445\u0430","name_filial_r":"\u0411\u0430\u043b\u0430\u0448\u0438\u0445\u0435","value_filial":"balashiha","order_filial":"6","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.79844807119042","lon":"37.957769750000004","zoom":"11","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"45190353","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"20","active":"1","city":"\u0412\u0438\u0434\u043d\u043e\u0435 (\u041b\u0435\u043d\u0438\u043d\u0441\u043a\u0438\u0439 \u0433.\u043e.)","value":"vidnoe","in_oracle_bd":"20","parent":"1","in_regions":"499","undeground":"0","id_filial":"18","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u0412\u0438\u0434\u043d\u043e\u0435 (\u041b\u0435\u043d\u0438\u043d\u0441\u043a\u0438\u0439 \u0433.\u043e.)","name_filial_r":"\u0412\u0438\u0434\u043d\u043e\u043c","value_filial":"vidnoe","order_filial":"7","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.55050603286192","lon":"37.790183598046895","zoom":"11","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"10:00","first_delivery_time":"11:00","cnt_num":"45190431","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"9","active":"1","city":"\u0412\u043e\u0440\u043e\u043d\u0435\u0436","value":"voronezh","in_oracle_bd":"9","parent":"0","in_regions":"9","undeground":"0","id_filial":"12","vk_group":"psw_vr","vk_widget":null,"name_filial":"\u0412\u043e\u0440\u043e\u043d\u0435\u0436","name_filial_r":"\u0412\u043e\u0440\u043e\u043d\u0435\u0436\u0435","value_filial":"voronezh","order_filial":"8","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1000","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"51.6628529777778","lon":"39.1935663479798","zoom":"10","tel1":"+7 (473) 262-00-02","tel2":"8-800-555-12-23","tel_state":"1","pause_start":"03:00","pause_end":"10:00","first_delivery_time":"11:00","cnt_num":"45190449","active_filial":"1","site_filial":"^1^2^3","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":"\t\t\t\t\t<h2>\u0410\u0434\u0440\u0435\u0441 \u0434\u043b\u044f \u043a\u043e\u0440\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u0438<\/h2>\r\n\t\t\t\t\t<div class=\"details\">\r\n\t\t\t\t\t\t<div itemscope itemtype=\"http:\/\/schema.org\/Organization\">\r\n\t\t\t\t\t\t<div itemprop=\"address\" itemscope itemtype=\"http:\/\/schema.org\/PostalAddress\">\r\n\t\t\t\t\t\t<p><span itemprop=\"streetAddress\">394029, \u0433. \u0412\u043e\u0440\u043e\u043d\u0435\u0436, \u0443\u043b. \u041b\u0435\u043d\u0438\u043d\u0433\u0440\u0430\u0434\u0441\u043a\u0430\u044f, \u0434. 136 \u0430\/\u044f \u211627<\/span><\/p> \r\n\t\t\t\t\t\t<\/div>\r\n\t\t\t\t\t\t<\/div>\r\n\t\t\t\t\t<\/div>","orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"0"},{"Id":"46","active":"1","city":"\u0414\u0435\u0434\u043e\u0432\u0441\u043a","value":"dedovsk","in_oracle_bd":"46","parent":"0","in_regions":"1813","undeground":"0","id_filial":"49","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u0414\u0435\u0434\u043e\u0432\u0441\u043a","name_filial_r":"\u0414\u0435\u0434\u043e\u0432\u0441\u043a\u0435","value_filial":"dedovsk","order_filial":"9","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.84501198805736","lon":"37.14510703535156","zoom":"11","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"0","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"0","google_pay":"0","card3":"0"},{"Id":"27","active":"1","city":"\u0414\u0437\u0435\u0440\u0436\u0438\u043d\u0441\u043a\u0438\u0439","value":"dzerjinskiy","in_oracle_bd":"27","parent":"1","in_regions":"27","undeground":"0","id_filial":"29","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u0414\u0437\u0435\u0440\u0436\u0438\u043d\u0441\u043a\u0438\u0439","name_filial_r":"\u0414\u0437\u0435\u0440\u0436\u0438\u043d\u0441\u043a\u043e\u043c","value_filial":"dzerjinskiy","order_filial":"10","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.64766491378318","lon":"37.85436500000001","zoom":"12","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"10:00","first_delivery_time":"11:00","cnt_num":"45190464","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"48","active":"1","city":"\u0414\u043c\u0438\u0442\u0440\u043e\u0432\u0441\u043a\u0438\u0439 \u0413\u041e","value":"dmitrov","in_oracle_bd":"48","parent":null,"in_regions":"1834","undeground":"0","id_filial":"51","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u0414\u043c\u0438\u0442\u0440\u043e\u0432\u0441\u043a\u0438\u0439 \u0413\u041e","name_filial_r":"\u0414\u043c\u0438\u0442\u0440\u043e\u0432\u0435","value_filial":"dmitrov","order_filial":"11","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"56.006792835093194","lon":"37.53502056237154","zoom":"10","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"0","google_pay":"0","card3":"0"},{"Id":"28","active":"1","city":"\u0414\u043e\u043b\u0433\u043e\u043f\u0440\u0443\u0434\u043d\u044b\u0439","value":"dolgoprudny","in_oracle_bd":"28","parent":"1","in_regions":"485","undeground":"0","id_filial":"31","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u0414\u043e\u043b\u0433\u043e\u043f\u0440\u0443\u0434\u043d\u044b\u0439","name_filial_r":"\u0414\u043e\u043b\u0433\u043e\u043f\u0440\u0443\u0434\u043d\u043e\u043c","value_filial":"dolgoprudny","order_filial":"12","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.948728176908475","lon":"37.54860850000001","zoom":"11","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"45190485","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"22","active":"1","city":"\u0414\u043e\u043c\u043e\u0434\u0435\u0434\u043e\u0432\u043e","value":"domodedovo","in_oracle_bd":"22","parent":"1","in_regions":"374","undeground":"0","id_filial":"19","vk_group":"pizzasushiwokru","vk_widget":"170327570","name_filial":"\u0414\u043e\u043c\u043e\u0434\u0435\u0434\u043e\u0432\u043e","name_filial_r":"\u0414\u043e\u043c\u043e\u0434\u0435\u0434\u043e\u0432\u043e","value_filial":"domodedovo","order_filial":"13","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.41434514720861","lon":"37.779991499999994","zoom":"10","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"10:00","first_delivery_time":"11:00","cnt_num":"45190500","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"5","active":"1","city":"\u0416\u0443\u043a\u043e\u0432\u0441\u043a\u0438\u0439","value":"gukovskij","in_oracle_bd":"5","parent":"1","in_regions":"28","undeground":"0","id_filial":"7","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u0416\u0443\u043a\u043e\u0432\u0441\u043a\u0438\u0439","name_filial_r":"\u0416\u0443\u043a\u043e\u0432\u0441\u043a\u043e\u043c","value_filial":"gukovskij","order_filial":"14","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.59566187559301","lon":"38.09442779739583","zoom":"11","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"03:00","pause_end":"10:00","first_delivery_time":"11:00","cnt_num":"45190536","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"29","active":"1","city":"\u0417\u0432\u0435\u043d\u0438\u0433\u043e\u0440\u043e\u0434","value":"zvenigorod","in_oracle_bd":"29","parent":"1","in_regions":"1192","undeground":"0","id_filial":"32","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u0417\u0432\u0435\u043d\u0438\u0433\u043e\u0440\u043e\u0434","name_filial_r":"\u0417\u0432\u0435\u043d\u0438\u0433\u043e\u0440\u043e\u0434\u0435","value_filial":"zvenigorod","order_filial":"15","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.73911372121214","lon":"36.85721966818181","zoom":"12","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"02:00","pause_end":"10:00","first_delivery_time":"11:00","cnt_num":"45190545","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"4","active":"1","city":"\u0417\u0435\u043b\u0435\u043d\u043e\u0433\u0440\u0430\u0434","value":"zelenograd","in_oracle_bd":"4","parent":"1","in_regions":"167","undeground":"0","id_filial":"6","vk_group":"pizzasushiwokru","vk_widget":"170327494","name_filial":"\u0417\u0435\u043b\u0435\u043d\u043e\u0433\u0440\u0430\u0434","name_filial_r":"\u0417\u0435\u043b\u0435\u043d\u043e\u0433\u0440\u0430\u0434\u0435","value_filial":"zelenograd","order_filial":"16","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.97187492982456","lon":"37.232361350877206","zoom":"11","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"50289046","active_filial":"1","site_filial":"^1^2^3","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"36","active":"1","city":"\u0418\u0432\u0430\u043d\u0442\u0435\u0435\u0432\u043a\u0430","value":"ivanteevka","in_oracle_bd":"36","parent":"1","in_regions":"1472","undeground":"0","id_filial":"39","vk_group":"pizzasushiwokru","vk_widget":"","name_filial":"\u0418\u0432\u0430\u043d\u0442\u0435\u0435\u0432\u043a\u0430","name_filial_r":"\u0418\u0432\u0430\u043d\u0442\u0435\u0435\u0432\u043a\u0435","value_filial":"ivanteevka","order_filial":"17","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.974654","lon":"37.920063","zoom":"13","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"0","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"45","active":"1","city":"\u0418\u0441\u0442\u0440\u0430 \u0413\u041e","value":"istra","in_oracle_bd":"45","parent":"0","in_regions":"1693","undeground":"0","id_filial":"48","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u0418\u0441\u0442\u0440\u0430 \u0413\u041e","name_filial_r":"\u0418\u0441\u0442\u0440\u0435","value_filial":"istra","order_filial":"18","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.84501198805736","lon":"37.14510703535156","zoom":"11","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"0","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"0","google_pay":"0","card3":"0"},{"Id":"21","active":"1","city":"\u041a\u043e\u0440\u043e\u043b\u0435\u0432","value":"korolev","in_oracle_bd":"21","parent":"1","in_regions":"170","undeground":"0","id_filial":"25","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u041a\u043e\u0440\u043e\u043b\u0435\u0432","name_filial_r":"\u041a\u043e\u0440\u043e\u043b\u0435\u0432\u0435","value_filial":"korolev","order_filial":"19","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.92519095686274","lon":"37.844888327451","zoom":"12","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"45190578","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"37","active":"1","city":"\u041a\u043e\u0442\u0435\u043b\u044c\u043d\u0438\u043a\u0438","value":"kotelniki","in_oracle_bd":"37","parent":"1","in_regions":"1492","undeground":"0","id_filial":"40","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u041a\u043e\u0442\u0435\u043b\u044c\u043d\u0438\u043a\u0438","name_filial_r":"\u041a\u043e\u0442\u0435\u043b\u044c\u043d\u0438\u043a\u0430\u0445","value_filial":"kotelniki","order_filial":"20","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.660518","lon":"37.861822","zoom":"13","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"10:00","first_delivery_time":"11:00","cnt_num":"0","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"23","active":"1","city":"\u041a\u0440\u0430\u0441\u043d\u043e\u0433\u043e\u0440\u0441\u043a","value":"krasnogorsk","in_oracle_bd":"23","parent":"1","in_regions":"23","undeground":"0","id_filial":"26","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u041a\u0440\u0430\u0441\u043d\u043e\u0433\u043e\u0440\u0441\u043a","name_filial_r":"\u041a\u0440\u0430\u0441\u043d\u043e\u0433\u043e\u0440\u0441\u043a\u0435","value_filial":"krasnogorsk","order_filial":"21","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.823827544086015","lon":"37.32692201290323","zoom":"11","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"45190593","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"49","active":"1","city":"\u041b\u043e\u0431\u043d\u044f","value":"lobnya","in_oracle_bd":"49","parent":null,"in_regions":"1853","undeground":"0","id_filial":"52","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u041b\u043e\u0431\u043d\u044f","name_filial_r":"\u041b\u043e\u0431\u043d\u0435","value_filial":"lobnya","order_filial":"22","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"56.006792835093194","lon":"37.53502056237154","zoom":"10","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"0","google_pay":"0","card3":"0"},{"Id":"30","active":"1","city":"\u041b\u044b\u0442\u043a\u0430\u0440\u0438\u043d\u043e","value":"lytkarino","in_oracle_bd":"30","parent":"1","in_regions":"3","undeground":"0","id_filial":"33","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u041b\u044b\u0442\u043a\u0430\u0440\u0438\u043d\u043e","name_filial_r":"\u041b\u044b\u0442\u043a\u0430\u0440\u0438\u043d\u043e","value_filial":"lytkarino","order_filial":"23","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.61153834545457","lon":"37.94136891515151","zoom":"11","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"03:00","pause_end":"10:00","first_delivery_time":"11:00","cnt_num":"50289058","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"6","active":"1","city":"\u041b\u044e\u0431\u0435\u0440\u0446\u044b (\u041b\u044e\u0431\u0435\u0440\u0435\u0446\u043a\u0438\u0439 \u0440-\u043d)","value":"lubercy","in_oracle_bd":"6","parent":"1","in_regions":"6","undeground":"0","id_filial":"9","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u041b\u044e\u0431\u0435\u0440\u0446\u044b (\u041b\u044e\u0431\u0435\u0440\u0435\u0446\u043a\u0438\u0439 \u0440-\u043d)","name_filial_r":"\u041b\u044e\u0431\u0435\u0440\u0446\u0430\u0445 \u0438 \u041b\u044e\u0431\u0435\u0440\u0435\u0446\u043a\u043e\u043c \u0440-\u043d\u0435","value_filial":"lubercy","order_filial":"24","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.679564","lon":"37.884359","zoom":"13","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"45190599","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"8","active":"1","city":"\u041c\u044b\u0442\u0438\u0449\u0438","value":"mytishi","in_oracle_bd":"8","parent":"1","in_regions":"8","undeground":"0","id_filial":"8","vk_group":"pizzasushiwokru","vk_widget":"170326986","name_filial":"\u041c\u044b\u0442\u0438\u0449\u0438","name_filial_r":"\u041c\u044b\u0442\u0438\u0449\u0430\u0445","value_filial":"mytishi","order_filial":"25","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.960095107843166","lon":"37.70353598235294","zoom":"11","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"45190602","active_filial":"1","site_filial":"^1^2^3","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"43","active":"1","city":"\u041d\u0430\u0440\u043e-\u0424\u043e\u043c\u0438\u043d\u0441\u043a\u0438\u0439 \u0413\u041e","value":"naro-fominsk","in_oracle_bd":"43","parent":"1","in_regions":"1615","undeground":"0","id_filial":"46","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u041d\u0430\u0440\u043e-\u0424\u043e\u043c\u0438\u043d\u0441\u043a\u0438\u0439 \u0413\u041e","name_filial_r":"\u041d\u0430\u0440\u043e-\u0424\u043e\u043c\u0438\u043d\u0441\u043a\u0435","value_filial":"naro-fominsk","order_filial":"26","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.49503307117589","lon":"37.23773270000002","zoom":"10","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"0","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"31","active":"1","city":"\u041d\u043e\u0433\u0438\u043d\u0441\u043a","value":"noginsk","in_oracle_bd":"31","parent":"1","in_regions":"4","undeground":"0","id_filial":"34","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u041d\u043e\u0433\u0438\u043d\u0441\u043a","name_filial_r":"\u041d\u043e\u0433\u0438\u043d\u0441\u043a\u0435","value_filial":"noginsk","order_filial":"27","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.82796375485919","lon":"38.44442650000001","zoom":"10","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"51322054","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"16","active":"1","city":"\u041e\u0434\u0438\u043d\u0446\u043e\u0432\u043e","value":"odintsovo","in_oracle_bd":"16","parent":"1","in_regions":"31","undeground":"0","id_filial":"14","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u041e\u0434\u0438\u043d\u0446\u043e\u0432\u043e","name_filial_r":"\u041e\u0434\u0438\u043d\u0446\u043e\u0432\u043e","value_filial":"odintsovo","order_filial":"28","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.69948122413792","lon":"37.262086913793105","zoom":"11","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"10:00","first_delivery_time":"11:00","cnt_num":"45190611","active_filial":"1","site_filial":"^1^2^3","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"7","active":"1","city":"\u041f\u043e\u0434\u043e\u043b\u044c\u0441\u043a","value":"podolsk","in_oracle_bd":"7","parent":"1","in_regions":"7","undeground":"0","id_filial":"5","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u041f\u043e\u0434\u043e\u043b\u044c\u0441\u043a","name_filial_r":"\u041f\u043e\u0434\u043e\u043b\u044c\u0441\u043a\u0435","value_filial":"podolsk","order_filial":"29","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.41461635945947","lon":"37.54629106621621","zoom":"11","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"45190620","active_filial":"1","site_filial":"^1^2^3","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"38","active":"1","city":"\u041f\u0443\u0448\u043a\u0438\u043d\u043e","value":"pushkino","in_oracle_bd":"38","parent":"1","in_regions":"1512","undeground":"0","id_filial":"41","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u041f\u0443\u0448\u043a\u0438\u043d\u043e","name_filial_r":"\u041f\u0443\u0448\u043a\u0438\u043d\u043e","value_filial":"pushkino","order_filial":"30","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.987811","lon":"37.85157","zoom":"13","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"0","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"18","active":"1","city":"\u0420\u0430\u043c\u0435\u043d\u0441\u043a\u043e\u0435","value":"ramenskoe","in_oracle_bd":"18","parent":"1","in_regions":"29","undeground":"0","id_filial":"30","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u0420\u0430\u043c\u0435\u043d\u0441\u043a\u043e\u0435","name_filial_r":"\u0420\u0430\u043c\u0435\u043d\u0441\u043a\u043e\u043c","value_filial":"ramenskoe","order_filial":"31","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.59566187559301","lon":"38.09442779739583","zoom":"11","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"03:00","pause_end":"10:00","first_delivery_time":"11:00","cnt_num":"45190632","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"19","active":"1","city":"\u0420\u0435\u0443\u0442\u043e\u0432","value":"reutov","in_oracle_bd":"19","parent":"1","in_regions":"258","undeground":"0","id_filial":"27","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u0420\u0435\u0443\u0442\u043e\u0432","name_filial_r":"\u0420\u0435\u0443\u0442\u043e\u0432\u0435","value_filial":"reutov","order_filial":"32","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.749485613353805","lon":"37.85047480876631","zoom":"12","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"45190644","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"47","active":"1","city":"\u0421\u043e\u043b\u043d\u0435\u0447\u043d\u043e\u0433\u043e\u0440\u0441\u043a\u0438\u0439 \u0413\u041e","value":"solnechnogorsk","in_oracle_bd":"47","parent":null,"in_regions":"1833","undeground":"0","id_filial":"50","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u0421\u043e\u043b\u043d\u0435\u0447\u043d\u043e\u0433\u043e\u0440\u0441\u043a\u0438\u0439 \u0413\u041e","name_filial_r":"\u0421\u043e\u043b\u043d\u0435\u0447\u043d\u043e\u0433\u043e\u0440\u0441\u043a\u0435","value_filial":"solnechnogorsk","order_filial":"33","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"56.006792835093194","lon":"37.53502056237154","zoom":"10","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"0","google_pay":"0","card3":"0"},{"Id":"44","active":"1","city":"\u0422\u0443\u043b\u0430","value":"tula","in_oracle_bd":"44","parent":"0","in_regions":"1645","undeground":"0","id_filial":"47","vk_group":"psw_tula","vk_widget":null,"name_filial":"\u0422\u0443\u043b\u0430","name_filial_r":"\u0422\u0443\u043b\u0435","value_filial":"tula","order_filial":"34","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"54.209981823859685","lon":"37.61633869999999","zoom":"10","tel1":"+7 (4872) 337-538","tel2":"+7 (4872) 337-548","tel_state":"1","pause_start":"05:00","pause_end":"10:00","first_delivery_time":"11:00","cnt_num":"0","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"0"},{"Id":"35","active":"1","city":"\u0424\u0440\u044f\u0437\u0438\u043d\u043e","value":"fryazino","in_oracle_bd":"35","parent":"1","in_regions":"1473","undeground":"0","id_filial":"38","vk_group":"pizzasushiwokru","vk_widget":"","name_filial":"\u0424\u0440\u044f\u0437\u0438\u043d\u043e","name_filial_r":"\u0424\u0440\u044f\u0437\u0438\u043d\u043e","value_filial":"fryazino","order_filial":"35","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.961094","lon":"38.048475","zoom":"12","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"0","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"17","active":"1","city":"\u0425\u0438\u043c\u043a\u0438","value":"himki","in_oracle_bd":"17","parent":"1","in_regions":"249","undeground":"0","id_filial":"28","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u0425\u0438\u043c\u043a\u0438","name_filial_r":"\u0425\u0438\u043c\u043a\u0430\u0445","value_filial":"himki","order_filial":"36","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.88701494501988","lon":"37.422140801262","zoom":"11","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"45190686","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"34","active":"1","city":"\u0429\u0435\u043b\u043a\u043e\u0432\u043e","value":"schelkovo","in_oracle_bd":"34","parent":"1","in_regions":"1474","undeground":"0","id_filial":"37","vk_group":"pizzasushiwokru","vk_widget":"","name_filial":"\u0429\u0435\u043b\u043a\u043e\u0432\u043e","name_filial_r":"\u0429\u0435\u043b\u043a\u043e\u0432\u043e","value_filial":"schelkovo","order_filial":"37","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.916805","lon":"38.040494","zoom":"12","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"0","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"},{"Id":"32","active":"1","city":"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u0441\u0442\u0430\u043b\u044c","value":"elektrostal","in_oracle_bd":"32","parent":"1","in_regions":"5","undeground":"0","id_filial":"35","vk_group":"pizzasushiwokru","vk_widget":null,"name_filial":"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u0441\u0442\u0430\u043b\u044c","name_filial_r":"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u0441\u0442\u0430\u043b\u0438","value_filial":"elektrostal","order_filial":"38","min_sum":"0","min_discount_sum":"600","min_gift_sum":"1200","map":"<div id=\"map\"><\/div>    <script>      function initMap() {       map = new google.maps.Map(document.getElementById('map'));         var ctaLayer = new google.maps.KmlLayer({    url: 'https:\/\/cdn.pizzasushiwok.ru\/images\/moscow8.kml',    map: map  });      }    <\/script><script async defer src =\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyCKkPXkvq5zlne5Z1nAj5UNK9PUwVpnItU&callback=initMap\"><\/script>","lat":"55.82796375485919","lon":"38.44442650000001","zoom":"10","tel1":"+7 (495) 134-33-33","tel2":"+7 (495) 287-65-00","tel_state":"1","pause_start":"05:00","pause_end":"08:00","first_delivery_time":"09:00","cnt_num":"51322105","active_filial":"1","site_filial":"^1^2^","email":"","work_from":"00:00:00","work_to":"00:00:00","title":"","meta_k":"","meta_d":"","seo_text":"","ur_lico":"\u041e\u041e\u041e \u00ab\u0421\u041e\u041a\u00bb","ur_lico_full":null,"orders_stop":"0","no_contact_delivery":"1","google_pay":"0","card3":"1"}]);
					self.m.s1.cities.choosen_id = ko.observable("1");

      ko.computed(function(){
        self.m.s1.indexes = {};

				self.m.s1.indexes.cities = (function(){
					var results = {};
					for(var i=0; i<self.m.s1.cities.list().length; i++) {
						results[self.m.s1.cities.list()[i].id_filial] = self.m.s1.cities.list()[i];
					}
					return results;
				}());
      });

      ko.computed(function(){
        if(!ko.computedContext.isInitial()) return;

				(function(){

					window.onresize = function(event, params){

						if(window.innerWidth > 768) {
							self.f.s1.hide();
							$('#popup_menu,#close_popup_menu').css('display','none');
							$(document.body).delay(200).queue(function (next) {
								$(this).css('overflow-x', 'auto');
								$(this).css('position', 'static');
								next();
							});
						}

					};

				})();

				(function(){

					Ps.initialize(document.getElementById('mobile-menu'), {
						wheelSpeed:.4,
						wheelPropagation: true,
						minScrollbarLength: 20
					});

					Ps.initialize(document.getElementById('mobile-menu-city-choose-panel'), {
						wheelSpeed:.4,
						wheelPropagation: true,
						minScrollbarLength: 20,
						suppressScrollX: true
					});


				})();


      });
      return self;

    }};

    var model_openmenu = Object.create(OpenmenuModelProto).constructor(OpenmenuFunctionsProto);
    ko.applyBindings(model_openmenu, document.getElementsByClassName('open-menu-wrapper')[0]);

		function popup_menu(e){
			//e.preventDefault();
			$('#popup_menu').css({
				display:'block',
				position:'fixed',
				top:'30%',
				left:'50%'
			});
			$('#close_popup_menu').css({
				display:'block',
				'z-index':'1003',
				position:'fixed',
				top:'calc(30% + 10px)',
				left:'calc(50% + 125px)'
			});
		}

</script>	
	
        <div class="page-wrap">
            <div class="page">
                
		
				                
                

                <script>
					function choose_city(link, block, e)
					{
	                    
						var startTop = parseInt(link.offset().top+33);
						var startLeft = parseInt(e.clientX);
						if(!block.is(':visible')) {
								block.css('top',startTop);
								block.css('left',startLeft);
								block.slideDown('fast', function() {
                                                                    clickF = function (event) {
                                                                        if($(event.target).parents('#choose-city').length === 0) {
                                                                            $('#choose-city').slideUp('fast');
                                                                            $('html, body').off('click', clickF);
                                                                        }
                                                                    };
                                                                    $('html, body').on('click', clickF);                                                                     
                                                                });
						}                                                                                              

					}
					function change_city(id_filial)
					{
						
						

						// проверка на наличие позиций на филиале 2

						$('#choose-city').css('display', 'none');

						if(model_cart.cart().total_cart_sum()!=0)
						{
				            vex.dialog.confirm({
				                unsafeMessage: 'Изменить местоположение?<br><span class="blink">Корзина будет очищена</span>',
				                callback: function (value) {
				                    if (value) {


											var pars = {
												task: 'check_items',
												id_filial: id_filial
											};
											
											$.ajax({
												type: "POST",
												url: '/save_c.php',
												data: pars,
												dataType : "json",
												success: function (data, textStatus) {
													
													toastr.info('Очистка корзины..');
													model_cart.cart().items.removeAll();

													

													$('#id_filial').val(id_filial);
													$('#filials_list').submit();


													return true;

												},
												error: function(){

													console.log('error_change_filial');
													return false;
												} 
											});


				                    } else {

				                    	        //alert(1);
				                    	        $('select#address').find('option:selected').prop('selected',false);
	        									$('select#address').find('option[value=0]').prop('selected',true);
	        									$('select#address').trigger('change');

				                        return false;
				                    }
				                }
				            });								
						}
						else
						{
							$('#id_filial').val(id_filial);
							$('#filials_list').submit();
						}

					}
                                        
                                        $(function () {
                                            
                                            $('form#filials_list ul li a').on('mouseover', function() {
                                                if($(this).data('active')=="0") {
                                                    $(this).addClass('active');
                                                }                                                
                                            });
                                            
                                            $('form#filials_list ul li a').on('mouseout', function() {
                                                if($(this).data('active')=="0") {
                                                    $(this).removeClass('active');
                                                }     
                                            });
                                            
                                            $('form#filials_list ul li a').on('click', function(e) {
                                                e.preventDefault(); //console.log(e.target);
                                                var self = $(this);
                                                if(self.data('active')=="1") {
                                                    return false;
                                                }
                                                var pars = {
                                                    mod_name: 'validate_cart',
                                                    action: 'global',
                                                    id_filial: self.attr('data-filial'),
                                                    url: self.attr('data-url')
                                                };
                                                $.post("/index.php",pars,function(data,textStatus,jqXHR){
                                                    //console.log(data); console.log(self.data());
                                                    if(data.result && typeof(self.data('promocode_try'))!=="undefined" && self.data('promocode_try').length > 0) {
                                                        var pars2 = {
                                                            task: 'all_promocode_along',
                                                            promocode: self.data('promocode_try'),
                                                            filial: self.attr('data-url')
                                                        };
                                                        $.post("/save_c.php",pars2,function(data,textStatus,jqXHR){
                                                            //console.log(data);
                                                            window.location.href = self.attr('data-url');                                                                                      
                                                        },'json');   
                                                    }
                                                    else if(data.result) {
                                                        window.location.href = self.attr('data-url');
                                                    }
                                                    else {
                                                        if(typeof(data.html)!=="undefined") {
                                                            try {
                                                                eval(data.html);
                                                            }
                                                            catch (exception) {
                                                                console.log(exception);
                                                            }                
                                                        }                                                        
                                                    }
                                                },'json');
                                            });
                                            $('form#filials_list .btn-close').on('click', function(e) {
                                                e.preventDefault();
                                                
                                                $('#choose-city').slideUp('fast');
                                                $('html, body').off('click', clickF);
                                            });
                                        });
                                        
				</script>

			    <div id="choose-city" class="choose-city popup-box" style="display: none;opacity: 1;padding:15px 0px;z-index: 1060;position: fixed;">
					<form method="POST" action="" id="filials_list">
					    <input type="hidden" name="id_filial" id="id_filial" value="">				    
                                            <ul>
						    						    
						    						    <li><a data-filial="1" data-url="http://pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" class="active" data-active="1">Москва</a></li>

						    

						    						    
						    
						    <li><a data-filial="44" data-url="http://scherbinka.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Москва (Щербинка)</a></li>

						    

						    						    
						    
						    <li><a data-filial="43" data-url="http://troick.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Москва (Троицк)</a></li>

						    

						    						    
						    
						    <li><a data-filial="45" data-url="http://moskovskij.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Москва (Московский)</a></li>

						    

						    						    
						    
						    <li><a data-filial="22" data-url="http://balashiha.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Балашиха</a></li>

						    

						    						    
						    
						    <li><a data-filial="18" data-url="http://vidnoe.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Видное (Ленинский г.о.)</a></li>

						    

						    						    
						    
						    <li><a data-filial="12" data-url="http://voronezh.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Воронеж</a></li>

						    

						    						    
						    
						    <li><a data-filial="49" data-url="http://dedovsk.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Дедовск</a></li>

						    

						    						    
						    
						    <li><a data-filial="29" data-url="http://dzerjinskiy.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Дзержинский</a></li>

						    

						    						    
						    
						    <li><a data-filial="51" data-url="http://dmitrov.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Дмитровский ГО</a></li>

						    

						    						    
						    
						    <li><a data-filial="31" data-url="http://dolgoprudny.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Долгопрудный</a></li>

						    

						    						    
						    
						    <li><a data-filial="19" data-url="http://domodedovo.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Домодедово</a></li>

						    

						    						    
						    
						    <li><a data-filial="7" data-url="http://gukovskij.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Жуковский</a></li>

						    

						    						    
						    
						    <li><a data-filial="32" data-url="http://zvenigorod.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Звенигород</a></li>

						    

						    						    
						    
						    <li><a data-filial="6" data-url="http://zelenograd.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Зеленоград</a></li>

						    

						    						    
						    
						    <li><a data-filial="39" data-url="http://ivanteevka.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Ивантеевка</a></li>

						    

						    						    
						    
						    <li><a data-filial="48" data-url="http://istra.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Истра ГО</a></li>

						    

						    						    
						    
						    <li><a data-filial="25" data-url="http://korolev.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Королев</a></li>

						    

						    						    
						    
						    <li><a data-filial="40" data-url="http://kotelniki.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Котельники</a></li>

						    

						    						    
						    
						    <li><a data-filial="26" data-url="http://krasnogorsk.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Красногорск</a></li>

						    

						    						    
						    
						    <li><a data-filial="52" data-url="http://lobnya.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Лобня</a></li>

						    

						    						    
						    
						    <li><a data-filial="33" data-url="http://lytkarino.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Лыткарино</a></li>

						    

						    						    
						    
						    <li><a data-filial="9" data-url="http://lubercy.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Люберцы (Люберецкий р-н)</a></li>

						    

						    						    
						    
						    <li><a data-filial="8" data-url="http://mytishi.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Мытищи</a></li>

						    

						    						    
						    
						    <li><a data-filial="46" data-url="http://naro-fominsk.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Наро-Фоминский ГО</a></li>

						    

						    						    
						    
						    <li><a data-filial="34" data-url="http://noginsk.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Ногинск</a></li>

						    

						    						    
						    
						    <li><a data-filial="14" data-url="http://odintsovo.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Одинцово</a></li>

						    

						    						    
						    
						    <li><a data-filial="5" data-url="http://podolsk.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Подольск</a></li>

						    

						    						    
						    
						    <li><a data-filial="41" data-url="http://pushkino.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Пушкино</a></li>

						    

						    						    
						    
						    <li><a data-filial="30" data-url="http://ramenskoe.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Раменское</a></li>

						    

						    						    
						    
						    <li><a data-filial="27" data-url="http://reutov.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Реутов</a></li>

						    

						    						    
						    
						    <li><a data-filial="50" data-url="http://solnechnogorsk.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Солнечногорский ГО</a></li>

						    

						    						    
						    
						    <li><a data-filial="47" data-url="http://tula.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Тула</a></li>

						    

						    						    
						    
						    <li><a data-filial="38" data-url="http://fryazino.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Фрязино</a></li>

						    

						    						    
						    
						    <li><a data-filial="28" data-url="http://himki.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Химки</a></li>

						    

						    						    
						    
						    <li><a data-filial="37" data-url="http://schelkovo.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Щелково</a></li>

						    

						    						    
						    
						    <li><a data-filial="35" data-url="http://elektrostal.pizzasushiwok.ru/rolls/ugor-tempura-roll/" href="#" data-active="0">Электросталь</a></li>

						    

						    						
					    </ul>
					    <a class="btn-close" href="#">close</a>
					</form>
 			    </div>			   



			    <div class="login-popup popup-box" style="z-index: 100001; display:none;">

                    <form  method="POST" id="login_form">
                    	<input type="hidden" name="confirmed_email" id="confirmed_email">
                        <input type="hidden" name="verified_email" id="verified_email">
                        <fieldset>
                            <strong class="title-popup">Вход</strong>
                            <div id="way_to_login">
	                            <label>
	                                Телефон
	                            </label>
	                            <input type="text" class="tel-input" id="mobile_phone" name="user_login" style="white-space: normal;text-align: left;" data-mask="8-999-999-99-99" > 
                        	</div>
                                                        <label>
                                Пароль
                            </label>
                            <input type="password" name="password" id="login-password">
                            <div class="holder">
                                <input type="submit" value="Войти"/>
		                       <a href="#" class="forgot-password" onclick="forgot_password(event);">Забыли пароль?</a>

		                       <a href="/registration/" class="forgot-password">Регистрация</a>
                            </div>
                            <div class="holder">
                                <!--span class="alt-enter">Войти через социальные сети</span-->
                                <ul class="social-enter" style="display:block !important;">
                                    <li>
                                    </li>
                                </ul>

                                <a href="#" onclick="chageLoginWay(event);" class="forgot-password" style="margin: 0px;font-style:italic;">Другой способ</a>
                                <a href="#" onclick="chageLoginWayUR(event);" class="forgot-password" style="margin: 0px;float:left;font-style:italic;">Вход для юр. лиц</a>

                                <script>
                                	function my_ulogin(token) 
                                	{
                                		    $.getJSON("//ulogin.ru/token.php?host=" + encodeURIComponent(location.toString()) + "&token=" + token + "&callback=?",
										    function(data){
										        data=$.parseJSON(data.toString());
										        if(!data.error){
										            console.log(data);
										            //alert("Привет, "+data.first_name+" "+data.last_name+"!");
										            //alert(dump(data));
										            $('#confirmed_email').val(data.email);
													$('#verified_email').val(data.verified_email);
													if(data.verified_email==1)
													{
														$('#login_form').submit();
													}
										        }
										    });
                                	}

                                	function chageLoginWay(e)
                                	{
                                		e.preventDefault();
                                		/*if ($('#way_to_login').css('display')=='block')
                                		{
	                                		$('#other_way_to_login').css('display','block');
	                                		$('#way_to_login').css('display','none');
                                		}
                                		else
                                		{
	                                		$('#other_way_to_login').css('display','none');
	                                		$('#way_to_login').css('display','block');
                                		}*/
                                                if ($('#way_to_login input').hasClass('tel-input'))
                                		{
                                                        
                                                        $('#way_to_login label').text('Электронная почта / Логин');
                                                        $('#way_to_login input').unmask();
                                                        $('#way_to_login input').attr({'maxlength':'50'});

	                                		$('#way_to_login input').removeClass('tel-input').removeAttr('id');
                                		}
                                		else
                                		{
                                                        $('#way_to_login label').text('Телефон');
                                                        $('#way_to_login input').mask('8-999-999-99-99');
	                                		$('#way_to_login input').addClass('tel-input').attr('id','mobile_phone');
                                		}
                                	}

                                	function chageLoginWayUR(e)
                                	{
                                		e.preventDefault();
                                		/*if ($('#way_to_login').css('display')=='block')
                                		{
	                                		$('#other_way_to_login').css('display','block');
	                                		$('#way_to_login').css('display','none');
                                		}
                                		else
                                		{
	                                		$('#other_way_to_login').css('display','none');
	                                		$('#way_to_login').css('display','block');
                                		}*/

                                        if ($('#way_to_login input').hasClass('tel-input'))
                                		{
                                                        
                                            $('#way_to_login label').text('Номер клиента');
                                            $('#way_to_login input').mask('9-999-999-99-99');

	                                		$('#way_to_login input').removeClass('tel-input').removeAttr('id');
                                		}
                                		else
                                		{
                                            $('#way_to_login label').text('Телефон');
                                            $('#way_to_login input').mask('8-999-999-99-99');
	                                		$('#way_to_login input').addClass('tel-input').attr('id','mobile_phone');
                                		}
                                	}

                                </script>
                            </div>
                        </fieldset>
                    </form>


                    <script>
                    	function restore_password(form, e)
                    	{

                    		e.preventDefault();

							    $.ajax({
								type: "POST",
								url: '/index.php',
								data: form.serialize(),
								dataType : "json",
								success: function (data, textStatus) {

										$("#restore-password-form").css('display','none');
										$(".restore-password").html(data.message);

										$('.login-popup').find('>form').find('input:text').first().val(data.phone);
									}
							    });

                    	}

                    	function close_login_popup()
                    	{
                    		$('.login-popup').slideUp('fast');
                    		$('.login-popup').find('>form').css('display','block');
                    		$('.restore-password').css('display','none');
                                $('html, body').off('click', clickF);

                    	}
                    </script>

                    <div class="restore-password">
                        <form action="#" id="restore-password-form">
                        	<input type="hidden" name="mod_name" value="registration">
							<input type="hidden" name="tpl" value="restore_password">
                            <fieldset>
                                <strong class="title-popup">Восстановление пароля</strong>
                                <label>
                                    Телефон
                                </label>
                                <input type="text" class="tel-input" name="phone">
                                <p>
                                    Укажите номер телефона, который был введен вами во время регистрации.
                                </p>
                                <div class="holder">
                                    <input type="submit" value="Восстановить" onclick="restore_password($('#restore-password-form'),event);"/>
                                </div>
                            </fieldset>
                        </form>
                    </div>


                    <a href="#" class="btn-close" onclick="close_login_popup();return false;">close</a>
                </div>



				<header class="header">                    
                    <div class="top-header">

												<div class="open-menu" onclick="model_openmenu.f.s1.switch();">
													<i class="mdi mdi-menu"></i>
												</div>

                        <div class="wrapper holder">

            			    			    
			    			    
			    <strong class="logo"><a href="/">pizzasushiwok.ru</a></strong>
            			    			     
			    
			    

			    
                				<div class="delivery">
					<a href="#" class="choose_city_link" onclick="showCitiesDecktop ($('#choose-city form#filials_list ul li')); choose_city($(this), $('#choose-city'), event);return false;">Москва</a>
                                        <br>
					<span class="desktop-view">
						<a href="/page/delivery/" target="_blank"><strong>Бесплатная доставка</strong></a>                                                
					</span>
                                        <p>с 08:00 до 05:00 *</p>
				</div>
				

			    
			    


			    			    
				<script>

					// 1] Закрывать окно выбора города, если ширина окна <= 768
					$(document).ready(function(){

						addEvent(window, ['resize'], function(){

							if(getBrowserWindowMetrics().width <= 768) {
								$('#choose-city').css('display', 'none');
							}

						});

					});

				</script>
						    
			    


        <div class="user-menu-wrap user-profile-block">                                                                

                                                
<div class="cart_car">
        <img src="/images/car_empty.svg" width="45" height="24" alt="car_empty"/>
    </div>

					<span class="price"><span class="total_cart_sum" data-bind="text: model_cart.total_cart_sum()">0</span> <span class="rubl">руб</span></span>

					<ul>
	
                        					    <li>
					    								<div class="circle-mask pointer">
																<span>Войти</span>
							</div>
												    	<!--a href="#" class="user" onclick="$('.login-popup').css('display', 'block'); return false;"></a-->
					    </li>
					     
					    
						
				    
                        <li class="li_cart">
                            <noindex><a   rel="nofollow"  href="/cart/" class="cart"></a></noindex>
							<span class="counter total_cart_amount" data-bind="text: total_cart_amount">0</span>
                        </li>

                    </ul>
	
	
                </div>
			    
			    
			    
			    

								<script>
									function forgot_password(e){

										e.preventDefault();
                                                                                
                                                                                $('#login_form #mobile_phone').val('');
                                                                                $('#login_form #login-password').val('');

										$('.login-popup').find('>form').fadeOut(300, function(){
											$('.login-popup').find('.restore-password').fadeIn(300).find('input:text').first().focus();
										});
									}
                                                                        
                                                                        (function() {
                                                                            
                                                                            $('.circle-mask.pointer').on('click', function(e) {
                                                                                
                                                                                e.preventDefault();
                                                                                
                                                                                if(!$('.login-popup').is(':visible')) {
                                                                                    $('.login-popup').slideDown('fast', function() {

                                                                                        clickF = function (event) {
                                                                                            if($(event.target).parents('.login-popup').length === 0) {
                                                                                                $('.login-popup').slideUp('fast');
                                                                                                $('.login-popup').find('>form').show();
                                                                                                $('.restore-password').hide();
                                                                                                $('html, body').off('click', clickF);
                                                                                            }
                                                                                        };
                                                                                        $('html, body').on('click', clickF);                                                                                    

                                                                                    });
                                                                                    
                                                                                }
                                                                                                                                                               
                                                                            });
                                                                            
                                                                        })();

								</script>
                            
			    								
						    


<div class="top-sub-menu2 top-sub-menu-guest2">
    <p>Действующие промокоды тут</p>
    <ul>
        <li>
        <noindex><a rel="nofollow" href="https://vk.com/pizzasushiwokru" target="_blank" class="vk" onclick="yaCounter39791110.reachGoal('click_vk');">vk</a></noindex>
        </li>
                <li>
        <noindex><a rel="nofollow" href="https://ok.ru/group/61749467742289" target="_blank" class="ok" onclick="yaCounter39791110.reachGoal('click_ok');">ok</a></noindex>
        </li> 
        <li>
        <noindex><a rel="nofollow" href="https://t.me/+-wGoh2-Hufc1ZDNi" target="_blank" class="telegram" onclick="yaCounter39791110.reachGoal('click_telegram');">telegram</a></noindex>
        </li> 
    </ul>    
</div>



   


						    			    
                <div class="callback">                                                                    <a class="phone desktop-view" href="tel:+74951343333" onclick="yaCounter39791110.reachGoal ('klik-po-telefonu'); return true;">
                                    <span>+7 (495) 134-33-33</span>
                            </a>                                                          
                                            <a href="#" class="desktop-view call-me-back" onclick="callback($(this), $('#callback'), event);return false;">Перезвоните мне</a>
                </div>


				<script>
                                    
                                $(function() {
                                    
                                    $('#callback1').on('click', function(e) {                                        
                                        e.preventDefault();
                                        $('#callback_form').trigger('submit');
                                    });
                                    
                                    $('#callback_form').on('submit', function(e) {
                                        e.preventDefault();
                                        callback_check($('#product_id_menu').val());
                                        yaCounter39791110.reachGoal ('perezvonite-mne');
                                    });
                                    
                                    $('#callback .btn-close').on('click', function(e) {
                                        
                                        e.preventDefault();
                                        
                                        $('#callback').slideUp('fast');
                                        $('#callback_form').css('display','block');
                                        $('#callback_message').css('display','none');
                                        $('html, body').off('click', clickF);
                                        
                                    });
                                    
                                });
                                    
                                                                     
                                    
				function callback(link, block, e)
				{                   
                                        					//console.log(link,e);
                                        if(block.is(':visible')) {
                                            return false;
                                        }
                                            block.hide();
					
					$('#product_message').html('');

					if (link.hasClass('one-click'))
					{
	                    var div = document.createElement('div');
	                    //div.className = "order-row";
	                    div.id = "product_message";
	                    div.style.textAlign = "center";

	                    var img = document.createElement('img');

	                    if(PM[link.attr('id_menu')]['current_item']<3 )
	                    {
	                    	img.src = "https://static.pizzasushiwok.ru/images/menu_new/"+link.attr('id_menu')+"-300.jpg";
	                    }
	                    else
	                    {
	                    	img.src = "https://static.pizzasushiwok.ru/images/menu_new/"+link.attr('id_menu')+"t-300.jpg";
	                    }	

	                    img.width = 150;
	                    img.style.margin = '0px auto 10px';

	                    div.appendChild(img);

	                    var name = document.createElement('div');
	                    name.style.fontWeight = 700;
	                    name.style.color = 'black';
	                    name.innerHTML = PM[link.attr('id_menu')]['name_menu'];

	                    div.appendChild(name);


	                    var line = document.createElement('div');
	                    line.innerHTML = '<hr><br>';
	                    
	                    div.appendChild(line);

	                    document.getElementById('product_message').appendChild(div);

						$('#product_id_menu').val(link.attr('id_menu'));

					}

					$("#callback_email").css("display","none");

                    var startTop = parseInt(link.offset().top+33);
                    var startLeft = parseInt(e.clientX);		
        		
                        if(!block.is(':visible')) {
                            block.css('top',startTop);
                            block.css('left',startLeft);
                            block.slideDown('fast', function() {
                                
                                clickF = function (event) {
                                    if($(event.target).parents('#callback').length === 0) {
                                        $('#callback').slideUp('fast');
                                        $('html, body').off('click', clickF);
                                    }
                                };
                                $('html, body').on('click', clickF);                                
                                
                            });
                        }
				}

				function callback_check(id_menu)
				{
					
					if($("#callback_email").val()=='') // защита от роботов, строка должна быть пустой
					{

						//console.log($("#callback_phone").val().length);
						if($("#callback_phone").val().length==15) // проверка на заполнение номера телефона
						{
						    

							//console.log(id_menu);
							if(id_menu =='')
							{
							    
							    $.ajax({
								type: "POST",
								url: '/index.php',             
								data: $('#callback_form').serialize(),
								dataType : "json",                     
								success: function (data, textStatus) {
								
										$("#callback_form").css('display','none');
										$("#callback_message").css('display','block');
										$("#callback_message").html(data.message);
                                                                                $("#callback_name").val('');
                                                                                $("#callback_phone").val('');
									}
							    });	

							}
							else
							{
								var product = PM[id_menu]; 

								product.amount = kocomponents.items[id_menu].item().amount();
								
								if(kocomponents.items[id_menu].item().cat.breadcrumbs()[0].alias() == 'pizza')
								{
									product.size = kocomponents.items[id_menu].item().sizes.choosen().size();
									product.current_item = kocomponents.items[id_menu].item().choosen_type().num();								
								}

								if(kocomponents.items[id_menu].item().cat.breadcrumbs()[0].alias() == 'wok')
								{
									// соус 
									product.sauce = kocomponents.items[id_menu].item().sauces.choosen().id_menu();
								}

								//console.log(product);
								
								product.add_ingr.splice(0, product.add_ingr.length); // очищаем массив ингредиентов
								$.each(kocomponents.items[id_menu].item().items()[product.current_item].ingrids(), function(index, obj){
									if(obj.amount() > 0)
									{
										product.add_ingr.push({
											amount : obj.amount(),
											id_menu : obj.id_menu(),
											name_menu : obj.name_menu(),
											price : obj.price()
										}); 
									}
								});


							    var pars = {
								    mod_name: "call_me",
								    task: "put_request",
								    name: $("#callback_name").val(),
								    phone: $("#callback_phone").val(),
								    product_arr: $.serialize(product) //$.base64Encode($.serialize(PM[id_menu]))
							    };
							    
							    $.ajax({
								type: "POST",
								url: '/index.php',             
								data: pars,
								dataType : "json",                     
								success: function (data, textStatus) {
								
										$("#callback_form").css('display','none');
										$("#callback_message").css('display','block');
										$("#callback_message").html(data.message);
									}
							    });								
							}


						} 

					}
				}
                                
				function code_check(ID)
				{					

						//console.log($("#callback_phone").val().length);
						    
                                                            if($("#callback_code").val().length === 0) {
                                                                alert('Пустой проверочный код');
                                                                return false;
                                                            }
                                                            
							    var pars = {
								    mod_name: "call_me",
								    task: "code_check",
								    code: $("#callback_code").val(),
                                                                    ID: ID,
							    };
							    
							    $.ajax({
								type: "POST",
								url: '/index.php',             
								data: pars,
								dataType : "json",                     
								success: function (data, textStatus) {
                                                                            if(data.result) {
										$("#code_form").css('display','none');
                                                                                $("#one-click-ok").css('display','block');
										$("#code_message").css('display','block');
										$("#code_message").html(data.message);
                                                                            }
                                                                            else {
										$("#code_message").css('display','block');
										$("#code_message").html(data.message);
                                                                            }
									}
							    });	




					}
                             
                                
				</script>
                                                                

						    
			    
			    


                        </div>
                    </div>

					
		
		
                    <div class="main-header">
                        <div class="wrapper holder">
                            <nav>
                                <ul>

                                    <li class='new '>
                                        <a href="/ekonom/"><span style="text-transform: uppercase;color:red;" onclick="yaCounter39791110.reachGoal('click_econom');">Sale!</span></a>
                                    </li>
                                    
                				                    				                                        <li >
                                        <a href="/pizza/"><span>Пиццы</span></a>
                                    </li>                				                    				                    				                                        <li >
                                        <a href="/assorti/"><span>Ассорти</span></a>
                                    </li>                				                    				                    				                                        <li  class="active" >
                                        <a href="/rolls/"><span>Роллы</span></a>
                                    </li>                				                    				                    				                                        <li >
                                        <a href="/wok/"><span>Wok</span></a>
                                    </li>                				                    				                    				                                        <li >
                                        <a href="/sushi/"><span>Суши</span></a>
                                    </li>                				                    				                    				                                        <li >
                                        <a href="/sendvichi/"><span>Сэндвичи</span></a>
                                    </li>                				                    				                    				                                        <li >
                                        <a href="/snakes/"><span>Закуски</span></a>
                                    </li>                				                    				                    				                                        <li >
                                        <a href="/supy/"><span>Супы</span></a>
                                    </li>                				                    				                    				                                        <li >
                                        <a href="/salad/"><span>Салаты</span></a>
                                    </li>                				                    				                    				                                        <li >
                                        <a href="/sousy/"><span>Соусы</span></a>
                                    </li>                				                    				                    				                                        <li >
                                        <a href="/drinks/"><span>Напитки</span></a>
                                    </li>                				                    				                    				                                        <li >
                                        <a href="/desserts/"><span>Десерты</span></a>
                                    </li>                				                    				                    				                                        <li >
                                        <a href="/paki/"><span>Наборы</span></a>
                                    </li>                				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                    				                                                        				                    				     
                                                    
                                    <li class='new '>
                                        <a href="/vegan/"><span>VEG</span></a>
                                    </li>                                    <li class='new '>
                                        <a href="/promotions/" onclick="yaCounter39791110.reachGoal('click_action');"><span style="text-transform: uppercase;color:red;">Акции</span></a>
                                    </li>
   
                                </ul>
                            </nav>

			                			<div class="user-menu-wrap" style="display:block;margin-right:35px;">
			                    
								<span class="price"><span class="total_cart_sum" data-bind="text: model_cart.total_cart_sum()">0</span> <span class="rubl">руб</span></span>

															<ul>
                                                                                                                            <li style="margin-right:4px;display: none;" class="to_gift" data-bind="css: {showelement: false }" > 
																		<a href="/cart/" class="wishlist" style="background: url(https://static.pizzasushiwok.ru/images/ico-present3.svg) no-repeat;"></a>
																		<!--span class="counter"  style="background:#ccc;">1</span-->
																</li>

																<!--li>
																		<a href="/wishlist/" class="wishlist"></a>
																		<span class="counter">0</span>
																</li-->
																<li>
																		<a href="/cart/" class="cart to_cart"></a>
																		
										<span class="counter total_cart_amount" data-bind="text: total_cart_amount">0</span>
																</li>
															</ul>
	                					</div>

							<a href="/" class="logo-small-header"></a>                                                        
                                                            <div class="promocode_wrap_fix"></div>                                                        
                        </div>
                    </div>

					<script>


						(function(){

							var main_header_top = 102;
							addEvent(window, ['resize', 'scroll'], function(event, params){

								var data = {
									width: 			 getBrowserWindowMetrics().width,
									offsety: 	   Math.floor(window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop),
									mainheader:  getBoundingDocRect(document.getElementsByClassName('main-header')[0])
								};

								if(data.width <= 768 || data.offsety < main_header_top) {
									$('.main-header').removeClass('mhfix');
									$('.top-header').removeClass('mhfix');
									$('.page').removeClass('mhfix');
									$('.logo-small-header').removeClass('show');
									$('.promocode_bar_fix').removeClass('show');
								}

								else {
									$('.main-header').addClass('mhfix');
									$('.top-header').addClass('mhfix');
									$('.page').addClass('mhfix');
									$('.logo-small-header').addClass('show');
									$('.promocode_bar_fix').addClass('show');
								}

							}, {main_header_top: main_header_top})();

						})();


						(function(){

							addEvent(window, ['resize', 'scroll', 'touchmove'], function(event, params){

								var data = {
									width: 					getBrowserWindowMetrics().width,
									offsety: 				window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop,
									header_metrics: getBoundingDocRect(document.getElementsByClassName('header')[0])
								};

								if(data.width > 768 || data.offsety <= 0) {
									$('#mobile-menu').css('position','absolute');
									if(!model_openmenu.m.s1.expanded()) {
										$('.header').removeClass('fix');
										$('.page').removeClass('fix');
                                                                                $('.popupouter').stop().slideDown('slow');
									}
								}
								else {
									$('.header').addClass('fix');
									$('.page').addClass('fix');
									$('#mobile-menu').css('position','fixed');
                                                                        $('.popupouter').stop().slideUp('slow');
								}

							}, {});

						})();


					</script>
		    
                </header>
    
				<div class="header-phone">
                                                                    
					<a href="tel:+74951343333" onclick="yaCounter39791110.reachGoal ('klik-po-telefonu'); return true;">+7 (495) 134-33-33</a>                                                                                 
                                                                                                                
                                        				</div>
        		
        				    
<div class="promocode_wrap">		    

<form class="table_row" name="promocode_send" method="post">
    <input type="hidden" name="task" value="all_promocode_along">
    <table class="promocode_bar">
        <tr class="container">
            <td><input type="text" name="promocode" class="promocode_input" value="Промокод" autocomplete="off" onfocus="if(this.value=='Промокод') {this.value=''}" onblur="if(this.value=='') {this.value='Промокод'}" onkeyup="this.value=this.value.toUpperCase()"></td>
            <td class="separator" style="background-color: white;"></td>
            <td><input type="submit" class="promocode_button" value="Применить"></td>
        </tr>
    </table>
</form>
<script type="text/javascript">
                                
    cities_remain = [];    
    
    function hideCities ($target, cities) {
        
        //$target = $('#choose-city form#filials_list ul li');
        //cities = ["Санкт-Петербург", "Балашиха", "Видное", "Дзержинский", "Долгопрудный", "Домодедово", "Железнодорожный", "Звенигород", "Зеленоград", "Жуковский", "Калуга", "Климовск", "Королев", "Красногорск", "Люберцы", "Лыткарино", "Мытищи", "Ногинск", "Одинцово", "Подольск", "Раменское", "Реутов", "Химки", "Электросталь"];
        //console.log($target);
        //console.log(cities);
        
        $target.each(function() {
            //console.log($(this));   
            if(cities.indexOf($(this).find('a').text()) === -1) {
                $(this).hide();
            }         
        });
        
    }   
    
    function showCities ($target) {
        
        //$target = $('#choose-city form#filials_list ul li');        
        //console.log($target);
        $target.each(function() {
            //console.log($(this));   
            $(this).show();         
        });
        
    }
    
    function hideCitiesDecktop ($target, cities) {
        
        hideCities ($target, cities);
        
        var columns = Math.ceil(cities.length/10);
        $target.parents('div#choose-city').css({width : 250*columns});
        $target.parents('ul').css({width : 250*columns});
        /*$target.parents('ul').css({
            WebkitColumnCount: columns-1,
            MozColumnCount: columns-1,
            columnCount: columns-1,
            WebkitColumnWidth: 'auto',
            MozColumnWidth: 'auto',
            columnWidth: 'auto',
            WebkitColumns: 'auto ' + columns-1,
            MozColumns: 'auto ' + columns-1,
            columns: 'auto ' + columns-1
        });
        $target.css({width : Math.round(100/columns)+'%'});*/
    }   
    
    function showCitiesDecktop ($target) {
        
        showCities ($target);
        
        var columns = Math.ceil($target.length/10);
        $target.parents('div#choose-city').css({width : 250*columns});
        $target.parents('ul').css({width : 250*columns});
        /*$target.parents('ul').css({
            WebkitColumnCount: columns-1,
            MozColumnCount: columns-1,
            columnCount: columns-1,
            WebkitColumnWidth: 'auto',
            MozColumnWidth: 'auto',
            columnWidth: 'auto',
            WebkitColumns: 'auto ' + columns-1,
            MozColumns: 'auto ' + columns-1,
            columns: 'auto ' + columns-1
        });
        $target.css({width : Math.round(100/columns)+'%'});*/
    }  
    
    function sendPromocode (promocode) {
        /*console.log({
            promocode: promocode.toUpperCase(),
            model_cart_promocode: model_cart.promocode().toUpperCase()
        });*/
        if(model_cart.promocode().toUpperCase() === promocode.toUpperCase()) {
            return false;
        }
        if($('.promocode_wrap input[name=task]').val() === "all_promocode_along") {            
            $('.promocode_wrap input[name=promocode]').val(promocode.toUpperCase());
            $('.promocode_wrap form[name=promocode_send]').trigger('submit');
            return true;
        }
        else if($('.promocode_wrap input[name=task]').val() === "del_promocode_along") {
            $input_task = $('.promocode_wrap input[name=task]');
            $input_task.val("all_promocode_along");
            $input_promocode = $('<input type="hidden" name="promocode">').val(promocode);
            $input_promocode.appendTo($input_task);
            $('.promocode_wrap form[name=promocode_send]').trigger('submit');
            return true;
        }        
        return false;
    }  
    
    function delPromocode () {
        
        if($('.promocode_wrap input[name=task]').val() === "del_promocode_along") {
            $('.promocode_wrap form[name=promocode_send]').trigger('submit');
            return true;
        }        
        return false;
        
    }
    
    $(function() {        
        
        if($('.promocode_bar_target').length === 0) {
            $div = $('<div></div>').addClass('promocode_bar_target');
            $('body').append($div);
        }
        
        $('.promocode_bar .promocode_input').on("keyup", function (){
            $(this).val($(this).val().toUpperCase());
        });  
        
        $('.promocode_bar .promocode_button_active').on("click", function (e){
            e.preventDefault();
        });  
        
        $('.promocode_bar .promocode_button_active img').on("click", function (e){
            e.preventDefault();
            $('.promocode_wrap form.table_row').trigger('submit');
        });
        
        $('.promocode_bar span.warning').on("click", function (e){
            e.preventDefault();
            swal({
                /*title:'Предупреждение',
                type:'warning',*/
                html: '<div><div><span><img src="/images/error.svg" width="31" height="31" alt="error.svg"></span><span></span></div></div>',
                position: 'top',
                target: '.promocode_bar_target',
                backdrop: 'transparent',
                allowOutsideClick: true,
                showConfirmButton: false,
                showCloseButton: true,
                timer: 3000,
                onOpen: function() {
                    /*console.log(bottom);
                    $('.promocode_bar .swal2-top').css('top',bottom);
                    console.log($('.promocode_bar .swal2-top').css('top'));*/
                    $('.promocode_bar_target .swal2-container').on("click", function (){
                        swal.clickConfirm();
                    });                                         
                }
            });
        });        
        
        /*var bottom = (parseInt(document.querySelector('.promocode_bar').getBoundingClientRect().bottom)-10)+'px!important';
        console.log(bottom);
        $('.promocode_bar .swal2-top').css('top',bottom);
        console.log($('.promocode_bar .swal2-top').css('top'));*/
        $('.promocode_wrap form.table_row').on('submit', function(e) {
            
            e.preventDefault();
            
            if($('.promocode_input').length > 0 && $('.promocode_input').val() === 'Промокод') {
                $('.promocode_input').val('');
            }
            
            if($('.promocode_input').length > 0 && $('.promocode_input').val().length === 0) {
                $('.promocode_input').val('Промокод');
                return false;
            }
                                      
            $.ajax({ 

                type: "POST",
                url: '/save_c.php',
                data: $(this).serialize(),
                dataType : "json",
                success: function (data, textStatus) {
                    
                    var items = (function(){
                        var results = [];
                        for(var key in data.items) {

                            if(!data.items.hasOwnProperty(key)) continue;
                            results.push(data.items[key]);

                        }
                        return results;
                    })();
                    
                    if(typeof(data.promocode_message) !== "undefined" && data.promocode_message.length > 0) {
                        if(data.promocode_result) {
                            model_cart.m_gifts.removeAll();
                            email_gifts = {};
                            swal({
                                    /*title:'Сообщение',
                                    type:'warning',*/
                                    html: '<div><div><span><img src="/images/error.svg" width="31" height="31" alt="error.svg"></span><span>'+data.promocode_message+'</span></div></div>',
                                    position: 'top',
                                    target: '.promocode_bar_target',
                                    backdrop: 'transparent',
                                    allowOutsideClick: true,
                                    showConfirmButton: false,
                                    showCloseButton: true,
                                    timer: data.promocode_attansion ? 0 : 3000,
                                    onOpen: function() {
                                        /*console.log(bottom);
                                        $('.promocode_bar .swal2-top').css('top',bottom);
                                        console.log($('.promocode_bar .swal2-top').css('top'));*/  
                        
                                            var pars = {
                                                mod_name: "promocode"
                                            };  
                                            
                                            $.post("/",pars,function(data1,textStatus,jqXHR){
                                                //console.log(data);
                                                $('.promocode_wrap').replaceWith(data1);

                                                var pars2 = {
                                                    mod_name: "promocode",
                                                    action: "active"
                                                };

                                                $.post("/",pars2,function(data2,textStatus,jqXHR){
                                                    //console.log(data2);
                                                    $('.promocode_wrap_fix').replaceWith(data2);                                                                                      
                                                },'html');
                                            },'html');

                                        $('.promocode_bar_target .swal2-container').on("click", function (){
                                            swal.clickConfirm();
                                        });                                         
                                    }
                                });
                            
                            model_cart.promocode(data.promocode);
                            model_cart.promocode_input(data.promocode);  
                            model_cart.gift_in_cart(true);
                    
                            if(typeof(data.gifts) !== "undefined" && data.gifts.length > 0) { 
                                model_cart.gifts.removeAll();	// очищаем подарки
                                model_cart.m_gifts.removeAll(); //lex: и остальное не фикс
                                var g = []; 
                                $.each(data.gifts, function(index, obj){
                                    g.push(obj); //console.log(obj);
                                }); //console.log(g);
                                if(g.length>0) {
                                    gifts = data.gifts;
                                    model_cart.gifts(g);
                                    if($(".presents-slider").length > 0 && $(".present-box .text").length > 0) {
                                        alignGifts('.presents-slider','.present-box .text');
                                    }
                                }
                            }

                            model_cart.update_items(items);

                            if($(".presents-info").length > 0) {
                                $(".presents-info").css('display','none');
                            }                          
                        }
                        else {
                            if(typeof(data.promocode_select) !== "undefined") {  
                                
                                cities_remain = [];   
                                
                                for (var city in data.promocode_select) {
                                    cities_remain.push(data.promocode_select[city]);
                                }
                                
                                //console.log(cities);
                                
                                swal({
                                    /*title:'Предупреждение',
                                    type:'warning',*/
                                    html: '<div><div><span><img src="/images/error.svg" width="31" height="31" alt="error.svg"></span><span>'+data.promocode_message+'</span></div></div><a href="#" id="goto_city" onclick="hideCitiesDecktop ($(\'#choose-city form#filials_list ul li\'), cities_remain); choose_city($(this), $(\'#choose-city\'), event);return false;"><span>Москва</span></a>',
                                    position: 'top',
                                    target: '.promocode_bar_target',
                                    backdrop: 'transparent',
                                    allowOutsideClick: true,
                                    showCloseButton: true, 
                                    showConfirmButton: false,                                   
                                    /*timer: 5000,
                                    input: 'select',
                                    inputOptions: data.promocode_select,
                                    inputPlaceholder: 'Я в другом городе',*/
                                    onOpen: function() {
                                        $('form#filials_list ul li a').each(function() {
                                            $(this).data('promocode_try',data.promocode_try);
                                        });                                    },
                                    onClose: function() {
                                        $('#choose-city').css('display', 'none');
                                        $('form#filials_list ul li a').each(function() {
                                            $(this).data('promocode_try','');
                                        });                                    }
                                })/*.then(function (result) {
                                    if(typeof(result.value)!=="undefined" && result.value.length > 0) {
                                        var pars = {
                                            task: 'save_promocode_along',
                                            promocode: data.promocode_try,
                                            filial: result.value
					};
                                        $.post("/save_c.php",pars,function(data,textStatus,jqXHR){
                                            //console.log(data);
                                            window.location.href = result.value;
                                            swal.close();                                                                                       
                                        },'json');
                                    }
                                    //console.log(result);
                                })*/;                                
                            }
                            else {
                                swal({
                                    /*title:'Предупреждение',
                                    type:'warning',*/
                                    html: '<div><div><span><img src="/images/error.svg" width="31" height="31" alt="error.svg"></span><span>'+data.promocode_message+'</span></div></div>',
                                    position: 'top',
                                    target: '.promocode_bar_target',
                                    backdrop: 'transparent',
                                    allowOutsideClick: true,
                                    showConfirmButton: false,
                                    showCloseButton: true,
                                    timer: 3000,
                                    onOpen: function() {
                                        /*console.log(bottom);
                                        $('.promocode_bar .swal2-top').css('top',bottom);
                                        console.log($('.promocode_bar .swal2-top').css('top'));*/
                                        $('.promocode_bar_target .swal2-container').on("click", function (){
                                            swal.clickConfirm();
                                        });                                         
                                    }
                                });                                
                            }

                        }
                        
                    }//console.log(typeof(data.gifts) !== "undefined" && data.gifts.length > 0);
                }
            });            
            
        });
        
            
        
    });
    function sendpromobutt(e,s,promocode,params){

        if ((params.length === 1 && params[0]) ||
            (e.offsetX > (s.clientWidth /100 * params[1]) && e.offsetX < s.clientWidth /100 *params[3] && e.offsetY > s.clientHeight /100 * params[0] && e.offsetY < s.clientHeight /100 * params[2] ))
        {
            if($('.promocode_wrap input[name=task]').val() !== "del_promocode_along" ) {
                $('.promocode_wrap input[name=promocode]').val(promocode.toUpperCase());
                $('.promocode_wrap form[name=promocode_send]').trigger('submit');
            }
            else if(model_cart.promocode().length > 0 && model_cart.promocode() !== promocode.toUpperCase())
            {
                $('.promocode_wrap input[name=task]').val("all_promocode_along");
                $input = $('<input>').attr('type','hidden').attr('name','promocode').attr('value',promocode.toUpperCase());
                $('.promocode_wrap form[name=promocode_send]').append($input);
                //$('.promocode_wrap input[name=promocode]').val(promocode.toUpperCase());

                $('.promocode_wrap form[name=promocode_send]').trigger('submit');
            }
            return false;
        }

        return true;
    }
</script>
</div>                       
                                                      
                <section class="main holder">
                    <div class="wrapper">
		    
			
                        <div class="items holder">
			
			   			
		




						    
                                                
                                    
                                    
                                    
                        <div itemscope itemtype="http://schema.org/IndividualProduct" class="pdp holder item-model-cont">
                            <div itemscope itemtype="http://schema.org/BreadcrumbList" class="back-row desktop-view">
                                <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemprop="item" href="/"><span itemprop="name">Главная</span><meta itemprop="position" content="1" /></a></span>
                                                                        <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemprop="item" href="/rolls/"><span itemprop="name">Роллы</span><meta itemprop="position" content="2" /></a></span>
                                                                            <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a itemprop="item" href="/rolls/rolly-v-tempure/"><span itemprop="name">В темпуре</span><meta itemprop="position" content="3" /></a></span>
                                                                    <span style="padding: 0 11px 0 11px;border: 1px solid #eaeaea;float: left;position: relative;">Угорь темпура ролл</span>
                            </div>
                                                         <div class="pdp-img" style="margin: 60px 0 0;">
                                
                                <div style="position: absolute; background: #fff;padding: 0px 10px 0px 0px;z-index:9000;background: rgba(255, 255, 255, 0);border-radius: 7%;">

                                    
                                                                        <div class="lbl hitlbl"><img style="width:51px;height:51px;" src="https://static.pizzasushiwok.ru/images/pepper.svg" alt="острое блюдо"></div> 
                                                                        
                                    
                                                                        
                                    
                                </div>  

                            
                                				
                                <div class="photo photo-667 active"> 
                                    <a href="#"><img src="https://static.pizzasushiwok.ru/images/menu_new/667-1300.jpg" alt="Угорь темпура ролл стандарт" itemprop="image"/></a>
                                </div>  
                                
                                                        </div>
                            <span itemprop="offers" itemscope itemtype="http://schema.org/Offer">
                              <meta itemprop="price" content="389.00">
                              <meta itemprop="priceCurrency" content="RUR" />
                              <meta itemprop="category" content="Роллы / В темпуре" />
                            </span>                                
    
                            <div class="pdp-text" id_menu="667">
			    
                                <h1 class="hide-on-mobile" itemprop="name">Угорь темпура ролл</h1>
                            <div id="social_source" class="social">
                                <ul>
                                    <li >
                                        
                                        
<script src="//yastatic.net/es5-shims/0.0.2/es5-shims.min.js"></script>
<script src="//yastatic.net/share2/share.js"></script>
<div class="ya-share2" data-services="vkontakte,odnoklassniki,viber,whatsapp,skype,telegram" data-counter="" onclick="yaCounter39791110.reachGoal('ya-share2');"></div>
                                        
                                    </li>

                                </ul>
                            </div>                                   
                                   
                                
                                                                
                                <div class="item_ingrids">
                                                                 
                                    <a target="_blank" href="/rolls/sostav/ris/">рис</a>                                    
                                 
                                    <a target="_blank" href="/rolls/sostav/nori/">нори</a>                                    
                                 
                                    <a target="_blank" href="/rolls/sostav/ugor-kopchenyj/">угорь копченый</a>                                    
                                 
                                    <a target="_blank" href="/rolls/sostav/krab-snezhnyj/">краб снежный</a>                                    
                                 
                                    <a target="_blank" href="/rolls/sostav/sous-spajs/">соус "Спайс"</a>                                    
                                 
                                    <a target="_blank" href="/rolls/sostav/salat-ajsberg/">салат "Айсберг"</a>                                    
                                 
                                    <a target="_blank" href="/rolls/sostav/suhari-panirovochnye/">сухари панировочные</a>                                    
                                                                
                                
                                </div>
                                                                
                                                                                                
                                
                                 


																<h2>Пищевая ценность на 100 г</h2>
		<div class="holder nutritional">
                                    <div class="col">
                                        <div class="pdp-row">
                                            <span>Энерг. ценность</span>
                                            <span>220 ккал</span>
                                        </div>
                                        <div class="pdp-row">
                                            <span>Белки</span>
                                            <span>5.8 г</span>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="pdp-row">
                                            <span>Жиры</span>
                                            <span>10.2 г</span>
                                        </div>
                                        <div class="pdp-row">
                                            <span>Углеводы</span>
                                            <span>26.3 г</span>
                                        </div>
                                    </div>
                                </div>
												

																	8 шт.
								         
				
							
							
							
		<div class="item item-card" id_menu="667">
			<div class="item-content">

				<div class="price-box" style="display: none">
					<div class="one-click"></div>
				</div>

			</div>                       

                                                    <ul style="margin-top:20px">
                            <li>&#9989; Угорь темпура ролл заказать в Москве и МО.</li>
                            <li>&#9989; Угорь темпура ролл с доставкой на дом в Москве и МО.</li>
                            <li>&#9989; Угорь темпура ролл в Москве и МО из ресторана ПиццаСушиВок.</li>
                        </ul>
                        
<ul class="page_categories_head">
    <li>&nbsp;</li>
    <li>Категории товара:</li>
    <li>&nbsp;</li>
</ul>
<div id="page_categories_container">
    <input type="checkbox" value="1" class="hide" id="hd">
    <label for="hd"></label>        <ul class="page_categories">
            <li>
                    <a href="/page/sushi-rolly/">
                        Суши роллы
                    </a>
                </li>
            <li>
                    <a href="/page/Rolls-pizza/">
                        Rolls pizza
                    </a>
                </li>
            <li>
                    <a href="/page/hochu-rolly/">
                        Хочу роллы
                    </a>
                </li>
            <li>
                    <a href="/page/dlinnye-rolly/">
                        Длинные роллы
                    </a>
                </li>
            <li>
                    <a href="/page/vkusnye-nedorogie-rolly/">
                        Вкусные недорогие роллы
                    </a>
                </li>
            <li>
                    <a href="/page/rolly-na-vynos/">
                        Роллы на вынос
                    </a>
                </li>
            <li>
                    <a href="/page/sushi-rolls/">
                        Sushi rolls
                    </a>
                </li>
            <li>
                    <a href="/page/sushi-rolly-vok/">
                        Суши роллы вок
                    </a>
                </li>
            <li>
                    <a href="/page/sushi-rolly-poblizosti/">
                        Суши роллы поблизости
                    </a>
                </li>
            <li>
                    <a href="/page/fruktovye-rolly/">
                        Фруктовые роллы
                    </a>
                </li>
            <li>
                    <a href="/page/menyu-rollov/">
                        Меню роллов
                    </a>
                </li>
            <li>
                    <a href="/page/rolly-vok/">
                        Роллы вок
                    </a>
                </li>
            <li>
                    <a href="/page/byudzhetnye-rolly/">
                        Бюджетные роллы
                    </a>
                </li>
            <li>
                    <a href="/page/roli-sushi/">
                        Роли суши
                    </a>
                </li>
            <li>
                    <a href="/page/rolls-sushi/">
                        Роллс суши
                    </a>
                </li>
            <li>
                    <a href="/page/prosto-rolly/">
                        Просто роллы
                    </a>
                </li>
            <li>
                    <a href="/page/rolly-russkie/">
                        Роллы русские
                    </a>
                </li>
            <li>
                    <a href="/page/sushi-vok-rolly-menyu/">
                        Суши вок роллы меню
                    </a>
                </li>
            <li>
                    <a href="/page/sushi-sushi-roll/">
                        Суши суши ролл
                    </a>
                </li>
            <li>
                    <a href="/page/sushi-vok-roll-mesyaca/">
                        Суши вок ролл месяца
                    </a>
                </li>
            <li>
                    <a href="/page/sushi-vok-roll-fiesta/">
                        Суши вок ролл фиеста
                    </a>
                </li>
            <li>
                    <a href="/page/rolly-s-sosiskami/">
                        Роллы с сосисками
                    </a>
                </li>
            <li>
                    <a href="/page/rolly-krasivye/">
                        Роллы красивые
                    </a>
                </li>
            <li>
                    <a href="/page/roll-s-takuanom/">
                        Ролл с такуаном
                    </a>
                </li>
            <li>
                    <a href="/page/rolly-na-belom-fone/">
                        Роллы на белом фоне
                    </a>
                </li>
            <li>
                    <a href="/page/rolly-s-ketoy/">
                        Роллы с кетой
                    </a>
                </li>
            <li>
                    <a href="/page/sushi-roll/">
                        Суши roll
                    </a>
                </li>
            <li>
                    <a href="/page/roll-i-sush/">
                        Ролл и суш
                    </a>
                </li>
            <li>
                    <a href="/page/roll-meksika/">
                        Ролл мексика
                    </a>
                </li>
            <li>
                    <a href="/page/samye-populyarnye-rolly/">
                        Самые популярные роллы
                    </a>
                </li>
            <li>
                    <a href="/page/roll-nezhnyy/">
                        Ролл нежный
                    </a>
                </li>
                    </ul>
</div>    

		</div>


		<script>
		    var server_item = {};
		    server_item.id_menu	     = 667;
		    server_item.item  	     = PM[server_item.id_menu];
			server_item.picsize = 300;
		</script>



				
                            </div>				
			
                            						
                            <script type="text/javascript">
                                additional_products = ["125","522","278","1480","152","419","219","1398"];
                            </script>
					


				<div class="additional-products">
					<div class="wrapper">


                        <div class="headline">
                            <h2>Добавьте к заказу</h2>
                        </div>
                        <div class="allsorts additional-sorts pdp-sorts holder">	    

                        							                                <div class="sort">
                                <div class="item to-cart" id_menu="125">
                                    <div class="image">
                                        <a href="/snakes/kartofel-po-derevenski/" id="standart-dough" class="jqzoom float-shadow" data-rate="29">
                                            <img src="https://static.pizzasushiwok.ru/images/menu_new/125-300.jpg" alt="" class="zoom" data-zoom-image="https://static.pizzasushiwok.ru/images/menu_new/125-300.jpg"
                                            style="width:132px;margin-top:20px;"  alt="Картофель по-деревенски" title="Картофель по-деревенски"/>
                                        </a>
                                    </div>

                                    <div class="item-content">
                                    </div>

                                </div>
                            </div>
						    						    						                                <div class="sort">
                                <div class="item to-cart" id_menu="522">
                                    <div class="image">
                                        <a href="/wok/somen-s-kuritsey/" id="standart-dough" class="jqzoom float-shadow" data-rate="26">
                                            <img src="https://static.pizzasushiwok.ru/images/menu_new/522-300.jpg" alt="" class="zoom" data-zoom-image="https://static.pizzasushiwok.ru/images/menu_new/522-300.jpg"
                                            style="width:132px;margin-top:20px;"  alt="Сомен с курицей" title="Сомен с курицей"/>
                                        </a>
                                    </div>

                                    <div class="item-content">
                                    </div>

                                </div>
                            </div>
						    						    						                                <div class="sort">
                                <div class="item to-cart" id_menu="278">
                                    <div class="image">
                                        <a href="/sousy/khot/" id="standart-dough" class="jqzoom float-shadow" data-rate="25">
                                            <img src="https://static.pizzasushiwok.ru/images/menu_new/278-300.jpg" alt="" class="zoom" data-zoom-image="https://static.pizzasushiwok.ru/images/menu_new/278-300.jpg"
                                            style="width:132px;margin-top:20px;"  alt="Хот" title="Хот"/>
                                        </a>
                                    </div>

                                    <div class="item-content">
                                    </div>

                                </div>
                            </div>
						    						    						                                <div class="sort">
                                <div class="item to-cart" id_menu="1480">
                                    <div class="image">
                                        <a href="/sendvichi/sendvich-roll-hot-dog/" id="standart-dough" class="jqzoom float-shadow" data-rate="22">
                                            <img src="https://static.pizzasushiwok.ru/images/menu_new/1480-300.jpg" alt="" class="zoom" data-zoom-image="https://static.pizzasushiwok.ru/images/menu_new/1480-300.jpg"
                                            style="width:132px;margin-top:20px;"  alt="Сэндвич-ролл Хот-дог" title="Сэндвич-ролл Хот-дог"/>
                                        </a>
                                    </div>

                                    <div class="item-content">
                                    </div>

                                </div>
                            </div>
						    						    						                                <div class="sort">
                                <div class="item to-cart" id_menu="152">
                                    <div class="image">
                                        <a href="/sushi/spays-ebi/" id="standart-dough" class="jqzoom float-shadow" data-rate="20">
                                            <img src="https://static.pizzasushiwok.ru/images/menu_new/152-300.jpg" alt="" class="zoom" data-zoom-image="https://static.pizzasushiwok.ru/images/menu_new/152-300.jpg"
                                            style="width:132px;margin-top:20px;"  alt="Спайс эби" title="Спайс эби"/>
                                        </a>
                                    </div>

                                    <div class="item-content">
                                    </div>

                                </div>
                            </div>
						    						    						                                <div class="sort">
                                <div class="item to-cart" id_menu="419">
                                    <div class="image">
                                        <a href="/drinks/tarkhun/" id="standart-dough" class="jqzoom float-shadow" data-rate="11">
                                            <img src="https://static.pizzasushiwok.ru/images/menu_new/419-300.jpg" alt="" class="zoom" data-zoom-image="https://static.pizzasushiwok.ru/images/menu_new/419-300.jpg"
                                            style="width:132px;margin-top:20px;"  alt="Тархун" title="Тархун"/>
                                        </a>
                                    </div>

                                    <div class="item-content">
                                    </div>

                                </div>
                            </div>
						    						    						                                <div class="sort">
                                <div class="item to-cart" id_menu="219">
                                    <div class="image">
                                        <a href="/supy/miso-shiro/" id="standart-dough" class="jqzoom float-shadow" data-rate="5">
                                            <img src="https://static.pizzasushiwok.ru/images/menu_new/219-300.jpg" alt="" class="zoom" data-zoom-image="https://static.pizzasushiwok.ru/images/menu_new/219-300.jpg"
                                            style="width:132px;margin-top:20px;"  alt="Мисо-широ" title="Мисо-широ"/>
                                        </a>
                                    </div>

                                    <div class="item-content">
                                    </div>

                                </div>
                            </div>
						    						    						                                <div class="sort">
                                <div class="item to-cart" id_menu="1398">
                                    <div class="image">
                                        <a href="/desserts/desert-fistashkovyj-s-malinoj/" id="standart-dough" class="jqzoom float-shadow" data-rate="4">
                                            <img src="https://static.pizzasushiwok.ru/images/menu_new/1398-300.jpg" alt="" class="zoom" data-zoom-image="https://static.pizzasushiwok.ru/images/menu_new/1398-300.jpg"
                                            style="width:132px;margin-top:20px;"  alt="Десерт фисташковый с малиной" title="Десерт фисташковый с малиной"/>
                                        </a>
                                    </div>

                                    <div class="item-content">
                                    </div>

                                </div>
                            </div>
						    						    				
				
                        </div>
                    </div>
                </div>
                

<script>

	attach_component_item({
		class_target: 				'.item.to-cart',
		class_inside_target: 	'.item-content',
		viewmode:             'add_prod_item',
		params:       {
			show_controls: 1
		}
	});

</script>

                            


                        </div>

                        	                                
<script>
    
    $(function() {
        
        $('#relink_container input#hd1').on('change', function() {
            $('ul.relink').slideToggle(500);
        });
        
    });
    
</script>
<ul class="relink_head">
    <li>&nbsp;</li>
    <li>Доставка в других городах:</li>
    <li>&nbsp;</li>
</ul>
<div id="relink_container">
    <input type="checkbox" value="1" class="hide" id="hd1">
    <label for="hd1"></label>
    <ul class="relink">
        <li><a href="http://balashiha.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Балашихе</a></li>
        <li><a href="http://vidnoe.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Видном</a></li>
        <li><a href="http://voronezh.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Воронеже</a></li>
        <li><a href="http://dzerjinskiy.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Дзержинском</a></li>
        <li><a href="http://dolgoprudny.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Долгопрудном</a></li>
        <li><a href="http://domodedovo.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Домодедово</a></li>
        <li><a href="http://zheleznodorozhniy.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Железнодорожном</a></li>
        <li><a href="http://gukovskij.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Жуковском</a></li>
        <li><a href="http://klimovsk.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Климовске</a></li>
        <li><a href="http://zvenigorod.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Звенигороде</a></li>
        <li><a href="http://zelenograd.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Зеленограде</a></li>
        <li><a href="http://ivanteevka.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Ивантеевке</a></li>
        <li><a href="http://kaluga.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Калуге</a></li>
        <li><a href="http://korolev.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Королеве</a></li>
        <li><a href="http://krasnogorsk.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Красногорске</a></li>
        <li><a href="http://lytkarino.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Лыткарино</a></li>
        <li><a href="http://lubercy.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Люберцах</a></li>
        <li><a href="http://mytishi.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Мытищах</a></li>
        <li><a href="http://noginsk.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Ногинске</a></li>
        <li><a href="http://odintsovo.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Одинцово</a></li>
        <li><a href="http://podolsk.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Подольске</a></li>
        <li><a href="http://ramenskoe.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Раменском</a></li>
        <li><a href="http://reutov.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Реутове</a></li>
        <li><a href="http://fryazino.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Фрязино</a></li>
        <li><a href="http://himki.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Химках</a></li>
        <li><a href="http://schelkovo.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Щелково</a></li>
        <li><a href="http://elektrostal.pizzasushiwok.ru/rolls/ugor-tempura-roll/">Угорь темпура ролл в Электростали</a></li>
            </ul>
</div>			
                                
<script>
    
    $(function() {
        
        $('#suggestion_container input#hd2').on('change', function() {
            $('ul.suggestion').slideToggle(500);
        });
        
    });
    
</script>
<div class="suggestion_wrap">
    <span class="suggestion">Предлагаем также:</span>
    <div id="suggestion_container">
        <input type="checkbox" value="1" class="hide" id="hd2">
        <label for="hd2"></label>
        <ul class="suggestion">
            <li><a href="https://pizzasushiwok.ru/page/pizza-oktyabrskoe-pole/">доставка пиццы октябрьское поле</a></li>
            <li><a href="https://pizzasushiwok.ru/page/sushi-sokolniki/">сокольники суши</a></li>
            <li><a href="https://pizzasushiwok.ru/page/pizza-begovaya/">пицца беговая</a></li>
            <li><a href="https://pizzasushiwok.ru/page/pizza-taganskaya/">пицца таганская</a></li>
            <li><a href="https://pizzasushiwok.ru/page/kruglosutochno-picca-voskresensk/">пицца воскресенск</a></li>
                    </ul>
    </div>
</div>
 



<script>

	
	attach_component_item({
		class_target: 				'.item.item-card',
		class_inside_target: 	'.item-content',
		viewmode:             'item',
		params:       {
			show_controls: 1
		}
	});
        
        $(function() {
            if($('.full-description .text-page').height() > $('.full-description').height()) {
                $('#open1').show();
            }
        });
        
</script>
<!-- VK pixel -->
    <script id="vk.moskva">
        const eventParams = {
            "products" : [{"id":"667"}],
            "business_value" : 10,
            //"total_price" : 389
        };
        vkProductEvent = "view_product";
        vkTargetId = "VK-RTRG-355704-ap1Z4";
        vkPriceListId = 3613;
        if (typeof VK === 'undefined') {
            !function () {
                var t = document.createElement("script");
                t.type = "text/javascript",
                    t.async = !0,
                    t.src = "https://vk.com/js/api/openapi.js?160",
                    t.onload = function () {
                        VK.Retargeting.Init(vkTargetId), VK.Retargeting.Hit();
                        if (vkProductEvent) {
                            VK.Retargeting.ProductEvent(vkPriceListId, vkProductEvent, eventParams);
                        }
                    },
                    document.head.appendChild(t)
            }();
        }
    </script><noscript><img src="https://vk.com/rtrg?p=VK-RTRG-355704-ap1Z4" style="position:fixed; left:-999px;" alt=""/></noscript>
    <!-- end VK pixel -->

                        </div>
			
			
                    </div>
                </section>
		
				
<footer class="footer">
    <div class="wrapper holder">
    	        <a href="#" class="sitemap">Карта сайта</a>
        <div class="footer-l">
            <div class="col" style="/*height: 55px;*/">
                <ul id="menu_list">
				    				     				     
								
                        				<li>      
                        <a href="/page/about/">О компании</a>
                    </li>
				    				     				    				     				    				     				     
								
                        				<li>      
                        <a href="/page/contacts/">Контакты</a>
                    </li>
				    				     				     
								
                        				<li>      
                        <a rel="nofollow" href="https://fr.pizzasushiwok.ru/">Cотрудничество</a>
                    </li>
				    				     				     
								
                        				<li>      
                        <a href="/page/customers/">Клиентам</a>
                    </li>
				    				     				     
								
                        				<li>      
                        <a href="/page/delivery/">Доставка и оплата</a>
                    </li>
				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				     
								
                        				<li>      
                        <a href="/page/how-to-made-order/">Как сделать заказ</a>
                    </li>
				    				     				    				     				    				     				    				     				    				     				    				     				    				     				     
								
                        				<li>      
                        <a href="/page/order_no_contact_delivery/">Бесконтактная доставка</a>
                    </li>
				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				     
								
                        				<li>      
                        <a href="/restaurants/">Рестораны</a>
                    </li>
				    				     				     
								
                        				<li>      
                        <a href="/page/reviews/">Отзывы</a>
                    </li>
				    				     				    				     				    				     				    				     				    				     				    				     				    				     				     
								
                        				<li>      
                        <a href="/sitemap/">Карта сайта</a>
                    </li>
				    				     				    				     				     
								
                        				<li>      
                        <a href="/page/standarts/">Наши стандарты</a>
                    </li>
				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				    				     				     
								
                        				<li>      
                        <a href="/page/vacancies/">Вакансии</a>
                    </li>
				    				     				    				     				    				     				    				     				    				     				    				     				    				                    </ul>
            </div>
        </div>	

        

        <div class="footer-l" id="cats_list">
			
			
		    			            <div class="col" id="cats">
				<a href="/pizza/" ><h3 class="footer_h3"><span>Пиццы</span></h3></a>
                <ul>
				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				                        <li>
                        <a href="/pizza/myasnye/">Мясные</a>
                    </li>
				    				    				                        <li>
                        <a href="/pizza/vegetarianskie/">Вегетарианские</a>
                    </li>
				    				    				                        <li>
                        <a href="/pizza/morskie-i-rybnye/">Морские и Рыбные</a>
                    </li>
				    				    				                        <li>
                        <a href="/pizza/zakrytye/">Закрытые</a>
                    </li>
				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				                        <li>
                        <a href="/pizza/gril/">Гриль</a>
                    </li>
				    				    				                        <li>
                        <a href="/pizza/ostrye/">Острые</a>
                    </li>
				    				    				    				    				    				                    </ul>
            </div>

				
			
					    			            <div class="col" id="cats">
				<a href="/assorti/" ><h3 class="footer_h3"><span>Ассорти</span></h3></a>
                <ul>
				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				                        <li>
                        <a href="/assorti/bolshie-assorti/">Большие</a>
                    </li>
				    				    				                        <li>
                        <a href="/assorti/srednie-assorti/">Средние</a>
                    </li>
				    				    				                        <li>
                        <a href="/assorti/malye-assorti/">Малые</a>
                    </li>
				    				    				    				    				    				    				    				    				    				    				    				                    </ul>
            </div>

				
			
					    			            <div class="col" id="cats">
				<a href="/rolls/" ><h3 class="footer_h3"><span>Роллы</span></h3></a>
                <ul>
				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				                        <li>
                        <a href="/rolls/klassicheskie-rolly/">Классические</a>
                    </li>
				    				    				                        <li>
                        <a href="/rolls/firmennye/">Фирменные</a>
                    </li>
				    				    				                        <li>
                        <a href="/rolls/rolly-v-tempure/">В темпуре</a>
                    </li>
				    				    				                        <li>
                        <a href="/rolls/zapechennye-rolly/">Запеченные</a>
                    </li>
				    				    				                        <li>
                        <a href="/rolls/ekonom-rolls/">Эконом</a>
                    </li>
				    				    				                        <li>
                        <a href="/rolls/spajs-rolly/">Спайс</a>
                    </li>
				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				                    </ul>
            </div>

				
			
					    			            <div class="col" id="cats">
				<a href="/wok/" ><h3 class="footer_h3"><span>Wok</span></h3></a>
                <ul>
				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				                        <li>
                        <a href="/wok/lapsha-grechnevaya/">Гречневая</a>
                    </li>
				    				    				                        <li>
                        <a href="/wok/lapsha-pshenichnaya/">Пшеничная</a>
                    </li>
				    				    				                        <li>
                        <a href="/wok/lapsha-yaichnaya/">Яичная</a>
                    </li>
				    				    				                        <li>
                        <a href="/wok/tyahany/">Тяханы</a>
                    </li>
				    				    				                        <li>
                        <a href="/wok/funchozy/">Фунчозы</a>
                    </li>
				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				                    </ul>
            </div>

				
			
					    			            <div class="col" id="cats">
				<a href="/sushi/" ><h3 class="footer_h3"><span>Суши</span></h3></a>
                <ul>
				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				                        <li>
                        <a href="/sushi/klassicheskie-sushi/">Классические</a>
                    </li>
				    				    				                        <li>
                        <a href="/sushi/spajs-sushi/">Спайс</a>
                    </li>
				    				    				                        <li>
                        <a href="/sushi/zapechennye-sushi/">Запеченные</a>
                    </li>
				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				                    </ul>
            </div>

				
			
					    					    			            <div class="col" id="cats">
				<a href="/snakes/" ><h3 class="footer_h3"><span>Закуски</span></h3></a>
                <ul>
				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				    				                        <li>
                        <a href="/snakes/sneki/">Снеки</a>
                    </li>
				    				    				    				    				    				    				                        <li>
                        <a href="/snakes/drugoe/">Другое</a>
                    </li>
				    				    				    				                    </ul>
            </div>

				
			
					    					    					    					    					    					    					    					    					    					    					    					    					    					    					    					    					    					    					    					    					    					    					    					    					    					    					    					    					    					    					    					    					                <div class="col">
                <ul class="big">
				    									    									    									    									    									    					                    <li>
                        <a href="/sendvichi/">Сэндвичи</a>
                    </li>
									    									    					                    <li>
                        <a href="/supy/">Супы</a>
                    </li>
									    					                    <li>
                        <a href="/salad/">Салаты</a>
                    </li>
									    					                    <li>
                        <a href="/sousy/">Соусы</a>
                    </li>
									    					                    <li>
                        <a href="/drinks/">Напитки</a>
                    </li>
									    					                    <li>
                        <a href="/desserts/">Десерты</a>
                    </li>
									    					                    <li>
                        <a href="/paki/">Наборы</a>
                    </li>
									    									    									    									    									    									    									    									    									    									    									    									    									    									    									    									    									    									    									    									    									    									    									    									    									    									    					                    <li>
                        <a href="/ekonom/">Sale!</a>
                    </li>
									                    </ul>
            </div>	
        </div>
        <div class="footer-r">
            <div class="apps">
                <span class="mobile-view-footer">Установи мобильное приложение</span>
                <div>
                    <noindex><a id="gapp_bottom" rel="nofollow" href="https://play.google.com/store/apps/details?id=ru.itsilver.pizzaempire" target="_blank"><img src="/images/ico/google-play-badge.svg" width="155" height="46" alt="GooglePlay" /></a></noindex>
                </div>
                <div>
                    <noindex><a id="itun_bottom" rel="nofollow" href="https://itunes.apple.com/ru/app/mypizza/id657214917?l=en&mt=8" target="_blank"><img src="/images/ico/AppStore2.svg" width="155" height="46" alt="AppStore"/></a></noindex>
                </div>
                <div>
                    <noindex><a id="itun_bottom" rel="nofollow" href="https://appgallery.cloud.huawei.com/ag/n/app/C101303143?channelId=PizzaSushiWok&id=6bc9d775cb3d41d29878d73fd2ad58bd&s=54DB5EB98390FE1A213D0BE88F99FB397B36F1A35169054E63BD771855069D80&detailType=0&v=" target="_blank"><img src="/images/ico/AppGallery2.svg" width="155" height="47" alt="AppGallery"/></a></noindex>
                </div><span class="desktop-view-footer">Скачайте наше приложение</span>
            </div>
            <div class="l-side">
                <div class="tels">
                    <div class="holder">
                        <span><a href="tel:+74951343333">+7 (495) 134-33-33</a></span>
                        <span><a href="tel:+74952876500">+7 (495) 287-65-00</a></span>
                    </div>
                    <a href="/page/feedback/">Обратная связь</a>
                </div>
            </div>
        </div>
    </div>
    <div class="legal">
        <p>Осуществляя вход на этот Сайт/в мобильное приложение &laquo;ПиццаСушиВок - доставка еды&raquo;, вы подтверждаете, что ознакомлены с <a href="/site/admin_user.htm">Пользовательским соглашением</a> и <a href="/site/personal.htm">Положением по обработке и защите персональных данных</a>. С общими правилами участия в акциях и порядке получения подарков Вы можете <a href="/docs/promotions_rules.pdf">ознакомиться здесь</a></p>
    </div>    
    <div class="footer-bottom">
        <div class="wrapper holder">
            <ul class="social">
                <li>
                    <noindex><a rel="nofollow" href="https://vk.com/pizzasushiwokru" target="_blank" class="vk" onclick="yaCounter39791110.reachGoal('click_vk');">vk</a></noindex>
                </li>
                                <li>
                    <noindex><a rel="nofollow" href="https://www.youtube.com/channel/UChOftF9vhuKkyMxMJuwd3BQ" target="_blank" class="youtube">youtube</a></noindex>
                </li>
                <li>
                    <noindex><a rel="nofollow" href="https://ok.ru/group/61749467742289" target="_blank" class="ok" onclick="yaCounter39791110.reachGoal('click_ok');">ok</a></noindex>
                </li> 
                <li>
                    <noindex><a rel="nofollow" href="https://t.me/+-wGoh2-Hufc1ZDNi" target="_blank" class="telegram" onclick="yaCounter39791110.reachGoal('click_telegram');">telegram</a></noindex>
                </li>                
            </ul>
            <span>&copy; 2002–2022 <em>ПиццаСушиВок</em></span>


        </div>
    </div>
</footer>

<script type="text/javascript">
    
    let img = new Image();
    img.src = "https://static.pizzasushiwok.ru/images/ico/vk_hover.svg";
    
    let img2 = new Image();
    img2.src = "https://static.pizzasushiwok.ru/images/ico/yout_hover.svg";
    
    let img3 = new Image();
    img3.src = "https://static.pizzasushiwok.ru/images/ico/fb_hover.svg";
    
    let img4 = new Image();
    img4.src = "https://static.pizzasushiwok.ru/images/ico/inst_hover.svg";
    
    let img5 = new Image();
    img5.src = "https://static.pizzasushiwok.ru/images/ico/telegram_h.svg";
    
    let img6 = new Image();
    img6.src = "https://static.pizzasushiwok.ru/images/ico/Ok_icon_hover.svg";
    
</script>            
            
<!-- COUNTERS-->



<!-- COUNTERS END-->

<script>
function popup(text, e){
	if(e) e.preventDefault();
	$('#popup').css({
		display:'block',
		position:'fixed',
		top:'30%',
		left:'50%'
	});
	$('#close_popup').css({
		display:'block',
		'z-index':'1003',
		position:'fixed',
		top:'calc(30% + 10px)',
		left:'calc(50% + 125px)'
	});
	if(text){
		$('#popup_text').text(text);
	}
}
</script>
<div class="callback-popup popup-box" id="popup">
	<form>
		<fieldset>
			<p id="popup_text"></p>
		</fieldset>
	</form>
	</div>
	<a href="#" id="close_popup" class="btn-close" onclick="$('#popup,#close_popup').css('display','none');return false;">close</a>
</div>
<div class="callback-popup popup-box" id="callback" style="z-index:1001;">
    
    <div id="product_message"></div>

    <form id="callback_form">
        <input type="hidden" name="mod_name" value="call_me">
        <input type="hidden" name="task" value="request_call">
        <input type="hidden" name="id_menu" id="product_id_menu">
        <fieldset>
            <label>
                Ваше имя
            </label>
            <input type="text" name="name" id="callback_name">
            <label>
                Телефон
            </label>
            <input type="text" class="tel-input" name="phone" id="callback_phone">
            <p id="callback_order_text">
                Наш оператор свяжется с Вами для уточнения деталей заказа.
            </p>
            <input type="text" name="email" id="callback_email">
                        <div class="holder">
                <input type="button" id="callback1" value="Отправить запрос"/>
            </div>
        </fieldset>
    </form>

    <div id="callback_message" style="display:none;">

    </div>

    <a href="#" class="btn-close" onclick="">close</a>
</div>	


<!-- ITEM-POPUP -->




<div class="item-popup" id="popup-box-ko" style="display: none">


	<!-- ko foreach: ingrids -->

		<div class="row">

			<div class="product">
				 <span class="name" data-bind="text: name_menu"></span>
			</div>


			<div class="price">
				 <strong><span class="ex_price" data-bind="text: price"></span> <span class="rubl">руб</span></strong>
				 <div class="add-product">
						<a href="#" data-bind="click: $root.minus, css: {'hide-element': amount() == 0}" class="minus ex_minus" style="display: inline;">
							<span class="minus-ico"></span>
						</a>
						<span class="amount ex_amount" style="display: inline;" data-bind="text: amount, css: {'hide-element': amount() == 0}"></span>
						<a href="#" data-bind="click: $root.plus" class="plus ex_plus" >
							<span class="plus-ico"></span>
						</a>
				 </div>
			</div>

		</div>

	<!-- /ko -->


	<div class="total holder">
		<!--strong class="total-price"><span class="total-toppings-price-667">0</span> <span class="rubl">руб.</span><span class="add-weight">50 гр.</span></strong-->
		<a href="#" class="btn active"  onclick="$('#popup-box-ko').css('display','none');return false;">Добавить</a>
	</div>

	<a href="#" class="btn-close" onclick="$('#popup-box-ko').css('display','none');return false;">close</a>

</div> 


   

<!-- styles overrides -->

<!-- /styles overrides -->		
		
            </div>
        </div>

	
        <a href="#" class="totop only-mobile">go to top</a>


        <script>
            $(document).ready(function(){
                pdp.init();
            });  


            $(window).resize(function(){
              if($('#seo_popup').length) {
                  $('#seo_popup').css({display:'none'});
              }
              if($('#close_seo_popup').length) {
                  $('#close_seo_popup').css({display:'none'});
              }              
            });  
                            
        </script>


        <script>

        function seo_text_popup(link, text, e){

            /*var startTop = parseInt(link.offset().top+33);*/

            if(e) e.preventDefault();
            /*$('#seo_popup').css({

                display:'block',
                position:'absolute',
                top: startTop,
                left:'50%'
            });
            $('#close_seo_popup').css({
                display:'block',
                'z-index':'103',
                position:'absolute',
                top: startTop+10,
                left:'calc(50% + 125px)'
            });
            if(text){
                $('#seo_popup_text').html(text);
            }*/
        
            $('#seo_text').fancybox({
                type: 'inline',
                maxWidth:  '1280px',
                            });
            $('#seo_text').trigger('click');
        }
        </script>
        <div class="callback-popup popup-box" id="seo_popup">
            <h2 style="color:black;">Описание</h2>
            <br>
            <form>
                <fieldset>
                    <p id="seo_popup_text"></p>
                </fieldset>
            </form>
            </div>
            <a href="#" id="close_seo_popup" class="btn-close" onclick="$('#seo_popup,#close_seo_popup').css('display','none');return false;">close</a>
        </div>
        

    

<!-- Top100 (Kraken) Counter -->
<script>
    (function (w, d, c) {
    (w[c] = w[c] || []).push(function() {
        var options = {
            project: 4481621
        };
        try {
            w.top100Counter = new top100(options);
        } catch(e) { }
    });
    var n = d.getElementsByTagName("script")[0],
    s = d.createElement("script"),
    f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src =
    (d.location.protocol == "https:" ? "https:" : "http:") +
    "//st.top100.ru/top100/top100.js";
    if (w.opera == "[object Opera]") {
    d.addEventListener("DOMContentLoaded", f, false);
} else { f(); }
})(window, document, "_top100q");
</script>

<noscript>
  <img src="//counter.rambler.ru/top100.cnt?pid=4481621" alt="Топ-100" />
</noscript>
<!-- END Top100 (Kraken) Counter -->    </body>
</html>